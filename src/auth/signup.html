<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cr√©ation de compte - MWPLU</title>
    <link rel="stylesheet" href="../css/base/tokens.css" />
    <link rel="stylesheet" href="../css/pages/auth.css" />
    <link rel="stylesheet" href="../css/layout/header.css" />
    <link rel="stylesheet" href="../css/layout/footer.css" />
    <link rel="stylesheet" href="../css/components/messages.css" />
    <link rel="stylesheet" href="../css/components/buttons.css" />
    <link rel="stylesheet" href="../css/components/forms.css" />
    <link rel="stylesheet" href="../css/components/logo.css" />
    <link rel="stylesheet" href="../css/utils/utilities.css" />
    <link rel="stylesheet" href="../css/utils/modern-utilities.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .container {
        width: 100%;
        max-width: 1440px;
        margin: 0 auto;
        padding: 0 24px;
      }

      /* Modal Styling */
      .modal {
        display: none;
        position: fixed;
        z-index: 1050;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: rgba(0, 0, 0, 0.5);
      }

      .modal.show {
        display: block;
      }

      .modal-dialog {
        position: relative;
        width: auto;
        margin: 1.75rem;
        pointer-events: none;
      }

      .modal-dialog-scrollable {
        height: calc(100% - 3.5rem);
      }

      .modal-dialog-scrollable .modal-content {
        max-height: 100%;
        overflow: hidden;
      }

      .modal-dialog-scrollable .modal-body {
        overflow-y: auto;
      }

      .modal-xl {
        max-width: 1140px;
      }

      .modal-content {
        position: relative;
        display: flex;
        flex-direction: column;
        width: 95%;
        pointer-events: auto;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid rgba(0, 0, 0, 0.2);
        border-radius: 0.5rem;
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
      }

      .modal-header {
        display: flex;
        flex-shrink: 0;
        align-items: center;
        justify-content: space-between;
        padding: 1rem 1rem;
        border-bottom: 1px solid #dee2e6;
        border-top-left-radius: calc(0.5rem - 1px);
        border-top-right-radius: calc(0.5rem - 1px);
      }

      .modal-title {
        margin-bottom: 0;
        line-height: 1.5;
        font-size: 1.25rem;
        font-weight: 500;
      }

      .btn-close {
        box-sizing: content-box;
        width: 1em;
        height: 1em;
        padding: 0.25em 0.25em;
        color: #000;
        background: transparent
          url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath d='m.235.867 8.832 8.832m-8.832 0L8.067.867'/%3e%3c/svg%3e")
          center/1em auto no-repeat;
        border: 0;
        border-radius: 0.375rem;
        opacity: 0.5;
        cursor: pointer;
      }

      .btn-close:hover {
        opacity: 0.75;
      }

      .modal-body {
        position: relative;
        flex: 1 1 auto;
        padding: 1rem;
        max-height: 80%;
        overflow-y: auto;
      }

      /* ToS Content Styling */
      .modal-body h1 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
        color: #333;
      }

      .modal-body h2 {
        font-size: 1.25rem;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
        color: #444;
      }

      .modal-body p {
        margin-bottom: 1rem;
        line-height: 1.6;
        color: #555;
      }

      .modal-body ul {
        margin-bottom: 1rem;
        padding-left: 1.5rem;
      }

      .modal-body li {
        margin-bottom: 0.5rem;
        line-height: 1.6;
      }

      .modal-body .article {
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #eee;
      }

      .modal-body .highlight {
        background-color: #f8f9fa;
        padding: 1rem;
        border-left: 4px solid #007bff;
        margin: 1rem 0;
      }

      .modal-body .last-update {
        font-style: italic;
        color: #666;
        margin-bottom: 1.5rem;
      }

      /* Checkbox Styling */
      .checkbox-wrapper {
        display: flex;
        align-items: flex-start;
        cursor: pointer;
        margin: 16px 0;
        padding: 8px 0;
      }

      .checkbox-wrapper input[type="checkbox"] {
        margin-right: 12px;
        margin-top: 2px;
        width: 18px;
        height: 18px;
        cursor: pointer;
        accent-color: var(--primary-black, #000);
      }

      .checkbox-wrapper input[type="checkbox"]:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .checkbox-wrapper.disabled {
        opacity: 0.7;
        cursor: not-allowed;
      }

      .checkbox-label {
        font-size: 14px;
        line-height: 1.5;
        color: var(--primary-black, #000);
        flex: 1;
      }

      .checkbox-label a {
        color: #007bff;
        text-decoration: underline;
      }

      .checkbox-label a:hover {
        color: #0056b3;
      }

      /* Status Message */
      .status-message {
        background-color: #e3f2fd;
        border: 1px solid #bbdefb;
        border-radius: 4px;
        padding: 12px 16px;
        margin-bottom: 20px;
        color: #1565c0;
      }

      .status-message.hidden {
        display: none;
      }

      /* Button disabled state */
      button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      @media (min-width: 576px) {
        .modal-dialog {
          max-width: 500px;
          margin: 1.75rem auto;
        }
        .modal-xl {
          max-width: 1140px;
        }
      }
    </style>
    <script
      src="https://challenges.cloudflare.com/turnstile/v0/api.js?onload=onloadTurnstileCallback"
      async
      defer
    ></script>
  </head>
  <body>
    <div id="header-placeholder"></div>

    <div class="container">
      <div class="auth-container">
        <div class="auth-card">
          <h1 class="auth-title">Cr√©er un compte</h1>
          <div class="auth-subtitle">Acc√©dez aux synth√®ses de MWPLU</div>

          <!-- ToS Status Message -->
          <div id="tosStatusMessage" class="status-message">
            <p>
              üìã
              <strong
                >Veuillez lire et accepter les Conditions G√©n√©rales
                d'Utilisation pour cr√©er un compte.</strong
              >
            </p>
          </div>

          <form id="signupForm" class="auth-form">
            <div class="form-group">
              <label for="email" class="form-label">Email</label>
              <div class="input-wrapper">
                <input
                  type="email"
                  id="email"
                  class="form-input"
                  placeholder="exemple@mail.com"
                  required
                />
              </div>
            </div>

            <div class="form-group">
              <label for="password" class="form-label">Mot de passe</label>
              <div class="input-wrapper">
                <input
                  type="password"
                  id="password"
                  class="form-input"
                  placeholder="Cr√©ez un mot de passe"
                  required
                />
              </div>
              <div class="form-hint">
                Plus de 8 caract√®res, 1 majuscule, 1 minuscule, 1 chiffre.
              </div>
            </div>

            <div class="form-group">
              <label for="confirmPassword" class="form-label"
                >Confirmer le mot de passe</label
              >
              <div class="input-wrapper">
                <input
                  type="password"
                  id="confirmPassword"
                  class="form-input"
                  placeholder="Confirmez votre mot de passe"
                  required
                />
              </div>
            </div>

            <div class="form-group">
              <label for="phone" class="form-label">Num√©ro de t√©l√©phone</label>
              <div class="input-wrapper">
                <input
                  type="tel"
                  id="phone"
                  class="form-input"
                  placeholder="+33612345678"
                  required
                />
              </div>
            </div>

            <!-- Cloudflare Turnstile Placeholder -->
            <div class="form-group auth-captcha">
              <div id="turnstile-container"></div>
            </div>
            <!-- End Cloudflare Turnstile Placeholder -->

            <div class="form-group terms-section">
              <label class="checkbox-wrapper">
                <input type="checkbox" id="tosCheckbox" disabled />
                <span class="checkbox-label">
                  J'ai lu et j'accepte les
                  <a href="#" id="tosLink">
                    Conditions G√©n√©rales d'Utilisation
                  </a>
                </span>
              </label>
            </div>

            <button
              id="signupBtn"
              class="auth-button social-button"
              type="submit"
              disabled
            >
              <img
                src="../assets/icons/logo/WHITE-PLU.svg"
                alt="WHITE-PLU logo"
                class="social-icon"
              />
              Cr√©er un compte
              <span id="signupSpinner" class="spinner hidden"></span>
            </button>

            <button
              id="googleSignUpBtn"
              class="auth-button social-button margin-top-lg"
              type="button"
              disabled
            >
              <img
                src="../assets/icons/social/google.svg"
                alt="Google logo"
                class="social-icon"
              />
              S'inscrire avec Google
            </button>
          </form>

          <div id="statusMessage" class="status-message hidden"></div>
          <div id="errorMessage" class="error-message hidden"></div>
        </div>
      </div>
    </div>

    <!-- Custom Modal Structure for ToS -->
    <div
      class="modal"
      id="tosModal"
      tabindex="-1"
      aria-labelledby="tosModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-scrollable modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="tosModalLabel">
              Conditions d'Utilisation
            </h5>
            <button
              type="button"
              class="btn-close"
              id="tosModalClose"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body" id="tosModalBody">
            <p>Chargement des conditions d'utilisation...</p>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
