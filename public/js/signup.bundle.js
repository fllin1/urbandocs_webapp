(()=>{"use strict";var e,t,r,o,n,a={797:(e,t,r)=>{const o=(0,r(303).UU)("https://ofeyssipibktmbfebibo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9mZXlzc2lwaWJrdG1iZmViaWJvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM5MjUwOTQsImV4cCI6MjA1OTUwMTA5NH0.w71CAKfolktzRl-TmLVhHYaEbhCfVk4A7YraEUCglrU");function n(e,t="errorMessage"){const r=document.getElementById(t);r?(r.innerHTML=e,r.classList.remove("hidden")):console.error("Error element not found:",t)}function a(e,t="info",r="statusMessage"){const o=document.getElementById(r);o?(o.textContent=e,o.classList.forEach((e=>{e.startsWith("alert-")&&o.classList.remove(e)})),o.classList.add(`alert-${t}`),o.classList.remove("hidden")):console.error("Status element not found:",r)}function i(e,t){const r=document.getElementById(e),o=document.getElementById(t);r&&(r.disabled=!0),o&&o.classList.remove("hidden")}function s(e,t){const r=document.getElementById(e),o=document.getElementById(t);r&&(r.disabled=!1),o&&o.classList.add("hidden")}let l=null,c=null;window.hCaptchaLoadedCallback=function(){console.log("hCaptcha API ready (hCaptchaLoadedCallback executed).");const e=document.getElementById("hcaptcha-container");if(e&&window.hcaptcha&&!l){console.log("Rendering hCaptcha widget from hCaptchaLoadedCallback...");try{l=window.hcaptcha.render(e,{sitekey:"7bd46420-d130-46fe-b634-e93ed7784f96",callback:e=>{c=e,console.log("hCaptcha token obtained:",e)},"expired-callback":()=>{c=null,console.log("hCaptcha token expired.")},"error-callback":e=>{c=null,console.error("hCaptcha error callback:",e),n(`Erreur CAPTCHA: ${e}. Veuillez réessayer.`)}}),void 0===l?(console.error("hCaptcha.render did not return a widgetId. Sitekey or container issue?"),n("Erreur initialisation CAPTCHA (ID widget non retourné).")):console.log("hCaptcha widget rendered. ID:",l)}catch(e){console.error("Error rendering hCaptcha:",e),n("Impossible d'afficher le CAPTCHA.")}}else e?window.hcaptcha?l&&console.log("hCaptchaLoadedCallback: Widget already seems rendered."):console.error("hCaptchaLoadedCallback: window.hcaptcha API not found."):console.error("hCaptchaLoadedCallback: #hcaptcha-container not found.")},document.addEventListener("DOMContentLoaded",(()=>{(function(){console.log("initSignupPage called");const e=document.getElementById("signupForm"),t=document.getElementById("errorMessage"),r=document.getElementById("statusMessage"),d=document.getElementById("googleSignUpBtn");document.getElementById("hcaptcha-container")||console.error("#hcaptcha-container not found in the DOM. CAPTCHA cannot be rendered."),window.hcaptcha&&"function"==typeof window.hCaptchaLoadedCallback&&!l&&(console.log("initSignupPage: hCaptcha API seems available and callback defined, attempting render if not already done."),document.getElementById("hcaptcha-container")&&!l?console.log("initSignupPage: hCaptcha container present, widget not rendered. Expecting script's onload."):l&&console.log("initSignupPage: hCaptcha widget already rendered.")),e?e.addEventListener("submit",(async d=>{d.preventDefault(),t&&t.classList.add("hidden"),r&&r.classList.add("hidden");const u=document.getElementById("email").value.trim(),p=document.getElementById("password").value,g=document.getElementById("confirmPassword").value;let h=document.getElementById("phone").value.trim(),m=[];if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)||m.push("L'adresse email n'est pas valide."),p!==g&&m.push("Les mots de passe ne correspondent pas."),(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$/.test(p)||p.length<8)&&m.push("Le format du mot de passe est invalide."),h||m.push("Le numéro de téléphone est requis."),h&&!/^(0|\+33)[1-9]\d{8}$/.test(h)&&m.push("Le format du numéro de téléphone est invalide (ex: 0612345678 ou +33612345678)."),c||m.push("Veuillez compléter le CAPTCHA."),m.length>0)n(m.join("<br>"));else{i("signupBtn","signupSpinner");try{let t=h;h.startsWith("0")&&(t=`+33${h.substring(1)}`);const{data:r,error:n}=await o.auth.signUp({email:u,password:p,options:{captchaToken:c}});if(n)throw n;if(!r.user)throw new Error("Erreur lors de la création de l'utilisateur.");if(t&&r.user.id){const{error:e}=await o.from("profiles").update({phone:t}).eq("id",r.user.id);e?(console.warn("Erreur MAJ profil avec téléphone:",e),a(`Compte créé pour ${u}. Veuillez vérifier votre email. Erreur enregistrement téléphone.`,"warning")):a(`Compte créé avec succès pour ${u}. Veuillez vérifier votre email. Téléphone enregistré.`,"success")}else a(t?`Compte créé pour ${u}. Veuillez vérifier votre email.`:`Compte créé pour ${u}. Veuillez vérifier votre email. Pas de numéro de téléphone fourni.`,"success");e.reset()}catch(e){console.error("Email/Password Signup error:",e);let t=e.message||"Une erreur est survenue.";e.message&&e.message.includes("User already registered")?t="Cette adresse email est déjà utilisée. Veuillez vous connecter ou utiliser une autre adresse.":e.message&&e.message.includes("Unable to validate phone number")?t="Le numéro de téléphone fourni n'est pas valide.":e.message&&e.message.toLowerCase().includes("captcha protection")&&(t="Erreur CAPTCHA du serveur. Veuillez réessayer. ("+e.message+")"),n(t)}finally{s("signupBtn","signupSpinner"),window.hcaptcha&&null!==l&&window.hcaptcha.reset(l),c=null}}})):console.error("Signup form (signupForm) not found."),d?d.addEventListener("click",(async()=>{i("googleSignUpBtn","googleSignUpSpinner");try{const{error:e}=await o.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/profile.html`}});e&&(console.error("Error signing up with Google:",e),n(e.message||"Erreur lors de l'inscription avec Google."))}catch(e){console.error("Exception during Google sign-up:",e),n("Une exception est survenue lors de l'inscription avec Google.")}finally{s("googleSignUpBtn","googleSignUpSpinner")}})):console.warn("Google Sign-Up button (googleSignUpBtn) not found.")})(),console.log("Signup page initialized")}))}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return a[e].call(r.exports,r,r.exports,s),r.exports}s.m=a,e=[],s.O=(t,r,o,n)=>{if(!r){var a=1/0;for(d=0;d<e.length;d++){for(var[r,o,n]=e[d],i=!0,l=0;l<r.length;l++)(!1&n||a>=n)&&Object.keys(s.O).every((e=>s.O[e](r[l])))?r.splice(l--,1):(i=!1,n<a&&(a=n));if(i){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[r,o,n]},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var n=Object.create(null);s.r(n);var a={};t=t||[null,r({}),r([]),r(r)];for(var i=2&o&&e;"object"==typeof i&&!~t.indexOf(i);i=r(i))Object.getOwnPropertyNames(i).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,s.d(n,a),n},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,r)=>(s.f[r](e,t),t)),[])),s.u=e=>"js/"+e+".bundle.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},n="urbandocs_webapp:",s.l=(e,t,r,a)=>{if(o[e])o[e].push(t);else{var i,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==n+r){i=u;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.setAttribute("data-webpack",n+r),i.src=e),o[e]=[t];var p=(t,r)=>{i.onerror=i.onload=null,clearTimeout(g);var n=o[e];if(delete o[e],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((e=>e(r))),t)return t(r)},g=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),l&&document.head.appendChild(i)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e+"../"})(),(()=>{var e={787:0};s.f.j=(t,r)=>{var o=s.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise(((r,n)=>o=e[t]=[r,n]));r.push(o[2]=n);var a=s.p+s.u(t),i=new Error;s.l(a,(r=>{if(s.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",i.name="ChunkLoadError",i.type=n,i.request=a,o[1](i)}}),"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,r)=>{var o,n,[a,i,l]=r,c=0;if(a.some((t=>0!==e[t]))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(l)var d=l(s)}for(t&&t(r);c<a.length;c++)n=a[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},r=self.webpackChunkurbandocs_webapp=self.webpackChunkurbandocs_webapp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var l=s.O(void 0,[303],(()=>s(797)));l=s.O(l)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFvQlEsT0FBRXRELEVBQVcsQ0FBQyxNQUFNLElBQU84QyxFQUFvQixPQUM3RjhHLEVBQXNCOUcsRUFBb0JRLEVBQUVzRyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2NyZWF0ZSBmYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvbG9hZCBzY3JpcHQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC8uL3NyYy9qcy9zdXBhYmFzZS1jbGllbnQuanMiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC8uL3NyYy9qcy9hdXRoL2F1dGguanMiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC8uL3NyYy9qcy9hdXRoL3NpZ251cC5qcyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwLy4vc3JjL2pzL2VudHJpZXMvc2lnbnVwLmpzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvZW5zdXJlIGNodW5rIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2dldCBqYXZhc2NyaXB0IGNodW5rIGZpbGVuYW1lIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IChyZXN1bHQsIGNodW5rSWRzLCBmbiwgcHJpb3JpdHkpID0+IHtcblx0aWYoY2h1bmtJZHMpIHtcblx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0Zm9yKHZhciBpID0gZGVmZXJyZWQubGVuZ3RoOyBpID4gMCAmJiBkZWZlcnJlZFtpIC0gMV1bMl0gPiBwcmlvcml0eTsgaS0tKSBkZWZlcnJlZFtpXSA9IGRlZmVycmVkW2kgLSAxXTtcblx0XHRkZWZlcnJlZFtpXSA9IFtjaHVua0lkcywgZm4sIHByaW9yaXR5XTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIG5vdEZ1bGZpbGxlZCA9IEluZmluaXR5O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIFtjaHVua0lkcywgZm4sIHByaW9yaXR5XSA9IGRlZmVycmVkW2ldO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeSgoa2V5KSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXy5PW2tleV0oY2h1bmtJZHNbal0pKSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJ2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgPyAob2JqKSA9PiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikpIDogKG9iaikgPT4gKG9iai5fX3Byb3RvX18pO1xudmFyIGxlYWZQcm90b3R5cGVzO1xuLy8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4vLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbi8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuLy8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4vLyBtb2RlICYgMTY6IHJldHVybiB2YWx1ZSB3aGVuIGl0J3MgUHJvbWlzZS1saWtlXG4vLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuXHRpZihtb2RlICYgMSkgdmFsdWUgPSB0aGlzKHZhbHVlKTtcblx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcblx0aWYodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSkge1xuXHRcdGlmKChtb2RlICYgNCkgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuXHRcdGlmKChtb2RlICYgMTYpICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdmFsdWU7XG5cdH1cblx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcblx0dmFyIGRlZiA9IHt9O1xuXHRsZWFmUHJvdG90eXBlcyA9IGxlYWZQcm90b3R5cGVzIHx8IFtudWxsLCBnZXRQcm90byh7fSksIGdldFByb3RvKFtdKSwgZ2V0UHJvdG8oZ2V0UHJvdG8pXTtcblx0Zm9yKHZhciBjdXJyZW50ID0gbW9kZSAmIDIgJiYgdmFsdWU7IHR5cGVvZiBjdXJyZW50ID09ICdvYmplY3QnICYmICF+bGVhZlByb3RvdHlwZXMuaW5kZXhPZihjdXJyZW50KTsgY3VycmVudCA9IGdldFByb3RvKGN1cnJlbnQpKSB7XG5cdFx0T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY3VycmVudCkuZm9yRWFjaCgoa2V5KSA9PiAoZGVmW2tleV0gPSAoKSA9PiAodmFsdWVba2V5XSkpKTtcblx0fVxuXHRkZWZbJ2RlZmF1bHQnXSA9ICgpID0+ICh2YWx1ZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChucywgZGVmKTtcblx0cmV0dXJuIG5zO1xufTsiLCJ2YXIgaW5Qcm9ncmVzcyA9IHt9O1xudmFyIGRhdGFXZWJwYWNrUHJlZml4ID0gXCJ1cmJhbmRvY3Nfd2ViYXBwOlwiO1xuLy8gbG9hZFNjcmlwdCBmdW5jdGlvbiB0byBsb2FkIGEgc2NyaXB0IHZpYSBzY3JpcHQgdGFnXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmwgPSAodXJsLCBkb25lLCBrZXksIGNodW5rSWQpID0+IHtcblx0aWYoaW5Qcm9ncmVzc1t1cmxdKSB7IGluUHJvZ3Jlc3NbdXJsXS5wdXNoKGRvbmUpOyByZXR1cm47IH1cblx0dmFyIHNjcmlwdCwgbmVlZEF0dGFjaDtcblx0aWYoa2V5ICE9PSB1bmRlZmluZWQpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzY3JpcHRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgcyA9IHNjcmlwdHNbaV07XG5cdFx0XHRpZihzLmdldEF0dHJpYnV0ZShcInNyY1wiKSA9PSB1cmwgfHwgcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXdlYnBhY2tcIikgPT0gZGF0YVdlYnBhY2tQcmVmaXggKyBrZXkpIHsgc2NyaXB0ID0gczsgYnJlYWs7IH1cblx0XHR9XG5cdH1cblx0aWYoIXNjcmlwdCkge1xuXHRcdG5lZWRBdHRhY2ggPSB0cnVlO1xuXHRcdHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG5cdFx0c2NyaXB0LmNoYXJzZXQgPSAndXRmLTgnO1xuXHRcdHNjcmlwdC50aW1lb3V0ID0gMTIwO1xuXHRcdGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKSB7XG5cdFx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgX193ZWJwYWNrX3JlcXVpcmVfXy5uYyk7XG5cdFx0fVxuXHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXdlYnBhY2tcIiwgZGF0YVdlYnBhY2tQcmVmaXggKyBrZXkpO1xuXG5cdFx0c2NyaXB0LnNyYyA9IHVybDtcblx0fVxuXHRpblByb2dyZXNzW3VybF0gPSBbZG9uZV07XG5cdHZhciBvblNjcmlwdENvbXBsZXRlID0gKHByZXYsIGV2ZW50KSA9PiB7XG5cdFx0Ly8gYXZvaWQgbWVtIGxlYWtzIGluIElFLlxuXHRcdHNjcmlwdC5vbmVycm9yID0gc2NyaXB0Lm9ubG9hZCA9IG51bGw7XG5cdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHRcdHZhciBkb25lRm5zID0gaW5Qcm9ncmVzc1t1cmxdO1xuXHRcdGRlbGV0ZSBpblByb2dyZXNzW3VybF07XG5cdFx0c2NyaXB0LnBhcmVudE5vZGUgJiYgc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcblx0XHRkb25lRm5zICYmIGRvbmVGbnMuZm9yRWFjaCgoZm4pID0+IChmbihldmVudCkpKTtcblx0XHRpZihwcmV2KSByZXR1cm4gcHJldihldmVudCk7XG5cdH1cblx0dmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCB1bmRlZmluZWQsIHsgdHlwZTogJ3RpbWVvdXQnLCB0YXJnZXQ6IHNjcmlwdCB9KSwgMTIwMDAwKTtcblx0c2NyaXB0Lm9uZXJyb3IgPSBvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgc2NyaXB0Lm9uZXJyb3IpO1xuXHRzY3JpcHQub25sb2FkID0gb25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHNjcmlwdC5vbmxvYWQpO1xuXHRuZWVkQXR0YWNoICYmIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbn07IiwiLy8gc3JjL2pzL3N1cGFiYXNlLWNsaWVudC5qc1xuLyoqXG4gKiBTdXBhYmFzZSBDbGllbnRcbiAqIEBtb2R1bGUgc3VwYWJhc2UtY2xpZW50XG4gKiBAZGVzY3JpcHRpb24gVGhpcyBtb2R1bGUgaGFuZGxlcyB0aGUgU3VwYWJhc2UgY2xpZW50IGluaXRpYWxpemF0aW9uIGFuZCBjb25maWd1cmF0aW9uLlxuICogQHZlcnNpb24gMC4wLjFcbiAqIEBhdXRob3IgR3JleVBhbmRhXG4gKlxuICogQGNoYW5nZWxvZ1xuICogLSAwLjAuMSAoMjAyNS0wNS0wOSk6IEluaXRpYWwgdmVyc2lvbiB3aXRoIGJhc2ljIFN1cGFiYXNlIGNsaWVudCBpbml0aWFsaXphdGlvbi5cbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCI7XG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gXCJodHRwczovL29mZXlzc2lwaWJrdG1iZmViaWJvLnN1cGFiYXNlLmNvXCI7XG5jb25zdCBzdXBhYmFzZUFub25LZXkgPVxuICBcImV5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUpwYzNNaU9pSnpkWEJoWW1GelpTSXNJbkpsWmlJNkltOW1aWGx6YzJsd2FXSnJkRzFpWm1WaWFXSnZJaXdpY205c1pTSTZJbUZ1YjI0aUxDSnBZWFFpT2pFM05ETTVNalV3T1RRc0ltVjRjQ0k2TWpBMU9UVXdNVEE1TkgwLnc3MUNBS2ZvbGt0elJsLVRtTFZoSFlhRWJoQ2ZWazRBN1lyYUVVQ2dsclVcIjtcblxuY29uc3QgY2xpZW50ID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXkpO1xuXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjbGllbnQ7XG4iLCIvLyBzcmMvYXV0aC9hdXRoLmpzXG4vKipcbiAqIEF1dGhlbnRpY2F0aW9uIE1vZHVsZSAtIEJhc2VcbiAqIEBtb2R1bGUgYXV0aFxuICogQGRlc2NyaXB0aW9uIEJhc2UgbW9kdWxlIGZvciBhdXRoZW50aWNhdGlvbiB3aXRoIGNvbW1vbiBmdW5jdGlvbnMgYW5kIGNvbmZpZ3VyYXRpb25cbiAqIEB2ZXJzaW9uIDAuMC41XG4gKlxuICogQGNoYW5nZWxvZ1xuICogLSAwLjAuNSAoMjAyNS0wNS0xNSk6IEFkZGVkIHNlc3Npb24gdmFsaWRhdGlvbiBhbmQgcHJvdGVjdGlvbiBhZ2FpbnN0IHN0YWxlIHNlc3Npb25zLlxuICogLSAwLjAuNCAoMjAyNS0wNS0xNSk6IFJlbW92YWwgb2YgRmlyZWJhc2UgQ2xvdWQgRnVuY3Rpb25zIGNvbnN0YW50cy5cbiAqIC0gMC4wLjMgKDIwMjUtMDUtMTMpOiBNb2RpZmllZCB0aGUgYXV0aGVudGljYXRpb24gc3RhdGUgbWFuYWdlbWVudCB0byB1c2UgU3VwYWJhc2UgQXV0aCBzeXN0ZW0uXG4gKiAtIDAuMC4yICgyMDI1LTA1LTEzKTogUmVvcmdhbml6YXRpb24gaW50byBzZXBhcmF0ZSBtb2R1bGVzXG4gKiAtIDAuMC4xICgyMDI1LTA1LTAzKTogSW5pdGlhbCBjcmVhdGlvblxuICovXG5cbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSBcIi4uL3N1cGFiYXNlLWNsaWVudC5qc1wiO1xuXG4vLyBHbG9iYWwgYXV0aGVudGljYXRpb24gc3RhdGVcbmxldCBjdXJyZW50VXNlciA9IG51bGw7XG5sZXQgc2Vzc2lvblZhbGlkYXRlZCA9IGZhbHNlO1xuXG4vKipcbiAqIFNldHMgdGhlIGN1cnJlbnQgdXNlclxuICogQHBhcmFtIHtPYmplY3R9IHVzZXIgLSBVc2VyIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnRVc2VyKHVzZXIpIHtcbiAgY3VycmVudFVzZXIgPSB1c2VyO1xuICAvLyBQb3NzaWJsZSBzdG9yYWdlIGluIGxvY2FsU3RvcmFnZS9zZXNzaW9uU3RvcmFnZVxuICBpZiAodXNlcikge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudFVzZXJcIiwgSlNPTi5zdHJpbmdpZnkodXNlcikpO1xuICB9IGVsc2Uge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiY3VycmVudFVzZXJcIik7XG4gIH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgaWYgdGhlIGN1cnJlbnQgc2Vzc2lvbiBpcyBhY3RpdmUgd2l0aCBTdXBhYmFzZVxuICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IFRydWUgaWYgc2Vzc2lvbiBpcyB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVNlc3Npb24oKSB7XG4gIHRyeSB7XG4gICAgLy8gR2V0IGN1cnJlbnQgc2Vzc2lvbiBmcm9tIFN1cGFiYXNlXG4gICAgY29uc3Qge1xuICAgICAgZGF0YTogeyBzZXNzaW9uIH0sXG4gICAgICBlcnJvcjogc2Vzc2lvbkVycm9yLFxuICAgIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcblxuICAgIC8vIE5vIHNlc3Npb24gb3IgZXJyb3IgcmV0cmlldmluZyBzZXNzaW9uXG4gICAgaWYgKHNlc3Npb25FcnJvciB8fCAhc2Vzc2lvbikge1xuICAgICAgY29uc29sZS5sb2coXCJObyB2YWxpZCBzZXNzaW9uIGZvdW5kXCIpO1xuICAgICAgc2V0Q3VycmVudFVzZXIobnVsbCk7XG4gICAgICBzZXNzaW9uVmFsaWRhdGVkID0gZmFsc2U7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIHJlZnJlc2ggdGhlIHRva2VuIHRvIHZhbGlkYXRlIGl0IHdpdGggdGhlIHNlcnZlclxuICAgIGNvbnN0IHsgZXJyb3I6IHJlZnJlc2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5yZWZyZXNoU2Vzc2lvbigpO1xuXG4gICAgaWYgKHJlZnJlc2hFcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFwiU2Vzc2lvbiB2YWxpZGF0aW9uIGZhaWxlZDpcIiwgcmVmcmVzaEVycm9yKTtcbiAgICAgIC8vIEZvcmNlIGNsZWFyIHRoZSBpbnZhbGlkIHNlc3Npb25cbiAgICAgIGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbk91dCgpO1xuICAgICAgc2V0Q3VycmVudFVzZXIobnVsbCk7XG4gICAgICBzZXNzaW9uVmFsaWRhdGVkID0gZmFsc2U7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gU2Vzc2lvbiBpcyB2YWxpZCwgdXBkYXRlIHRoZSBjdXJyZW50IHVzZXJcbiAgICBzZXRDdXJyZW50VXNlcihzZXNzaW9uLnVzZXIpO1xuICAgIHNlc3Npb25WYWxpZGF0ZWQgPSB0cnVlO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlNlc3Npb24gdmFsaWRhdGlvbiBlcnJvcjpcIiwgZSk7XG4gICAgc2V0Q3VycmVudFVzZXIobnVsbCk7XG4gICAgc2Vzc2lvblZhbGlkYXRlZCA9IGZhbHNlO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgY3VycmVudCB1c2VyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHZhbGlkYXRlIC0gV2hldGhlciB0byB2YWxpZGF0ZSB0aGUgc2Vzc2lvbiB3aXRoIFN1cGFiYXNlXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3R8bnVsbD59IFRoZSBjdXJyZW50IHVzZXIgb3IgbnVsbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIodmFsaWRhdGUgPSB0cnVlKSB7XG4gIC8vIElmIHdlIG5lZWQgdG8gdmFsaWRhdGUgYW5kIGhhdmVuJ3QgZG9uZSBzbyB5ZXRcbiAgaWYgKHZhbGlkYXRlICYmICFzZXNzaW9uVmFsaWRhdGVkKSB7XG4gICAgYXdhaXQgdmFsaWRhdGVTZXNzaW9uKCk7XG4gIH1cblxuICAvLyBJZiBubyB2YWxpZGF0aW9uIG5lZWRlZCBvciBhbHJlYWR5IHZhbGlkYXRlZFxuICBpZiAoIXZhbGlkYXRlICYmICFjdXJyZW50VXNlcikge1xuICAgIC8vIFRyeSB0byByZXRyaWV2ZSBmcm9tIHN0b3JhZ2UgaWYgbm90IGluIG1lbW9yeVxuICAgIGNvbnN0IHN0b3JlZFVzZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRVc2VyXCIpO1xuICAgIGlmIChzdG9yZWRVc2VyKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjdXJyZW50VXNlciA9IEpTT04ucGFyc2Uoc3RvcmVkVXNlcik7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZXRyaWV2aW5nIHVzZXI6XCIsIGUpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImN1cnJlbnRVc2VyXCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjdXJyZW50VXNlcjtcbn1cblxuLyoqXG4gKiBTeW5jaHJvbm91cyB2ZXJzaW9uIG9mIGdldEN1cnJlbnRVc2VyIGZvciBub24tYXN5bmMgY29udGV4dHNcbiAqIFdBUk5JTkc6IFRoaXMgbWF5IHJldHVybiBzdGFsZSBkYXRhIGlmIHNlc3Npb24gaXMgaW52YWxpZFxuICogQHJldHVybnMge09iamVjdHxudWxsfSBUaGUgY3VycmVudCB1c2VyIG9yIG51bGxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyU3luYygpIHtcbiAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgIGNvbnN0IHN0b3JlZFVzZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRVc2VyXCIpO1xuICAgIGlmIChzdG9yZWRVc2VyKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjdXJyZW50VXNlciA9IEpTT04ucGFyc2Uoc3RvcmVkVXNlcik7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZXRyaWV2aW5nIHVzZXI6XCIsIGUpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImN1cnJlbnRVc2VyXCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjdXJyZW50VXNlcjtcbn1cblxuLyoqXG4gKiBMb2dzIG91dCB0aGUgdXNlclxuICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gIHRyeSB7XG4gICAgLy8gU2lnbiBvdXQgZnJvbSBTdXBhYmFzZVxuICAgIGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbk91dCgpO1xuXG4gICAgLy8gQ2xlYXIgbG9jYWwgc3RhdGVcbiAgICBjdXJyZW50VXNlciA9IG51bGw7XG4gICAgc2Vzc2lvblZhbGlkYXRlZCA9IGZhbHNlO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiY3VycmVudFVzZXJcIik7XG5cbiAgICAvLyBSZWRpcmVjdCB0byB0aGUgaG9tZSBwYWdlIGFmdGVyIGxvZ291dFxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvXCI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGR1cmluZyBsb2dvdXQ6XCIsIGVycm9yKTtcbiAgICAvLyBTdGlsbCBjbGVhciBsb2NhbCBzdGF0ZSBldmVuIGlmIFN1cGFiYXNlIHNpZ25PdXQgZmFpbHNcbiAgICBjdXJyZW50VXNlciA9IG51bGw7XG4gICAgc2Vzc2lvblZhbGlkYXRlZCA9IGZhbHNlO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiY3VycmVudFVzZXJcIik7XG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9cIjtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgdXNlciBpcyBsb2dnZWQgaW4gd2l0aCB2YWxpZCBzZXNzaW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHZhbGlkYXRlIC0gV2hldGhlciB0byB2YWxpZGF0ZSB3aXRoIFN1cGFiYXNlIGZpcnN0XG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gVHJ1ZSBpZiB0aGUgdXNlciBpcyBsb2dnZWQgaW4gd2l0aCB2YWxpZCBzZXNzaW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc0xvZ2dlZEluKHZhbGlkYXRlID0gdHJ1ZSkge1xuICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIodmFsaWRhdGUpO1xuICByZXR1cm4gdXNlciAhPT0gbnVsbDtcbn1cblxuLyoqXG4gKiBTeW5jaHJvbm91cyB2ZXJzaW9uIG9mIGlzTG9nZ2VkSW5cbiAqIFdBUk5JTkc6IFRoaXMgbWF5IHJldHVybiBpbmNvcnJlY3QgcmVzdWx0cyBpZiBzZXNzaW9uIGlzIGludmFsaWRcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHVzZXIgYXBwZWFycyB0byBiZSBsb2dnZWQgaW4gbG9jYWxseVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNMb2dnZWRJblN5bmMoKSB7XG4gIHJldHVybiBnZXRDdXJyZW50VXNlclN5bmMoKSAhPT0gbnVsbDtcbn1cblxuLyoqXG4gKiBQcm90ZWN0cyBhIHBhZ2UgdGhhdCByZXF1aXJlcyBhdXRoZW50aWNhdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IHJlZGlyZWN0VXJsIC0gVVJMIHRvIHJlZGlyZWN0IGlmIG5vdCBhdXRoZW50aWNhdGVkXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gVHJ1ZSBpZiBhdXRoZW50aWNhdGVkLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb3RlY3RQYWdlKHJlZGlyZWN0VXJsID0gXCIvbG9naW5cIikge1xuICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgdmFsaWRhdGVTZXNzaW9uKCk7XG5cbiAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgLy8gUmVkaXJlY3QgdG8gbG9naW4gcGFnZVxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcmVkaXJlY3RVcmw7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYXV0aCBvbiBwYWdlIGxvYWRcbiAqIENhbGwgdGhpcyBhdCB0aGUgYmVnaW5uaW5nIG9mIHlvdXIgYXBwIGluaXRpYWxpemF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0QXV0aCgpIHtcbiAgLy8gVmFsaWRhdGUgc2Vzc2lvbiBvbiBwYWdlIGxvYWRcbiAgYXdhaXQgdmFsaWRhdGVTZXNzaW9uKCk7XG5cbiAgLy8gU2V0IHVwIGF1dGggc3RhdGUgY2hhbmdlIGxpc3RlbmVyXG4gIHN1cGFiYXNlLmF1dGgub25BdXRoU3RhdGVDaGFuZ2UoYXN5bmMgKGV2ZW50LCBzZXNzaW9uKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJBdXRoIHN0YXRlIGNoYW5nZWQ6XCIsIGV2ZW50KTtcblxuICAgIGlmIChldmVudCA9PT0gXCJTSUdORURfSU5cIiAmJiBzZXNzaW9uKSB7XG4gICAgICBzZXRDdXJyZW50VXNlcihzZXNzaW9uLnVzZXIpO1xuICAgICAgc2Vzc2lvblZhbGlkYXRlZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChldmVudCA9PT0gXCJTSUdORURfT1VUXCIpIHtcbiAgICAgIHNldEN1cnJlbnRVc2VyKG51bGwpO1xuICAgICAgc2Vzc2lvblZhbGlkYXRlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQgPT09IFwiVE9LRU5fUkVGUkVTSEVEXCIpIHtcbiAgICAgIHNldEN1cnJlbnRVc2VyKHNlc3Npb24udXNlcik7XG4gICAgICBzZXNzaW9uVmFsaWRhdGVkID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50ID09PSBcIlVTRVJfVVBEQVRFRFwiKSB7XG4gICAgICBzZXRDdXJyZW50VXNlcihzZXNzaW9uLnVzZXIpO1xuICAgICAgc2Vzc2lvblZhbGlkYXRlZCA9IHRydWU7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBEaXNwbGF5cyBhbiBlcnJvciBtZXNzYWdlXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIEVycm9yIG1lc3NhZ2UgdG8gZGlzcGxheVxuICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnRJZCAtIElEIG9mIHRoZSBlbGVtZW50IHdoZXJlIHRvIGRpc3BsYXkgdGhlIGVycm9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG93RXJyb3IobWVzc2FnZSwgZWxlbWVudElkID0gXCJlcnJvck1lc3NhZ2VcIikge1xuICBjb25zdCBlcnJvckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuICBpZiAoZXJyb3JFbGVtZW50KSB7XG4gICAgZXJyb3JFbGVtZW50LmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVsZW1lbnQgbm90IGZvdW5kOlwiLCBlbGVtZW50SWQpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGxheXMgYSBzdGF0dXMgbWVzc2FnZVxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBNZXNzYWdlIHRvIGRpc3BsYXlcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gTWVzc2FnZSB0eXBlIChzdWNjZXNzLCBpbmZvLCB3YXJuaW5nLCBkYW5nZXIpXG4gKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudElkIC0gSUQgb2YgdGhlIGVsZW1lbnQgd2hlcmUgdG8gZGlzcGxheSB0aGUgbWVzc2FnZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hvd1N0YXR1cyhcbiAgbWVzc2FnZSxcbiAgdHlwZSA9IFwiaW5mb1wiLFxuICBlbGVtZW50SWQgPSBcInN0YXR1c01lc3NhZ2VcIlxuKSB7XG4gIGNvbnN0IHN0YXR1c0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuICBpZiAoc3RhdHVzRWxlbWVudCkge1xuICAgIHN0YXR1c0VsZW1lbnQudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuXG4gICAgLy8gUmVtb3ZlIGFsbCBhbGVydC0qIGNsYXNzZXNcbiAgICBzdGF0dXNFbGVtZW50LmNsYXNzTGlzdC5mb3JFYWNoKChjbGFzc05hbWUpID0+IHtcbiAgICAgIGlmIChjbGFzc05hbWUuc3RhcnRzV2l0aChcImFsZXJ0LVwiKSkge1xuICAgICAgICBzdGF0dXNFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEFkZCB0aGUgY2xhc3MgY29ycmVzcG9uZGluZyB0byB0aGUgdHlwZVxuICAgIHN0YXR1c0VsZW1lbnQuY2xhc3NMaXN0LmFkZChgYWxlcnQtJHt0eXBlfWApO1xuICAgIHN0YXR1c0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmVycm9yKFwiU3RhdHVzIGVsZW1lbnQgbm90IGZvdW5kOlwiLCBlbGVtZW50SWQpO1xuICB9XG59XG5cbi8qKlxuICogSGlkZXMgYW4gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnRJZCAtIElEIG9mIHRoZSBlbGVtZW50IHRvIGhpZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhpZGVFbGVtZW50KGVsZW1lbnRJZCkge1xuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcbiAgaWYgKGVsZW1lbnQpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gIH1cbn1cblxuLyoqXG4gKiBTaG93cyBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudElkIC0gSUQgb2YgdGhlIGVsZW1lbnQgdG8gc2hvd1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2hvd0VsZW1lbnQoZWxlbWVudElkKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuICBpZiAoZWxlbWVudCkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcbiAgfVxufVxuXG4vKipcbiAqIFNob3dzIHRoZSBsb2FkaW5nIGluZGljYXRvclxuICogQHBhcmFtIHtzdHJpbmd9IGJ1dHRvbklkIC0gSUQgb2YgdGhlIGJ1dHRvblxuICogQHBhcmFtIHtzdHJpbmd9IHNwaW5uZXJJZCAtIElEIG9mIHRoZSBzcGlubmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG93TG9hZGluZyhidXR0b25JZCwgc3Bpbm5lcklkKSB7XG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbklkKTtcbiAgY29uc3Qgc3Bpbm5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNwaW5uZXJJZCk7XG5cbiAgaWYgKGJ1dHRvbikgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgaWYgKHNwaW5uZXIpIHNwaW5uZXIuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcbn1cblxuLyoqXG4gKiBIaWRlcyB0aGUgbG9hZGluZyBpbmRpY2F0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBidXR0b25JZCAtIElEIG9mIHRoZSBidXR0b25cbiAqIEBwYXJhbSB7c3RyaW5nfSBzcGlubmVySWQgLSBJRCBvZiB0aGUgc3Bpbm5lclxuICovXG5leHBvcnQgZnVuY3Rpb24gaGlkZUxvYWRpbmcoYnV0dG9uSWQsIHNwaW5uZXJJZCkge1xuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25JZCk7XG4gIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzcGlubmVySWQpO1xuXG4gIGlmIChidXR0b24pIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICBpZiAoc3Bpbm5lcikgc3Bpbm5lci5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xufVxuXG4vLyBFeHBvcnQgdGhlIG5lY2Vzc2FyeSBmdW5jdGlvbnMgYW5kIHZhcmlhYmxlc1xuZXhwb3J0IGRlZmF1bHQge1xuICBnZXRDdXJyZW50VXNlcixcbiAgZ2V0Q3VycmVudFVzZXJTeW5jLFxuICBzZXRDdXJyZW50VXNlcixcbiAgbG9nb3V0LFxuICBpc0xvZ2dlZEluLFxuICBpc0xvZ2dlZEluU3luYyxcbiAgdmFsaWRhdGVTZXNzaW9uLFxuICBwcm90ZWN0UGFnZSxcbiAgaW5pdEF1dGgsXG4gIHNob3dFcnJvcixcbiAgc2hvd1N0YXR1cyxcbiAgaGlkZUVsZW1lbnQsXG4gIHNob3dFbGVtZW50LFxuICBzaG93TG9hZGluZyxcbiAgaGlkZUxvYWRpbmcsXG59O1xuIiwiLy8gc3JjL2F1dGgvc2lnbnVwLmpzXG4vKipcbiAqIFNpZ251cCBNb2R1bGVcbiAqIEBtb2R1bGUgc2lnbnVwXG4gKiBAZGVzY3JpcHRpb24gSGFuZGxlcyB1c2VyIHJlZ2lzdHJhdGlvbiB3aXRoIGNsaWVudC1zaWRlIHZhbGlkYXRpb24sIEdvb2dsZSBPQXV0aCwgYW5kIHBob25lIHZlcmlmaWNhdGlvbiB1c2luZyBTdXBhYmFzZS5cbiAqIEB2ZXJzaW9uIDAuMi4wXG4gKlxuICogQGNoYW5nZWxvZ1xuICogLSAwLjIuMCAoMjAyNC0wNS0xNik6IEFkZGVkIHBob25lIG51bWJlciBpbnB1dCwgT1RQIHNlbmRpbmcgYW5kIHZlcmlmaWNhdGlvbiBmb3IgZW1haWwvcGFzc3dvcmQgc2lnbnVwLlxuICogLSAwLjEuMSAoMjAyNC0wNS0xNik6IEFkZGVkIEdvb2dsZSBTaWduLVVwIGZ1bmN0aW9uYWxpdHkuXG4gKiAtIDAuMS4wICgyMDI1LTA1LTE1KTogTWlncmF0ZWQgdG8gU3VwYWJhc2UgY2xpZW50LXNpZGUgYXV0aCAodmVyc2lvbmluZyBhZGp1c3RlZClcbiAqL1xuXG5pbXBvcnQgeyBzaG93RXJyb3IsIHNob3dTdGF0dXMsIHNob3dMb2FkaW5nLCBoaWRlTG9hZGluZyB9IGZyb20gXCIuL2F1dGguanNcIjtcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSBcIi4uL3N1cGFiYXNlLWNsaWVudC5qc1wiO1xuXG4vLyBTdG9yZSBwaG9uZSBudW1iZXIgdGVtcG9yYXJpbHkgYmV0d2VlbiBzdGVwc1xuLy8gbGV0IHRlbXBQaG9uZU51bWJlckZvclZlcmlmaWNhdGlvbiA9IG51bGw7IC8vIFJlbW92ZWRcbi8vIGxldCB0ZW1wVXNlckRhdGFGb3JQcm9maWxlVXBkYXRlID0gbnVsbDsgLy8gUmVtb3ZlZFxubGV0IGhjYXB0Y2hhV2lkZ2V0SWQgPSBudWxsOyAvLyBUbyBzdG9yZSBoQ2FwdGNoYSB3aWRnZXQgSUQgZm9yIHNpZ251cFxubGV0IGNhcHRjaGFUb2tlbiA9IG51bGw7IC8vIFRvIHN0b3JlIHRoZSBjYXB0Y2hhIHRva2VuXG5cbi8vIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYnkgdGhlIGhDYXB0Y2hhIHNjcmlwdCBvbmNlIGl0J3MgbG9hZGVkXG4vLyAoZHVlIHRvICZvbmxvYWQ9aENhcHRjaGFMb2FkZWRDYWxsYmFjayBpbiB0aGUgc2NyaXB0IHRhZyBpbiBzaWdudXAuaHRtbClcbndpbmRvdy5oQ2FwdGNoYUxvYWRlZENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICBjb25zb2xlLmxvZyhcImhDYXB0Y2hhIEFQSSByZWFkeSAoaENhcHRjaGFMb2FkZWRDYWxsYmFjayBleGVjdXRlZCkuXCIpO1xuICBjb25zdCBoY2FwdGNoYUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGNhcHRjaGEtY29udGFpbmVyXCIpO1xuXG4gIGlmIChoY2FwdGNoYUNvbnRhaW5lciAmJiB3aW5kb3cuaGNhcHRjaGEgJiYgIWhjYXB0Y2hhV2lkZ2V0SWQpIHtcbiAgICBjb25zb2xlLmxvZyhcIlJlbmRlcmluZyBoQ2FwdGNoYSB3aWRnZXQgZnJvbSBoQ2FwdGNoYUxvYWRlZENhbGxiYWNrLi4uXCIpO1xuICAgIHRyeSB7XG4gICAgICBoY2FwdGNoYVdpZGdldElkID0gd2luZG93LmhjYXB0Y2hhLnJlbmRlcihoY2FwdGNoYUNvbnRhaW5lciwge1xuICAgICAgICBzaXRla2V5OiBcIjdiZDQ2NDIwLWQxMzAtNDZmZS1iNjM0LWU5M2VkNzc4NGY5NlwiLCAvLyBZb3VyIHNpdGUga2V5XG4gICAgICAgIGNhbGxiYWNrOiAodG9rZW4pID0+IHtcbiAgICAgICAgICBjYXB0Y2hhVG9rZW4gPSB0b2tlbjtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImhDYXB0Y2hhIHRva2VuIG9idGFpbmVkOlwiLCB0b2tlbik7XG4gICAgICAgIH0sXG4gICAgICAgIFwiZXhwaXJlZC1jYWxsYmFja1wiOiAoKSA9PiB7XG4gICAgICAgICAgY2FwdGNoYVRva2VuID0gbnVsbDtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImhDYXB0Y2hhIHRva2VuIGV4cGlyZWQuXCIpO1xuICAgICAgICAgIC8vIFJlc2V0dGluZyBoZXJlIG1pZ2h0IGJlIGFnZ3Jlc3NpdmUgaWYgdGhlIHVzZXIgaXMganVzdCBzbG93LlxuICAgICAgICAgIC8vIENvbnNpZGVyIGlmIHVzZXIgc2hvdWxkIG1hbnVhbGx5IHJlLXZlcmlmeSBvciBpZiBhIGJ1dHRvbiB0byByZXNldCBhcHBlYXJzLlxuICAgICAgICB9LFxuICAgICAgICBcImVycm9yLWNhbGxiYWNrXCI6IChlcnIpID0+IHtcbiAgICAgICAgICBjYXB0Y2hhVG9rZW4gPSBudWxsO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJoQ2FwdGNoYSBlcnJvciBjYWxsYmFjazpcIiwgZXJyKTtcbiAgICAgICAgICBzaG93RXJyb3IoYEVycmV1ciBDQVBUQ0hBOiAke2Vycn0uIFZldWlsbGV6IHLDqWVzc2F5ZXIuYCk7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGlmIChoY2FwdGNoYVdpZGdldElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcImhDYXB0Y2hhLnJlbmRlciBkaWQgbm90IHJldHVybiBhIHdpZGdldElkLiBTaXRla2V5IG9yIGNvbnRhaW5lciBpc3N1ZT9cIlxuICAgICAgICApO1xuICAgICAgICBzaG93RXJyb3IoXCJFcnJldXIgaW5pdGlhbGlzYXRpb24gQ0FQVENIQSAoSUQgd2lkZ2V0IG5vbiByZXRvdXJuw6kpLlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiaENhcHRjaGEgd2lkZ2V0IHJlbmRlcmVkLiBJRDpcIiwgaGNhcHRjaGFXaWRnZXRJZCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHJlbmRlcmluZyBoQ2FwdGNoYTpcIiwgZSk7XG4gICAgICBzaG93RXJyb3IoXCJJbXBvc3NpYmxlIGQnYWZmaWNoZXIgbGUgQ0FQVENIQS5cIik7XG4gICAgfVxuICB9IGVsc2UgaWYgKCFoY2FwdGNoYUNvbnRhaW5lcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJoQ2FwdGNoYUxvYWRlZENhbGxiYWNrOiAjaGNhcHRjaGEtY29udGFpbmVyIG5vdCBmb3VuZC5cIik7XG4gIH0gZWxzZSBpZiAoIXdpbmRvdy5oY2FwdGNoYSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJoQ2FwdGNoYUxvYWRlZENhbGxiYWNrOiB3aW5kb3cuaGNhcHRjaGEgQVBJIG5vdCBmb3VuZC5cIik7XG4gIH0gZWxzZSBpZiAoaGNhcHRjaGFXaWRnZXRJZCkge1xuICAgIGNvbnNvbGUubG9nKFwiaENhcHRjaGFMb2FkZWRDYWxsYmFjazogV2lkZ2V0IGFscmVhZHkgc2VlbXMgcmVuZGVyZWQuXCIpO1xuICB9XG59O1xuXG4vKipcbiAqIEluaXRpYWxpemVzIHRoZSBzaWdudXAgcGFnZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5pdFNpZ251cFBhZ2UoKSB7XG4gIGNvbnNvbGUubG9nKFwiaW5pdFNpZ251cFBhZ2UgY2FsbGVkXCIpO1xuICBjb25zdCBzaWdudXBGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWdudXBGb3JtXCIpO1xuICAvLyBjb25zdCBvdHBGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdHBGb3JtXCIpOyAvLyBPVFAgRm9ybSAtIFJlbW92ZWRcbiAgY29uc3QgZXJyb3JNZXNzYWdlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlcnJvck1lc3NhZ2VcIik7XG4gIGNvbnN0IHN0YXR1c01lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXR1c01lc3NhZ2VcIik7XG4gIGNvbnN0IGdvb2dsZVNpZ25VcEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ29vZ2xlU2lnblVwQnRuXCIpO1xuICBjb25zdCBoY2FwdGNoYUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGNhcHRjaGEtY29udGFpbmVyXCIpO1xuXG4gIGlmICghaGNhcHRjaGFDb250YWluZXIpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCIjaGNhcHRjaGEtY29udGFpbmVyIG5vdCBmb3VuZCBpbiB0aGUgRE9NLiBDQVBUQ0hBIGNhbm5vdCBiZSByZW5kZXJlZC5cIlxuICAgICk7XG4gIH1cblxuICAvLyBBdHRlbXB0IHRvIHJlbmRlciBpZiBBUEkgaXMgYWxyZWFkeSBhdmFpbGFibGUgKGUuZy4gY2FjaGVkIHNjcmlwdCwgZmFzdCBsb2FkKVxuICAvLyBUaGlzIGlzIGEgZmFsbGJhY2sgaW4gY2FzZSB0aGUgZXhwbGljaXQgb25sb2FkIGluIHRoZSBzY3JpcHQgdGFnIGZpcmVzIHZlcnkgcXVpY2tseVxuICAvLyBvciBpZiBpbml0U2lnbnVwUGFnZSBpcyBjYWxsZWQgYWZ0ZXIgaENhcHRjaGFMb2FkZWRDYWxsYmFjayBoYXMgYWxyZWFkeSBydW4uXG4gIGlmIChcbiAgICB3aW5kb3cuaGNhcHRjaGEgJiZcbiAgICB0eXBlb2Ygd2luZG93LmhDYXB0Y2hhTG9hZGVkQ2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICFoY2FwdGNoYVdpZGdldElkXG4gICkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgXCJpbml0U2lnbnVwUGFnZTogaENhcHRjaGEgQVBJIHNlZW1zIGF2YWlsYWJsZSBhbmQgY2FsbGJhY2sgZGVmaW5lZCwgYXR0ZW1wdGluZyByZW5kZXIgaWYgbm90IGFscmVhZHkgZG9uZS5cIlxuICAgICk7XG4gICAgLy8gRGlyZWN0bHkgY2FsbCB0aGUgcmVuZGVyIGxvZ2ljIGlmIGNvbmRpdGlvbnMgYWxsb3csIG90aGVyd2lzZSBoQ2FwdGNoYUxvYWRlZENhbGxiYWNrIHdpbGwgaGFuZGxlIGl0LlxuICAgIC8vIFRoZSBgaENhcHRjaGFMb2FkZWRDYWxsYmFja2AgaXMgdGhlIHByaW1hcnkgd2F5IGl0IHNob3VsZCBiZSByZW5kZXJlZC5cbiAgICAvLyBUaGlzIGlzIG1vcmUgb2YgYSBzYWZldHkgbmV0LlxuICAgIGNvbnN0IGhjYXB0Y2hhQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoY2FwdGNoYS1jb250YWluZXJcIik7XG4gICAgaWYgKGhjYXB0Y2hhQ29udGFpbmVyICYmICFoY2FwdGNoYVdpZGdldElkKSB7XG4gICAgICAvLyAgIHdpbmRvdy5oQ2FwdGNoYUxvYWRlZENhbGxiYWNrKCk7IC8vIEF2b2lkIGNhbGxpbmcgaXQgZGlyZWN0bHkgaWYgaXQncyBzZXQgdG8gYmUgY2FsbGVkIGJ5IHNjcmlwdCBvbmxvYWRcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcImluaXRTaWdudXBQYWdlOiBoQ2FwdGNoYSBjb250YWluZXIgcHJlc2VudCwgd2lkZ2V0IG5vdCByZW5kZXJlZC4gRXhwZWN0aW5nIHNjcmlwdCdzIG9ubG9hZC5cIlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGhjYXB0Y2hhV2lkZ2V0SWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiaW5pdFNpZ251cFBhZ2U6IGhDYXB0Y2hhIHdpZGdldCBhbHJlYWR5IHJlbmRlcmVkLlwiKTtcbiAgICB9XG4gIH1cblxuICBpZiAoc2lnbnVwRm9ybSkge1xuICAgIHNpZ251cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBhc3luYyAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKGVycm9yTWVzc2FnZURpdikgZXJyb3JNZXNzYWdlRGl2LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgICBpZiAoc3RhdHVzTWVzc2FnZSkgc3RhdHVzTWVzc2FnZS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuXG4gICAgICBjb25zdCBlbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZW1haWxcIikudmFsdWUudHJpbSgpO1xuICAgICAgY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3N3b3JkXCIpLnZhbHVlO1xuICAgICAgY29uc3QgY29uZmlybVBhc3N3b3JkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maXJtUGFzc3dvcmRcIikudmFsdWU7XG4gICAgICBsZXQgcGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBob25lXCIpLnZhbHVlLnRyaW0oKTsgLy8gR2V0IHBob25lIG51bWJlclxuXG4gICAgICBsZXQgdmFsaWRhdGlvbkVycm9ycyA9IFtdO1xuICAgICAgY29uc3QgZW1haWxQYXR0ZXJuID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC87XG4gICAgICBpZiAoIWVtYWlsUGF0dGVybi50ZXN0KGVtYWlsKSlcbiAgICAgICAgdmFsaWRhdGlvbkVycm9ycy5wdXNoKFwiTCdhZHJlc3NlIGVtYWlsIG4nZXN0IHBhcyB2YWxpZGUuXCIpO1xuICAgICAgaWYgKHBhc3N3b3JkICE9PSBjb25maXJtUGFzc3dvcmQpXG4gICAgICAgIHZhbGlkYXRpb25FcnJvcnMucHVzaChcIkxlcyBtb3RzIGRlIHBhc3NlIG5lIGNvcnJlc3BvbmRlbnQgcGFzLlwiKTtcbiAgICAgIGNvbnN0IHBhc3N3b3JkQ29tcGxleGl0eVBhdHRlcm4gPSAvXig/PS4qW2Etel0pKD89LipbQS1aXSkoPz0uKlxcZCkuKyQvO1xuICAgICAgaWYgKCFwYXNzd29yZENvbXBsZXhpdHlQYXR0ZXJuLnRlc3QocGFzc3dvcmQpIHx8IHBhc3N3b3JkLmxlbmd0aCA8IDgpXG4gICAgICAgIHZhbGlkYXRpb25FcnJvcnMucHVzaChcIkxlIGZvcm1hdCBkdSBtb3QgZGUgcGFzc2UgZXN0IGludmFsaWRlLlwiKTtcbiAgICAgIGlmICghcGhvbmUpIHZhbGlkYXRpb25FcnJvcnMucHVzaChcIkxlIG51bcOpcm8gZGUgdMOpbMOpcGhvbmUgZXN0IHJlcXVpcy5cIik7XG4gICAgICAvLyBCYXNpYyBwaG9uZSB2YWxpZGF0aW9uICh5b3UgbWlnaHQgd2FudCBhIG1vcmUgcm9idXN0IG9uZSlcbiAgICAgIGNvbnN0IHBob25lUGF0dGVybiA9IC9eKDB8XFwrMzMpWzEtOV1cXGR7OH0kLzsgLy8gRXhhbXBsZTogMDYxMjM0NTY3OCBvciArMzM2MTIzNDU2NzhcbiAgICAgIGlmIChwaG9uZSAmJiAhcGhvbmVQYXR0ZXJuLnRlc3QocGhvbmUpKVxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzLnB1c2goXG4gICAgICAgICAgXCJMZSBmb3JtYXQgZHUgbnVtw6lybyBkZSB0w6lsw6lwaG9uZSBlc3QgaW52YWxpZGUgKGV4OiAwNjEyMzQ1Njc4IG91ICszMzYxMjM0NTY3OCkuXCJcbiAgICAgICAgKTtcblxuICAgICAgaWYgKCFjYXB0Y2hhVG9rZW4pIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgY2FwdGNoYSBpcyBzb2x2ZWRcbiAgICAgICAgdmFsaWRhdGlvbkVycm9ycy5wdXNoKFwiVmV1aWxsZXogY29tcGzDqXRlciBsZSBDQVBUQ0hBLlwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHZhbGlkYXRpb25FcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICBzaG93RXJyb3IodmFsaWRhdGlvbkVycm9ycy5qb2luKFwiPGJyPlwiKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2hvd0xvYWRpbmcoXCJzaWdudXBCdG5cIiwgXCJzaWdudXBTcGlubmVyXCIpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gTm9ybWFsaXplIHBob25lIHRvIEUuMTY0IGZvciBTdXBhYmFzZVxuICAgICAgICBsZXQgZTE2NFBob25lID0gcGhvbmU7XG4gICAgICAgIGlmIChwaG9uZS5zdGFydHNXaXRoKFwiMFwiKSkge1xuICAgICAgICAgIGUxNjRQaG9uZSA9IGArMzMke3Bob25lLnN1YnN0cmluZygxKX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3RlcCAxOiBTaWduIHVwIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkXG4gICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3I6IHNpZ25VcEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25VcCh7XG4gICAgICAgICAgZW1haWwsXG4gICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgb3B0aW9uczogeyBjYXB0Y2hhVG9rZW4gfSwgLy8gUGFzcyBjYXB0Y2hhIHRva2VuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChzaWduVXBFcnJvcikgdGhyb3cgc2lnblVwRXJyb3I7XG4gICAgICAgIGlmICghZGF0YS51c2VyKVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkZSBsJ3V0aWxpc2F0ZXVyLlwiKTtcblxuICAgICAgICAvLyBVc2VyIGNyZWF0ZWQuIE5vdyB1cGRhdGUgdGhlaXIgcHJvZmlsZSB3aXRoIHRoZSBwaG9uZSBudW1iZXIuXG4gICAgICAgIC8vIFRoaXMgYXNzdW1lcyBhIHByb2ZpbGUgaXMgY3JlYXRlZCB2aWEgYSB0cmlnZ2VyIHdoZW4gYXV0aC51c2VycyBnZXRzIGEgbmV3IGVudHJ5LlxuICAgICAgICBpZiAoZTE2NFBob25lICYmIGRhdGEudXNlci5pZCkge1xuICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IHByb2ZpbGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgIC5mcm9tKFwicHJvZmlsZXNcIilcbiAgICAgICAgICAgIC51cGRhdGUoeyBwaG9uZTogZTE2NFBob25lIH0pXG4gICAgICAgICAgICAuZXEoXCJpZFwiLCBkYXRhLnVzZXIuaWQpO1xuXG4gICAgICAgICAgaWYgKHByb2ZpbGVFcnJvcikge1xuICAgICAgICAgICAgLy8gTG9nIHRoZSBlcnJvciBidXQgZG9uJ3QgbmVjZXNzYXJpbHkgYmxvY2sgc2lnbnVwIHN1Y2Nlc3MgZGlzcGxheVxuICAgICAgICAgICAgLy8gYXMgdGhlIGNvcmUgdXNlciBjcmVhdGlvbiB3YXMgc3VjY2Vzc2Z1bC5cbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycmV1ciBNQUogcHJvZmlsIGF2ZWMgdMOpbMOpcGhvbmU6XCIsIHByb2ZpbGVFcnJvcik7XG4gICAgICAgICAgICAvLyBPcHRpb25hbGx5LCBpbmZvcm0gdGhlIHVzZXIgdGhhdCBwaG9uZSB1cGRhdGUgZmFpbGVkIGJ1dCBhY2NvdW50IGlzIGNyZWF0ZWQuXG4gICAgICAgICAgICBzaG93U3RhdHVzKFxuICAgICAgICAgICAgICBgQ29tcHRlIGNyw6nDqSBwb3VyICR7ZW1haWx9LiBWZXVpbGxleiB2w6lyaWZpZXIgdm90cmUgZW1haWwuIEVycmV1ciBlbnJlZ2lzdHJlbWVudCB0w6lsw6lwaG9uZS5gLFxuICAgICAgICAgICAgICBcIndhcm5pbmdcIiAvLyBPciBhIG1peGVkIHN0YXR1c1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hvd1N0YXR1cyhcbiAgICAgICAgICAgICAgYENvbXB0ZSBjcsOpw6kgYXZlYyBzdWNjw6hzIHBvdXIgJHtlbWFpbH0uIFZldWlsbGV6IHbDqXJpZmllciB2b3RyZSBlbWFpbC4gVMOpbMOpcGhvbmUgZW5yZWdpc3Ryw6kuYCxcbiAgICAgICAgICAgICAgXCJzdWNjZXNzXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCFlMTY0UGhvbmUpIHtcbiAgICAgICAgICBzaG93U3RhdHVzKFxuICAgICAgICAgICAgYENvbXB0ZSBjcsOpw6kgcG91ciAke2VtYWlsfS4gVmV1aWxsZXogdsOpcmlmaWVyIHZvdHJlIGVtYWlsLiBQYXMgZGUgbnVtw6lybyBkZSB0w6lsw6lwaG9uZSBmb3VybmkuYCxcbiAgICAgICAgICAgIFwic3VjY2Vzc1wiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaG93U3RhdHVzKFxuICAgICAgICAgICAgYENvbXB0ZSBjcsOpw6kgcG91ciAke2VtYWlsfS4gVmV1aWxsZXogdsOpcmlmaWVyIHZvdHJlIGVtYWlsLmAsXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIlxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDbGVhciBmb3JtIG9yIHJlZGlyZWN0IGFzIG5lZWRlZC4gRm9yIG5vdywganVzdCBzaG93IG1lc3NhZ2UuXG4gICAgICAgIHNpZ251cEZvcm0ucmVzZXQoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFbWFpbC9QYXNzd29yZCBTaWdudXAgZXJyb3I6XCIsIGVycm9yKTtcbiAgICAgICAgbGV0IGRpc3BsYXlFcnJvciA9IGVycm9yLm1lc3NhZ2UgfHwgXCJVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZS5cIjtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGVycm9yLm1lc3NhZ2UgJiZcbiAgICAgICAgICBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwiVXNlciBhbHJlYWR5IHJlZ2lzdGVyZWRcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgZGlzcGxheUVycm9yID1cbiAgICAgICAgICAgIFwiQ2V0dGUgYWRyZXNzZSBlbWFpbCBlc3QgZMOpasOgIHV0aWxpc8OpZS4gVmV1aWxsZXogdm91cyBjb25uZWN0ZXIgb3UgdXRpbGlzZXIgdW5lIGF1dHJlIGFkcmVzc2UuXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgZXJyb3IubWVzc2FnZSAmJlxuICAgICAgICAgIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJVbmFibGUgdG8gdmFsaWRhdGUgcGhvbmUgbnVtYmVyXCIpXG4gICAgICAgICkge1xuICAgICAgICAgIGRpc3BsYXlFcnJvciA9IFwiTGUgbnVtw6lybyBkZSB0w6lsw6lwaG9uZSBmb3Vybmkgbidlc3QgcGFzIHZhbGlkZS5cIjtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBlcnJvci5tZXNzYWdlICYmXG4gICAgICAgICAgZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiY2FwdGNoYSBwcm90ZWN0aW9uXCIpXG4gICAgICAgICkge1xuICAgICAgICAgIGRpc3BsYXlFcnJvciA9XG4gICAgICAgICAgICBcIkVycmV1ciBDQVBUQ0hBIGR1IHNlcnZldXIuIFZldWlsbGV6IHLDqWVzc2F5ZXIuIChcIiArXG4gICAgICAgICAgICBlcnJvci5tZXNzYWdlICtcbiAgICAgICAgICAgIFwiKVwiO1xuICAgICAgICB9XG4gICAgICAgIHNob3dFcnJvcihkaXNwbGF5RXJyb3IpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaGlkZUxvYWRpbmcoXCJzaWdudXBCdG5cIiwgXCJzaWdudXBTcGlubmVyXCIpO1xuICAgICAgICBpZiAod2luZG93LmhjYXB0Y2hhICYmIGhjYXB0Y2hhV2lkZ2V0SWQgIT09IG51bGwpIHtcbiAgICAgICAgICB3aW5kb3cuaGNhcHRjaGEucmVzZXQoaGNhcHRjaGFXaWRnZXRJZCk7IC8vIFJlc2V0IGhDYXB0Y2hhIGFmdGVyIHN1Ym1pc3Npb24gYXR0ZW1wdFxuICAgICAgICB9XG4gICAgICAgIGNhcHRjaGFUb2tlbiA9IG51bGw7IC8vIENsZWFyIHRva2VuIGFmdGVyIHVzZVxuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJTaWdudXAgZm9ybSAoc2lnbnVwRm9ybSkgbm90IGZvdW5kLlwiKTtcbiAgfVxuXG4gIGlmIChnb29nbGVTaWduVXBCdG4pIHtcbiAgICBnb29nbGVTaWduVXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIHNob3dMb2FkaW5nKFwiZ29vZ2xlU2lnblVwQnRuXCIsIFwiZ29vZ2xlU2lnblVwU3Bpbm5lclwiKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbkluV2l0aE9BdXRoKHtcbiAgICAgICAgICBwcm92aWRlcjogXCJnb29nbGVcIixcbiAgICAgICAgICBvcHRpb25zOiB7IHJlZGlyZWN0VG86IGAke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59L3Byb2ZpbGUuaHRtbGAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzaWduaW5nIHVwIHdpdGggR29vZ2xlOlwiLCBlcnJvcik7XG4gICAgICAgICAgc2hvd0Vycm9yKFxuICAgICAgICAgICAgZXJyb3IubWVzc2FnZSB8fCBcIkVycmV1ciBsb3JzIGRlIGwnaW5zY3JpcHRpb24gYXZlYyBHb29nbGUuXCJcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXhjZXB0aW9uIGR1cmluZyBHb29nbGUgc2lnbi11cDpcIiwgZXJyb3IpO1xuICAgICAgICBzaG93RXJyb3IoXG4gICAgICAgICAgXCJVbmUgZXhjZXB0aW9uIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGwnaW5zY3JpcHRpb24gYXZlYyBHb29nbGUuXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGhpZGVMb2FkaW5nKFwiZ29vZ2xlU2lnblVwQnRuXCIsIFwiZ29vZ2xlU2lnblVwU3Bpbm5lclwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oXCJHb29nbGUgU2lnbi1VcCBidXR0b24gKGdvb2dsZVNpZ25VcEJ0bikgbm90IGZvdW5kLlwiKTtcbiAgfVxufVxuXG4vLyBOb3RlOiBUaGUgb2xkICdzaWdudXAoZW1haWwsIHBhc3N3b3JkKScgZnVuY3Rpb24gaXMgcmVtb3ZlZCBhcyBpdHMgbG9naWMgaXMgbm93IGluIHRoZSBmb3JtIGV2ZW50IGxpc3RlbmVyLlxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGluaXRTaWdudXBQYWdlLFxuICAvLyBzaWdudXAgZnVuY3Rpb24gaXMgbm8gbG9uZ2VyIGV4cG9ydGVkIGRpcmVjdGx5IGFzIHRoZSBmbG93IGlzIG1vcmUgY29tcGxleFxufTtcbiIsIi8vIHNyYy9lbnRyaWVzL3NpZ251cC5qc1xuLyoqXG4gKiBTaWdudXAgRW50cnkgUG9pbnRcbiAqXG4gKiBUaGlzIG1vZHVsZSBzZXJ2ZXMgYXMgdGhlIGVudHJ5IHBvaW50IGZvciB0aGUgc2lnbnVwIHBhZ2UuXG4gKi9cblxuLy8gSW1wb3J0IG91ciBzaWdudXAgbW9kdWxlXG5pbXBvcnQgeyBpbml0U2lnbnVwUGFnZSB9IGZyb20gXCIuLi9hdXRoL3NpZ251cC5qc1wiO1xuXG4vLyBJbml0aWFsaXplIHNpZ251cCBwYWdlIHdoZW4gRE9NIGlzIGxvYWRlZFxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICAvLyBJbml0aWFsaXplIHNpZ251cCBwYWdlXG4gIGluaXRTaWdudXBQYWdlKCk7XG5cbiAgY29uc29sZS5sb2coXCJTaWdudXAgcGFnZSBpbml0aWFsaXplZFwiKTtcbn0pO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmYgPSB7fTtcbi8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbi8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5lID0gKGNodW5rSWQpID0+IHtcblx0cmV0dXJuIFByb21pc2UuYWxsKE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uZikucmVkdWNlKChwcm9taXNlcywga2V5KSA9PiB7XG5cdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5mW2tleV0oY2h1bmtJZCwgcHJvbWlzZXMpO1xuXHRcdHJldHVybiBwcm9taXNlcztcblx0fSwgW10pKTtcbn07IiwiLy8gVGhpcyBmdW5jdGlvbiBhbGxvdyB0byByZWZlcmVuY2UgYXN5bmMgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnUgPSAoY2h1bmtJZCkgPT4ge1xuXHQvLyByZXR1cm4gdXJsIGZvciBmaWxlbmFtZXMgYmFzZWQgb24gdGVtcGxhdGVcblx0cmV0dXJuIFwianMvXCIgKyBjaHVua0lkICsgXCIuYnVuZGxlLmpzXCI7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdCAmJiBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnRhZ05hbWUudG9VcHBlckNhc2UoKSA9PT0gJ1NDUklQVCcpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7XG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkge1xuXHRcdFx0dmFyIGkgPSBzY3JpcHRzLmxlbmd0aCAtIDE7XG5cdFx0XHR3aGlsZSAoaSA+IC0xICYmICghc2NyaXB0VXJsIHx8ICEvXmh0dHAocz8pOi8udGVzdChzY3JpcHRVcmwpKSkgc2NyaXB0VXJsID0gc2NyaXB0c1tpLS1dLnNyYztcblx0XHR9XG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvXmJsb2I6LywgXCJcIikucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsICsgXCIuLi9cIjsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0Nzg3OiAwXG59O1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmYuaiA9IChjaHVua0lkLCBwcm9taXNlcykgPT4ge1xuXHRcdC8vIEpTT05QIGNodW5rIGxvYWRpbmcgZm9yIGphdmFzY3JpcHRcblx0XHR2YXIgaW5zdGFsbGVkQ2h1bmtEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgPyBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gOiB1bmRlZmluZWQ7XG5cdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhICE9PSAwKSB7IC8vIDAgbWVhbnMgXCJhbHJlYWR5IGluc3RhbGxlZFwiLlxuXG5cdFx0XHQvLyBhIFByb21pc2UgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiLlxuXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhKSB7XG5cdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmKHRydWUpIHsgLy8gYWxsIGNodW5rcyBoYXZlIEpTXG5cdFx0XHRcdFx0Ly8gc2V0dXAgUHJvbWlzZSBpbiBjaHVuayBjYWNoZVxuXHRcdFx0XHRcdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gKGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IFtyZXNvbHZlLCByZWplY3RdKSk7XG5cdFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0gPSBwcm9taXNlKTtcblxuXHRcdFx0XHRcdC8vIHN0YXJ0IGNodW5rIGxvYWRpbmdcblx0XHRcdFx0XHR2YXIgdXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgX193ZWJwYWNrX3JlcXVpcmVfXy51KGNodW5rSWQpO1xuXHRcdFx0XHRcdC8vIGNyZWF0ZSBlcnJvciBiZWZvcmUgc3RhY2sgdW53b3VuZCB0byBnZXQgdXNlZnVsIHN0YWNrdHJhY2UgbGF0ZXJcblx0XHRcdFx0XHR2YXIgZXJyb3IgPSBuZXcgRXJyb3IoKTtcblx0XHRcdFx0XHR2YXIgbG9hZGluZ0VuZGVkID0gKGV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSkge1xuXHRcdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XG5cdFx0XHRcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSAhPT0gMCkgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgZXJyb3JUeXBlID0gZXZlbnQgJiYgKGV2ZW50LnR5cGUgPT09ICdsb2FkJyA/ICdtaXNzaW5nJyA6IGV2ZW50LnR5cGUpO1xuXHRcdFx0XHRcdFx0XHRcdHZhciByZWFsU3JjID0gZXZlbnQgJiYgZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5zcmM7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IubWVzc2FnZSA9ICdMb2FkaW5nIGNodW5rICcgKyBjaHVua0lkICsgJyBmYWlsZWQuXFxuKCcgKyBlcnJvclR5cGUgKyAnOiAnICsgcmVhbFNyYyArICcpJztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5uYW1lID0gJ0NodW5rTG9hZEVycm9yJztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci50eXBlID0gZXJyb3JUeXBlO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLnJlcXVlc3QgPSByZWFsU3JjO1xuXHRcdFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rRGF0YVsxXShlcnJvcik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubCh1cmwsIGxvYWRpbmdFbmRlZCwgXCJjaHVuay1cIiArIGNodW5rSWQsIGNodW5rSWQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxufTtcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5PLmogPSAoY2h1bmtJZCkgPT4gKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMCk7XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZSgoaWQpID0+IChpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwKSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rdXJiYW5kb2NzX3dlYmFwcFwiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt1cmJhbmRvY3Nfd2ViYXBwXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbMzAzXSwgKCkgPT4gKF9fd2VicGFja19yZXF1aXJlX18oNzk3KSkpXG5fX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuIl0sIm5hbWVzIjpbImRlZmVycmVkIiwibGVhZlByb3RvdHlwZXMiLCJnZXRQcm90byIsImluUHJvZ3Jlc3MiLCJkYXRhV2VicGFja1ByZWZpeCIsInN1cGFiYXNlIiwic2hvd0Vycm9yIiwibWVzc2FnZSIsImVsZW1lbnRJZCIsImVycm9yRWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJjb25zb2xlIiwiZXJyb3IiLCJzaG93U3RhdHVzIiwidHlwZSIsInN0YXR1c0VsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImZvckVhY2giLCJjbGFzc05hbWUiLCJzdGFydHNXaXRoIiwiYWRkIiwic2hvd0xvYWRpbmciLCJidXR0b25JZCIsInNwaW5uZXJJZCIsImJ1dHRvbiIsInNwaW5uZXIiLCJkaXNhYmxlZCIsImhpZGVMb2FkaW5nIiwiaGNhcHRjaGFXaWRnZXRJZCIsImNhcHRjaGFUb2tlbiIsIndpbmRvdyIsImhDYXB0Y2hhTG9hZGVkQ2FsbGJhY2siLCJsb2ciLCJoY2FwdGNoYUNvbnRhaW5lciIsImhjYXB0Y2hhIiwicmVuZGVyIiwic2l0ZWtleSIsImNhbGxiYWNrIiwidG9rZW4iLCJlcnIiLCJ1bmRlZmluZWQiLCJlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNpZ251cEZvcm0iLCJlcnJvck1lc3NhZ2VEaXYiLCJzdGF0dXNNZXNzYWdlIiwiZ29vZ2xlU2lnblVwQnRuIiwiYXN5bmMiLCJwcmV2ZW50RGVmYXVsdCIsImVtYWlsIiwidmFsdWUiLCJ0cmltIiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJwaG9uZSIsInZhbGlkYXRpb25FcnJvcnMiLCJ0ZXN0IiwicHVzaCIsImxlbmd0aCIsImpvaW4iLCJlMTY0UGhvbmUiLCJzdWJzdHJpbmciLCJkYXRhIiwic2lnblVwRXJyb3IiLCJhdXRoIiwic2lnblVwIiwib3B0aW9ucyIsInVzZXIiLCJFcnJvciIsImlkIiwicHJvZmlsZUVycm9yIiwiZnJvbSIsInVwZGF0ZSIsImVxIiwid2FybiIsInJlc2V0IiwiZGlzcGxheUVycm9yIiwiaW5jbHVkZXMiLCJ0b0xvd2VyQ2FzZSIsInNpZ25JbldpdGhPQXV0aCIsInByb3ZpZGVyIiwicmVkaXJlY3RUbyIsImxvY2F0aW9uIiwib3JpZ2luIiwiaW5pdFNpZ251cFBhZ2UiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJtIiwiTyIsInJlc3VsdCIsImNodW5rSWRzIiwiZm4iLCJwcmlvcml0eSIsIm5vdEZ1bGZpbGxlZCIsIkluZmluaXR5IiwiaSIsImZ1bGZpbGxlZCIsImoiLCJPYmplY3QiLCJrZXlzIiwiZXZlcnkiLCJrZXkiLCJzcGxpY2UiLCJyIiwiZ2V0UHJvdG90eXBlT2YiLCJvYmoiLCJ0IiwibW9kZSIsInRoaXMiLCJfX2VzTW9kdWxlIiwidGhlbiIsIm5zIiwiY3JlYXRlIiwiZGVmIiwiY3VycmVudCIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZCIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZiIsImNodW5rSWQiLCJQcm9taXNlIiwiYWxsIiwicmVkdWNlIiwicHJvbWlzZXMiLCJ1IiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImwiLCJ1cmwiLCJkb25lIiwic2NyaXB0IiwibmVlZEF0dGFjaCIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInMiLCJnZXRBdHRyaWJ1dGUiLCJjcmVhdGVFbGVtZW50IiwiY2hhcnNldCIsInRpbWVvdXQiLCJuYyIsInNldEF0dHJpYnV0ZSIsInNyYyIsIm9uU2NyaXB0Q29tcGxldGUiLCJwcmV2IiwiZXZlbnQiLCJvbmVycm9yIiwib25sb2FkIiwiY2xlYXJUaW1lb3V0IiwiZG9uZUZucyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInNldFRpbWVvdXQiLCJiaW5kIiwidGFyZ2V0IiwiaGVhZCIsImFwcGVuZENoaWxkIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwiY3VycmVudFNjcmlwdCIsInRhZ05hbWUiLCJ0b1VwcGVyQ2FzZSIsInJlcGxhY2UiLCJwIiwiaW5zdGFsbGVkQ2h1bmtzIiwiaW5zdGFsbGVkQ2h1bmtEYXRhIiwicHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJlcnJvclR5cGUiLCJyZWFsU3JjIiwibmFtZSIsInJlcXVlc3QiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwic29tZSIsImNodW5rTG9hZGluZ0dsb2JhbCIsInNlbGYiLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==