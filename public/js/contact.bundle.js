(()=>{"use strict";var e,t,r,o,n,i={6528:(e,t,r)=>{var o=r(9251),n=r(9660);async function i(e){e.preventDefault();const t=e.target.querySelector('button[type="submit"]'),r=t.textContent;t.disabled=!0,t.textContent="Envoi en cours...";try{const t=new FormData(e.target),r={name:t.get("name"),email:t.get("email"),subject:t.get("subject"),message:t.get("message")};if(!(r.name&&r.email&&r.subject&&r.message))throw new Error("Tous les champs sont requis");const o={name:String(r.name).trim(),email:String(r.email).trim(),subject:String(r.subject).trim(),message:String(r.message).trim()};console.log("Submitting contact data:",o);const{data:i,error:s}=await n.N.from("support_messages").insert(o).select().single();if(s)throw console.error("Supabase error:",s),"42501"===s.code?new Error("Erreur de permission. Veuillez réessayer ou nous contacter directement."):"PGRST301"===s.code?new Error("Erreur de validation des données. Vérifiez vos informations."):new Error(`Erreur lors de l'enregistrement: ${s.message}`);console.log("Successfully inserted to database:",i);try{await async function(e){try{const t=await fetch("https://ofeyssipibktmbfebibo.supabase.co/functions/v1/discord-contact-notification",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9mZXlzc2lwaWJrdG1iZmViaWJvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM5MjUwOTQsImV4cCI6MjA1OTUwMTA5NH0.w71CAKfolktzRl-TmLVhHYaEbhCfVk4A7YraEUCglrU"},body:JSON.stringify({record:e})});if(!t.ok){const e=await t.json();throw new Error(`Discord API error: ${t.status} - ${e.error||"Unknown error"}`)}const r=await t.json();return console.log("Discord notification sent successfully:",r),r}catch(e){throw console.error("Failed to send Discord notification:",e),e}}({...i,created_at:i.created_at||(new Date).toISOString()})}catch(e){console.warn("Discord notification failed:",e)}a("Message envoyé avec succès ! Nous vous répondrons bientôt.","success"),e.target.reset()}catch(e){console.error("Error sending contact message:",e),a(e.message||"Erreur lors de l'envoi du message. Veuillez réessayer.","error")}finally{t.disabled=!1,t.textContent=r}}function a(e,t="info"){document.querySelectorAll(".notification").forEach((e=>e.remove()));const r=document.createElement("div");return r.className=`notification notification-${t}`,r.textContent=e,Object.assign(r.style,{position:"fixed",top:"20px",right:"20px",padding:"15px 20px",borderRadius:"5px",color:"white",fontWeight:"bold",zIndex:"10000",maxWidth:"400px",backgroundColor:"success"===t?"#10b981":"error"===t?"#ef4444":"#3b82f6"}),document.body.appendChild(r),setTimeout((()=>{r.parentNode&&r.remove()}),5e3),r}document.addEventListener("DOMContentLoaded",(()=>{try{(0,o.Mt)(),!function(){const e=document.querySelector(".contact-form");return!!e&&(e.addEventListener("submit",i),console.log("Contact form initialized"),!0)}()?console.warn("Contact form not found on this page"):console.log("Contact page initialized successfully")}catch(e){console.error("Error initializing contact page:",e)}}))}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return i[e].call(r.exports,r,r.exports,s),r.exports}s.m=i,e=[],s.O=(t,r,o,n)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,o,n]=e[u],a=!0,c=0;c<r.length;c++)(!1&n||i>=n)&&Object.keys(s.O).every((e=>s.O[e](r[c])))?r.splice(c--,1):(a=!1,n<i&&(i=n));if(a){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,o,n]},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var n=Object.create(null);s.r(n);var i={};t=t||[null,r({}),r([]),r(r)];for(var a=2&o&&e;"object"==typeof a&&!~t.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,s.d(n,i),n},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,r)=>(s.f[r](e,t),t)),[])),s.u=e=>"js/"+e+".bundle.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},n="urbandocs_webapp:",s.l=(e,t,r,i)=>{if(o[e])o[e].push(t);else{var a,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==n+r){a=d;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",n+r),a.src=e),o[e]=[t];var f=(t,r)=>{a.onerror=a.onload=null,clearTimeout(p);var n=o[e];if(delete o[e],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(r))),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),c&&document.head.appendChild(a)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.j=353,(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e+"../"})(),(()=>{var e={353:0};s.f.j=(t,r)=>{var o=s.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise(((r,n)=>o=e[t]=[r,n]));r.push(o[2]=n);var i=s.p+s.u(t),a=new Error;s.l(i,(r=>{if(s.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",a.name="ChunkLoadError",a.type=n,a.request=i,o[1](a)}}),"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,r)=>{var o,n,[i,a,c]=r,l=0;if(i.some((t=>0!==e[t]))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(c)var u=c(s)}for(t&&t(r);l<i.length;l++)n=i[l],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},r=self.webpackChunkurbandocs_webapp=self.webpackChunkurbandocs_webapp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var c=s.O(void 0,[76],(()=>s(6528)));c=s.O(c)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0ssR0FDaEJmLEVBQW9Cd0MsRUFBRXFELEVBQWlCaEQsSUFBWWdELEVBQWdCaEQsSUFDckVnRCxFQUFnQmhELEdBQVMsS0FFMUJnRCxFQUFnQmhELEdBQVcsRUFFNUIsT0FBTzdDLEVBQW9CUyxFQUFFL0MsSUFHMUJpSixFQUFxQkMsS0FBbUMsNkJBQUlBLEtBQW1DLDhCQUFLLEdBQ3hHRCxFQUFtQnJJLFFBQVErSCxFQUFxQnJCLEtBQUssS0FBTSxJQUMzRDJCLEVBQW1COUMsS0FBT3dDLEVBQXFCckIsS0FBSyxLQUFNMkIsRUFBbUI5QyxLQUFLbUIsS0FBSzJCLEcsS0NsRnZGLElBQUlFLEVBQXNCN0csRUFBb0JTLE9BQUVOLEVBQVcsQ0FBQyxLQUFLLElBQU9ILEVBQW9CLFFBQzVGNkcsRUFBc0I3RyxFQUFvQlMsRUFBRW9HLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvY3JlYXRlIGZha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9sb2FkIHNjcmlwdCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwLy4vc3JjL2pzL21vZHVsZXMvY29udGFjdC1mb3JtLmpzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvLi9zcmMvanMvZW50cmllcy9jb250YWN0LmpzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvZW5zdXJlIGNodW5rIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2dldCBqYXZhc2NyaXB0IGNodW5rIGZpbGVuYW1lIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL3J1bnRpbWVJZCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwidmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mID8gKG9iaikgPT4gKE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopKSA6IChvYmopID0+IChvYmouX19wcm90b19fKTtcbnZhciBsZWFmUHJvdG90eXBlcztcbi8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuLy8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4vLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbi8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuLy8gbW9kZSAmIDE2OiByZXR1cm4gdmFsdWUgd2hlbiBpdCdzIFByb21pc2UtbGlrZVxuLy8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuX193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcblx0aWYobW9kZSAmIDEpIHZhbHVlID0gdGhpcyh2YWx1ZSk7XG5cdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG5cdGlmKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUpIHtcblx0XHRpZigobW9kZSAmIDQpICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcblx0XHRpZigobW9kZSAmIDE2KSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHZhbHVlO1xuXHR9XG5cdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG5cdHZhciBkZWYgPSB7fTtcblx0bGVhZlByb3RvdHlwZXMgPSBsZWFmUHJvdG90eXBlcyB8fCBbbnVsbCwgZ2V0UHJvdG8oe30pLCBnZXRQcm90byhbXSksIGdldFByb3RvKGdldFByb3RvKV07XG5cdGZvcih2YXIgY3VycmVudCA9IG1vZGUgJiAyICYmIHZhbHVlOyB0eXBlb2YgY3VycmVudCA9PSAnb2JqZWN0JyAmJiAhfmxlYWZQcm90b3R5cGVzLmluZGV4T2YoY3VycmVudCk7IGN1cnJlbnQgPSBnZXRQcm90byhjdXJyZW50KSkge1xuXHRcdE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGN1cnJlbnQpLmZvckVhY2goKGtleSkgPT4gKGRlZltrZXldID0gKCkgPT4gKHZhbHVlW2tleV0pKSk7XG5cdH1cblx0ZGVmWydkZWZhdWx0J10gPSAoKSA9PiAodmFsdWUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGRlZik7XG5cdHJldHVybiBucztcbn07IiwidmFyIGluUHJvZ3Jlc3MgPSB7fTtcbnZhciBkYXRhV2VicGFja1ByZWZpeCA9IFwidXJiYW5kb2NzX3dlYmFwcDpcIjtcbi8vIGxvYWRTY3JpcHQgZnVuY3Rpb24gdG8gbG9hZCBhIHNjcmlwdCB2aWEgc2NyaXB0IHRhZ1xuX193ZWJwYWNrX3JlcXVpcmVfXy5sID0gKHVybCwgZG9uZSwga2V5LCBjaHVua0lkKSA9PiB7XG5cdGlmKGluUHJvZ3Jlc3NbdXJsXSkgeyBpblByb2dyZXNzW3VybF0ucHVzaChkb25lKTsgcmV0dXJuOyB9XG5cdHZhciBzY3JpcHQsIG5lZWRBdHRhY2g7XG5cdGlmKGtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2NyaXB0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIHMgPSBzY3JpcHRzW2ldO1xuXHRcdFx0aWYocy5nZXRBdHRyaWJ1dGUoXCJzcmNcIikgPT0gdXJsIHx8IHMuZ2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIpID09IGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KSB7IHNjcmlwdCA9IHM7IGJyZWFrOyB9XG5cdFx0fVxuXHR9XG5cdGlmKCFzY3JpcHQpIHtcblx0XHRuZWVkQXR0YWNoID0gdHJ1ZTtcblx0XHRzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuXHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04Jztcblx0XHRzY3JpcHQudGltZW91dCA9IDEyMDtcblx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5uYykge1xuXHRcdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIF9fd2VicGFja19yZXF1aXJlX18ubmMpO1xuXHRcdH1cblx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIsIGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KTtcblxuXHRcdHNjcmlwdC5zcmMgPSB1cmw7XG5cdH1cblx0aW5Qcm9ncmVzc1t1cmxdID0gW2RvbmVdO1xuXHR2YXIgb25TY3JpcHRDb21wbGV0ZSA9IChwcmV2LCBldmVudCkgPT4ge1xuXHRcdC8vIGF2b2lkIG1lbSBsZWFrcyBpbiBJRS5cblx0XHRzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuXHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0XHR2YXIgZG9uZUZucyA9IGluUHJvZ3Jlc3NbdXJsXTtcblx0XHRkZWxldGUgaW5Qcm9ncmVzc1t1cmxdO1xuXHRcdHNjcmlwdC5wYXJlbnROb2RlICYmIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cdFx0ZG9uZUZucyAmJiBkb25lRm5zLmZvckVhY2goKGZuKSA9PiAoZm4oZXZlbnQpKSk7XG5cdFx0aWYocHJldikgcmV0dXJuIHByZXYoZXZlbnQpO1xuXHR9XG5cdHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgdW5kZWZpbmVkLCB7IHR5cGU6ICd0aW1lb3V0JywgdGFyZ2V0OiBzY3JpcHQgfSksIDEyMDAwMCk7XG5cdHNjcmlwdC5vbmVycm9yID0gb25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHNjcmlwdC5vbmVycm9yKTtcblx0c2NyaXB0Lm9ubG9hZCA9IG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCBzY3JpcHQub25sb2FkKTtcblx0bmVlZEF0dGFjaCAmJiBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG59OyIsIi8vIHNyYy9qcy9tb2R1bGVzL2NvbnRhY3QtZm9ybS5qcyAtIENvbnRhY3QgZm9ybSBtb2R1bGVcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSBcIi4uL3N1cGFiYXNlLWNsaWVudC5qc1wiO1xuXG4vLyBDb250YWN0IGZvcm0gaGFuZGxlclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNvbnRhY3RTdWJtaXQoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBldmVudC50YXJnZXQucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcbiAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuXG4gIC8vIERpc2FibGUgYnV0dG9uIGFuZCBzaG93IGxvYWRpbmcgc3RhdGVcbiAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJFbnZvaSBlbiBjb3Vycy4uLlwiO1xuXG4gIHRyeSB7XG4gICAgLy8gR2V0IGZvcm0gZGF0YVxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGV2ZW50LnRhcmdldCk7XG4gICAgY29uc3QgY29udGFjdERhdGEgPSB7XG4gICAgICBuYW1lOiBmb3JtRGF0YS5nZXQoXCJuYW1lXCIpLFxuICAgICAgZW1haWw6IGZvcm1EYXRhLmdldChcImVtYWlsXCIpLFxuICAgICAgc3ViamVjdDogZm9ybURhdGEuZ2V0KFwic3ViamVjdFwiKSxcbiAgICAgIG1lc3NhZ2U6IGZvcm1EYXRhLmdldChcIm1lc3NhZ2VcIiksXG4gICAgfTtcblxuICAgIC8vIFZhbGlkYXRlIHRoYXQgYWxsIGZpZWxkcyBoYXZlIHZhbHVlc1xuICAgIGlmIChcbiAgICAgICFjb250YWN0RGF0YS5uYW1lIHx8XG4gICAgICAhY29udGFjdERhdGEuZW1haWwgfHxcbiAgICAgICFjb250YWN0RGF0YS5zdWJqZWN0IHx8XG4gICAgICAhY29udGFjdERhdGEubWVzc2FnZVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG91cyBsZXMgY2hhbXBzIHNvbnQgcmVxdWlzXCIpO1xuICAgIH1cblxuICAgIC8vIENsZWFuIGFuZCB2YWxpZGF0ZSB0aGUgZGF0YVxuICAgIGNvbnN0IGNsZWFuQ29udGFjdERhdGEgPSB7XG4gICAgICBuYW1lOiBTdHJpbmcoY29udGFjdERhdGEubmFtZSkudHJpbSgpLFxuICAgICAgZW1haWw6IFN0cmluZyhjb250YWN0RGF0YS5lbWFpbCkudHJpbSgpLFxuICAgICAgc3ViamVjdDogU3RyaW5nKGNvbnRhY3REYXRhLnN1YmplY3QpLnRyaW0oKSxcbiAgICAgIG1lc3NhZ2U6IFN0cmluZyhjb250YWN0RGF0YS5tZXNzYWdlKS50cmltKCksXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKFwiU3VibWl0dGluZyBjb250YWN0IGRhdGE6XCIsIGNsZWFuQ29udGFjdERhdGEpO1xuXG4gICAgLy8gSW5zZXJ0IGludG8gU3VwYWJhc2UgZGF0YWJhc2VcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJzdXBwb3J0X21lc3NhZ2VzXCIpXG4gICAgICAuaW5zZXJ0KGNsZWFuQ29udGFjdERhdGEpXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlN1cGFiYXNlIGVycm9yOlwiLCBlcnJvcik7XG5cbiAgICAgIC8vIFByb3ZpZGUgdXNlci1mcmllbmRseSBlcnJvciBtZXNzYWdlIGJhc2VkIG9uIGVycm9yIGNvZGVcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSBcIjQyNTAxXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiRXJyZXVyIGRlIHBlcm1pc3Npb24uIFZldWlsbGV6IHLDqWVzc2F5ZXIgb3Ugbm91cyBjb250YWN0ZXIgZGlyZWN0ZW1lbnQuXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IuY29kZSA9PT0gXCJQR1JTVDMwMVwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIkVycmV1ciBkZSB2YWxpZGF0aW9uIGRlcyBkb25uw6llcy4gVsOpcmlmaWV6IHZvcyBpbmZvcm1hdGlvbnMuXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyZXVyIGxvcnMgZGUgbCdlbnJlZ2lzdHJlbWVudDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwiU3VjY2Vzc2Z1bGx5IGluc2VydGVkIHRvIGRhdGFiYXNlOlwiLCBkYXRhKTtcblxuICAgIC8vIFNlbmQgRGlzY29yZCBub3RpZmljYXRpb24gZGlyZWN0bHkgZnJvbSBjbGllbnRcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2VuZERpc2NvcmROb3RpZmljYXRpb24oe1xuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBjcmVhdGVkX2F0OiBkYXRhLmNyZWF0ZWRfYXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZGlzY29yZEVycm9yKSB7XG4gICAgICAvLyBEb24ndCBmYWlsIHRoZSBlbnRpcmUgc3VibWlzc2lvbiBpZiBEaXNjb3JkIGZhaWxzXG4gICAgICBjb25zb2xlLndhcm4oXCJEaXNjb3JkIG5vdGlmaWNhdGlvbiBmYWlsZWQ6XCIsIGRpc2NvcmRFcnJvcik7XG4gICAgfVxuXG4gICAgLy8gU3VjY2VzcyBmZWVkYmFja1xuICAgIHNob3dOb3RpZmljYXRpb24oXG4gICAgICBcIk1lc3NhZ2UgZW52b3nDqSBhdmVjIHN1Y2PDqHMgISBOb3VzIHZvdXMgcsOpcG9uZHJvbnMgYmllbnTDtHQuXCIsXG4gICAgICBcInN1Y2Nlc3NcIlxuICAgICk7XG4gICAgZXZlbnQudGFyZ2V0LnJlc2V0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNlbmRpbmcgY29udGFjdCBtZXNzYWdlOlwiLCBlcnJvcik7XG5cbiAgICAvLyBTaG93IHNwZWNpZmljIGVycm9yIG1lc3NhZ2UgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgZ2VuZXJpYyBtZXNzYWdlXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgIGVycm9yLm1lc3NhZ2UgfHwgXCJFcnJldXIgbG9ycyBkZSBsJ2Vudm9pIGR1IG1lc3NhZ2UuIFZldWlsbGV6IHLDqWVzc2F5ZXIuXCI7XG4gICAgc2hvd05vdGlmaWNhdGlvbihlcnJvck1lc3NhZ2UsIFwiZXJyb3JcIik7XG4gIH0gZmluYWxseSB7XG4gICAgLy8gUmUtZW5hYmxlIGJ1dHRvblxuICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IG9yaWdpbmFsVGV4dDtcbiAgfVxufVxuXG4vLyBTZW5kIERpc2NvcmQgbm90aWZpY2F0aW9uXG5hc3luYyBmdW5jdGlvbiBzZW5kRGlzY29yZE5vdGlmaWNhdGlvbihjb250YWN0RGF0YSkge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICBcImh0dHBzOi8vb2ZleXNzaXBpYmt0bWJmZWJpYm8uc3VwYWJhc2UuY28vZnVuY3Rpb25zL3YxL2Rpc2NvcmQtY29udGFjdC1ub3RpZmljYXRpb25cIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlNJc0luSmxaaUk2SW05bVpYbHpjMmx3YVdKcmRHMWlabVZpYVdKdklpd2ljbTlzWlNJNkltRnViMjRpTENKcFlYUWlPakUzTkRNNU1qVXdPVFFzSW1WNGNDSTZNakExT1RVd01UQTVOSDAudzcxQ0FLZm9sa3R6UmwtVG1MVmhIWWFFYmhDZlZrNEE3WXJhRVVDZ2xyVWAsIC8vIGFub24ga2V5XG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICByZWNvcmQ6IGNvbnRhY3REYXRhLFxuICAgICAgICB9KSxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgRGlzY29yZCBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAtICR7XG4gICAgICAgICAgZXJyb3JEYXRhLmVycm9yIHx8IFwiVW5rbm93biBlcnJvclwiXG4gICAgICAgIH1gXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBjb25zb2xlLmxvZyhcIkRpc2NvcmQgbm90aWZpY2F0aW9uIHNlbnQgc3VjY2Vzc2Z1bGx5OlwiLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzZW5kIERpc2NvcmQgbm90aWZpY2F0aW9uOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gU2ltcGxlIG5vdGlmaWNhdGlvbiBzeXN0ZW1cbmV4cG9ydCBmdW5jdGlvbiBzaG93Tm90aWZpY2F0aW9uKG1lc3NhZ2UsIHR5cGUgPSBcImluZm9cIikge1xuICAvLyBSZW1vdmUgZXhpc3Rpbmcgbm90aWZpY2F0aW9uc1xuICBjb25zdCBleGlzdGluZ05vdGlmaWNhdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5vdGlmaWNhdGlvblwiKTtcbiAgZXhpc3RpbmdOb3RpZmljYXRpb25zLmZvckVhY2goKG5vdGlmKSA9PiBub3RpZi5yZW1vdmUoKSk7XG5cbiAgLy8gQ3JlYXRlIG5vdGlmaWNhdGlvbiBlbGVtZW50XG4gIGNvbnN0IG5vdGlmaWNhdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIG5vdGlmaWNhdGlvbi5jbGFzc05hbWUgPSBgbm90aWZpY2F0aW9uIG5vdGlmaWNhdGlvbi0ke3R5cGV9YDtcbiAgbm90aWZpY2F0aW9uLnRleHRDb250ZW50ID0gbWVzc2FnZTtcblxuICAvLyBBZGQgc3R5bGVzXG4gIE9iamVjdC5hc3NpZ24obm90aWZpY2F0aW9uLnN0eWxlLCB7XG4gICAgcG9zaXRpb246IFwiZml4ZWRcIixcbiAgICB0b3A6IFwiMjBweFwiLFxuICAgIHJpZ2h0OiBcIjIwcHhcIixcbiAgICBwYWRkaW5nOiBcIjE1cHggMjBweFwiLFxuICAgIGJvcmRlclJhZGl1czogXCI1cHhcIixcbiAgICBjb2xvcjogXCJ3aGl0ZVwiLFxuICAgIGZvbnRXZWlnaHQ6IFwiYm9sZFwiLFxuICAgIHpJbmRleDogXCIxMDAwMFwiLFxuICAgIG1heFdpZHRoOiBcIjQwMHB4XCIsXG4gICAgYmFja2dyb3VuZENvbG9yOlxuICAgICAgdHlwZSA9PT0gXCJzdWNjZXNzXCIgPyBcIiMxMGI5ODFcIiA6IHR5cGUgPT09IFwiZXJyb3JcIiA/IFwiI2VmNDQ0NFwiIDogXCIjM2I4MmY2XCIsXG4gIH0pO1xuXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm90aWZpY2F0aW9uKTtcblxuICAvLyBBdXRvIHJlbW92ZSBhZnRlciA1IHNlY29uZHNcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgaWYgKG5vdGlmaWNhdGlvbi5wYXJlbnROb2RlKSB7XG4gICAgICBub3RpZmljYXRpb24ucmVtb3ZlKCk7XG4gICAgfVxuICB9LCA1MDAwKTtcblxuICByZXR1cm4gbm90aWZpY2F0aW9uO1xufVxuXG4vLyBJbml0aWFsaXplIGNvbnRhY3QgZm9ybVxuZXhwb3J0IGZ1bmN0aW9uIGluaXRDb250YWN0Rm9ybSgpIHtcbiAgY29uc3QgY29udGFjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhY3QtZm9ybVwiKTtcbiAgaWYgKGNvbnRhY3RGb3JtKSB7XG4gICAgY29udGFjdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVDb250YWN0U3VibWl0KTtcbiAgICBjb25zb2xlLmxvZyhcIkNvbnRhY3QgZm9ybSBpbml0aWFsaXplZFwiKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG4iLCIvLyBzcmMvanMvZW50cmllcy9jb250YWN0LmpzIC0gQ29udGFjdCBwYWdlIGVudHJ5IHBvaW50XG5pbXBvcnQgeyBpbml0SGVhZGVyQXV0aCB9IGZyb20gXCIuLi9hdXRoL2hlYWRlci1hdXRoLmpzXCI7XG5pbXBvcnQgeyBpbml0Q29udGFjdEZvcm0gfSBmcm9tIFwiLi4vbW9kdWxlcy9jb250YWN0LWZvcm0uanNcIjtcblxuLy8gSW5pdGlhbGl6ZSBoZWFkZXIgYXV0aGVudGljYXRpb24gYW5kIGNvbnRhY3QgZm9ybSB3aGVuIERPTSBpcyBsb2FkZWRcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBJbml0aWFsaXplIGhlYWRlciBhdXRoZW50aWNhdGlvblxuICAgIGluaXRIZWFkZXJBdXRoKCk7XG5cbiAgICAvLyBJbml0aWFsaXplIGNvbnRhY3QgZm9ybVxuICAgIGNvbnN0IGNvbnRhY3RGb3JtSW5pdGlhbGl6ZWQgPSBpbml0Q29udGFjdEZvcm0oKTtcblxuICAgIGlmIChjb250YWN0Rm9ybUluaXRpYWxpemVkKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkNvbnRhY3QgcGFnZSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkNvbnRhY3QgZm9ybSBub3QgZm91bmQgb24gdGhpcyBwYWdlXCIpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW5pdGlhbGl6aW5nIGNvbnRhY3QgcGFnZTpcIiwgZXJyb3IpO1xuICB9XG59KTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5mID0ge307XG4vLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4vLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3Ncbl9fd2VicGFja19yZXF1aXJlX18uZSA9IChjaHVua0lkKSA9PiB7XG5cdHJldHVybiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLmYpLnJlZHVjZSgocHJvbWlzZXMsIGtleSkgPT4ge1xuXHRcdF9fd2VicGFja19yZXF1aXJlX18uZltrZXldKGNodW5rSWQsIHByb21pc2VzKTtcblx0XHRyZXR1cm4gcHJvbWlzZXM7XG5cdH0sIFtdKSk7XG59OyIsIi8vIFRoaXMgZnVuY3Rpb24gYWxsb3cgdG8gcmVmZXJlbmNlIGFzeW5jIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy51ID0gKGNodW5rSWQpID0+IHtcblx0Ly8gcmV0dXJuIHVybCBmb3IgZmlsZW5hbWVzIGJhc2VkIG9uIHRlbXBsYXRlXG5cdHJldHVybiBcImpzL1wiICsgY2h1bmtJZCArIFwiLmJ1bmRsZS5qc1wiO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmogPSAzNTM7IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0ICYmIGRvY3VtZW50LmN1cnJlbnRTY3JpcHQudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09PSAnU0NSSVBUJylcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSB7XG5cdFx0XHR2YXIgaSA9IHNjcmlwdHMubGVuZ3RoIC0gMTtcblx0XHRcdHdoaWxlIChpID4gLTEgJiYgKCFzY3JpcHRVcmwgfHwgIS9eaHR0cChzPyk6Ly50ZXN0KHNjcmlwdFVybCkpKSBzY3JpcHRVcmwgPSBzY3JpcHRzW2ktLV0uc3JjO1xuXHRcdH1cblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC9eYmxvYjovLCBcIlwiKS5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmwgKyBcIi4uL1wiOyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQzNTM6IDBcbn07XG5cbl9fd2VicGFja19yZXF1aXJlX18uZi5qID0gKGNodW5rSWQsIHByb21pc2VzKSA9PiB7XG5cdFx0Ly8gSlNPTlAgY2h1bmsgbG9hZGluZyBmb3IgamF2YXNjcmlwdFxuXHRcdHZhciBpbnN0YWxsZWRDaHVua0RhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSA/IGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA6IHVuZGVmaW5lZDtcblx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIHsgLy8gMCBtZWFucyBcImFscmVhZHkgaW5zdGFsbGVkXCIuXG5cblx0XHRcdC8vIGEgUHJvbWlzZSBtZWFucyBcImN1cnJlbnRseSBsb2FkaW5nXCIuXG5cdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEpIHtcblx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYodHJ1ZSkgeyAvLyBhbGwgY2h1bmtzIGhhdmUgSlNcblx0XHRcdFx0XHQvLyBzZXR1cCBQcm9taXNlIGluIGNodW5rIGNhY2hlXG5cdFx0XHRcdFx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiAoaW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gW3Jlc29sdmUsIHJlamVjdF0pKTtcblx0XHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSA9IHByb21pc2UpO1xuXG5cdFx0XHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuXHRcdFx0XHRcdHZhciB1cmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBfX3dlYnBhY2tfcmVxdWlyZV9fLnUoY2h1bmtJZCk7XG5cdFx0XHRcdFx0Ly8gY3JlYXRlIGVycm9yIGJlZm9yZSBzdGFjayB1bndvdW5kIHRvIGdldCB1c2VmdWwgc3RhY2t0cmFjZSBsYXRlclxuXHRcdFx0XHRcdHZhciBlcnJvciA9IG5ldyBFcnJvcigpO1xuXHRcdFx0XHRcdHZhciBsb2FkaW5nRW5kZWQgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpKSB7XG5cdFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcblx0XHRcdFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhICE9PSAwKSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBlcnJvclR5cGUgPSBldmVudCAmJiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnID8gJ21pc3NpbmcnIDogZXZlbnQudHlwZSk7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJlYWxTcmMgPSBldmVudCAmJiBldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LnNyYztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5tZXNzYWdlID0gJ0xvYWRpbmcgY2h1bmsgJyArIGNodW5rSWQgKyAnIGZhaWxlZC5cXG4oJyArIGVycm9yVHlwZSArICc6ICcgKyByZWFsU3JjICsgJyknO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLm5hbWUgPSAnQ2h1bmtMb2FkRXJyb3InO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLnR5cGUgPSBlcnJvclR5cGU7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IucmVxdWVzdCA9IHJlYWxTcmM7XG5cdFx0XHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhWzFdKGVycm9yKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5sKHVybCwgbG9hZGluZ0VuZGVkLCBcImNodW5rLVwiICsgY2h1bmtJZCwgY2h1bmtJZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG59O1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8uaiA9IChjaHVua0lkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKTtcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSAocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24sIGRhdGEpID0+IHtcblx0dmFyIFtjaHVua0lkcywgbW9yZU1vZHVsZXMsIHJ1bnRpbWVdID0gZGF0YTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKChpZCkgPT4gKGluc3RhbGxlZENodW5rc1tpZF0gIT09IDApKSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt1cmJhbmRvY3Nfd2ViYXBwXCJdID0gc2VsZltcIndlYnBhY2tDaHVua3VyYmFuZG9jc193ZWJhcHBcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFs3Nl0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKDY1MjgpKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJsZWFmUHJvdG90eXBlcyIsImdldFByb3RvIiwiaW5Qcm9ncmVzcyIsImRhdGFXZWJwYWNrUHJlZml4IiwiYXN5bmMiLCJoYW5kbGVDb250YWN0U3VibWl0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdEJ1dHRvbiIsInRhcmdldCIsInF1ZXJ5U2VsZWN0b3IiLCJvcmlnaW5hbFRleHQiLCJ0ZXh0Q29udGVudCIsImRpc2FibGVkIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImNvbnRhY3REYXRhIiwibmFtZSIsImdldCIsImVtYWlsIiwic3ViamVjdCIsIm1lc3NhZ2UiLCJFcnJvciIsImNsZWFuQ29udGFjdERhdGEiLCJTdHJpbmciLCJ0cmltIiwiY29uc29sZSIsImxvZyIsImRhdGEiLCJlcnJvciIsImZyb20iLCJpbnNlcnQiLCJzZWxlY3QiLCJzaW5nbGUiLCJjb2RlIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZWNvcmQiLCJvayIsImVycm9yRGF0YSIsImpzb24iLCJzdGF0dXMiLCJyZXN1bHQiLCJzZW5kRGlzY29yZE5vdGlmaWNhdGlvbiIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJkaXNjb3JkRXJyb3IiLCJ3YXJuIiwic2hvd05vdGlmaWNhdGlvbiIsInJlc2V0IiwidHlwZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJub3RpZiIsInJlbW92ZSIsIm5vdGlmaWNhdGlvbiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJPYmplY3QiLCJhc3NpZ24iLCJzdHlsZSIsInBvc2l0aW9uIiwidG9wIiwicmlnaHQiLCJwYWRkaW5nIiwiYm9yZGVyUmFkaXVzIiwiY29sb3IiLCJmb250V2VpZ2h0IiwiekluZGV4IiwibWF4V2lkdGgiLCJiYWNrZ3JvdW5kQ29sb3IiLCJhcHBlbmRDaGlsZCIsInNldFRpbWVvdXQiLCJwYXJlbnROb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhY3RGb3JtIiwiaW5pdENvbnRhY3RGb3JtIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwibSIsIk8iLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJsZW5ndGgiLCJmdWxmaWxsZWQiLCJqIiwia2V5cyIsImV2ZXJ5Iiwia2V5Iiwic3BsaWNlIiwiciIsImdldFByb3RvdHlwZU9mIiwib2JqIiwidCIsInZhbHVlIiwibW9kZSIsInRoaXMiLCJfX2VzTW9kdWxlIiwidGhlbiIsIm5zIiwiY3JlYXRlIiwiZGVmIiwiY3VycmVudCIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZCIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZiIsImUiLCJjaHVua0lkIiwiUHJvbWlzZSIsImFsbCIsInJlZHVjZSIsInByb21pc2VzIiwidSIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJ3aW5kb3ciLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJsIiwidXJsIiwiZG9uZSIsInB1c2giLCJzY3JpcHQiLCJuZWVkQXR0YWNoIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicyIsImdldEF0dHJpYnV0ZSIsImNoYXJzZXQiLCJ0aW1lb3V0IiwibmMiLCJzZXRBdHRyaWJ1dGUiLCJzcmMiLCJvblNjcmlwdENvbXBsZXRlIiwicHJldiIsIm9uZXJyb3IiLCJvbmxvYWQiLCJjbGVhclRpbWVvdXQiLCJkb25lRm5zIiwicmVtb3ZlQ2hpbGQiLCJiaW5kIiwiaGVhZCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiY3VycmVudFNjcmlwdCIsInRhZ05hbWUiLCJ0b1VwcGVyQ2FzZSIsInRlc3QiLCJyZXBsYWNlIiwicCIsImluc3RhbGxlZENodW5rcyIsImluc3RhbGxlZENodW5rRGF0YSIsInByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZXJyb3JUeXBlIiwicmVhbFNyYyIsInJlcXVlc3QiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwic29tZSIsImlkIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwic2VsZiIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9