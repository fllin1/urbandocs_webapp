(()=>{"use strict";var e,t,r,o,n,i={6528:(e,t,r)=>{var o=r(9251),n=r(9660);async function i(e){e.preventDefault();const t=e.target.querySelector('button[type="submit"]'),r=t.textContent;t.disabled=!0,t.textContent="Envoi en cours...";try{const t=new FormData(e.target),r={name:t.get("name"),email:t.get("email"),subject:t.get("subject"),message:t.get("message")};if(!(r.name&&r.email&&r.subject&&r.message))throw new Error("Tous les champs sont requis");const o={name:String(r.name).trim(),email:String(r.email).trim(),subject:String(r.subject).trim(),message:String(r.message).trim()};console.log("Submitting contact data:",o);const{data:i,error:s}=await n.N.from("support_messages").insert(o).select().single();if(s)throw console.error("Supabase error:",s),"42501"===s.code?new Error("Erreur de permission. Veuillez réessayer ou nous contacter directement."):"PGRST301"===s.code?new Error("Erreur de validation des données. Vérifiez vos informations."):new Error(`Erreur lors de l'enregistrement: ${s.message}`);console.log("Successfully inserted to database:",i);try{await async function(e){try{const t=await fetch("https://ofeyssipibktmbfebibo.supabase.co/functions/v1/discord-contact-notification",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9mZXlzc2lwaWJrdG1iZmViaWJvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM5MjUwOTQsImV4cCI6MjA1OTUwMTA5NH0.w71CAKfolktzRl-TmLVhHYaEbhCfVk4A7YraEUCglrU"},body:JSON.stringify({record:e})});if(!t.ok){const e=await t.json();throw new Error(`Discord API error: ${t.status} - ${e.error||"Unknown error"}`)}const r=await t.json();return console.log("Discord notification sent successfully:",r),r}catch(e){throw console.error("Failed to send Discord notification:",e),e}}({...i,created_at:i.created_at||(new Date).toISOString()})}catch(e){console.warn("Discord notification failed:",e)}a("Message envoyé avec succès ! Nous vous répondrons bientôt.","success"),e.target.reset()}catch(e){console.error("Error sending contact message:",e),a(e.message||"Erreur lors de l'envoi du message. Veuillez réessayer.","error")}finally{t.disabled=!1,t.textContent=r}}function a(e,t="info"){document.querySelectorAll(".notification").forEach((e=>e.remove()));const r=document.createElement("div");return r.className=`notification notification-${t}`,r.textContent=e,Object.assign(r.style,{position:"fixed",top:"20px",right:"20px",padding:"15px 20px",borderRadius:"5px",color:"white",fontWeight:"bold",zIndex:"10000",maxWidth:"400px",backgroundColor:"success"===t?"#10b981":"error"===t?"#ef4444":"#3b82f6"}),document.body.appendChild(r),setTimeout((()=>{r.parentNode&&r.remove()}),5e3),r}document.addEventListener("DOMContentLoaded",(()=>{try{(0,o.Mt)(),!function(){const e=document.querySelector(".contact-form");return!!e&&(e.addEventListener("submit",i),console.log("Contact form initialized"),!0)}()?console.warn("Contact form not found on this page"):console.log("Contact page initialized successfully")}catch(e){console.error("Error initializing contact page:",e)}}))}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return i[e].call(r.exports,r,r.exports,s),r.exports}s.m=i,e=[],s.O=(t,r,o,n)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,o,n]=e[u],a=!0,c=0;c<r.length;c++)(!1&n||i>=n)&&Object.keys(s.O).every((e=>s.O[e](r[c])))?r.splice(c--,1):(a=!1,n<i&&(i=n));if(a){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,o,n]},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var n=Object.create(null);s.r(n);var i={};t=t||[null,r({}),r([]),r(r)];for(var a=2&o&&e;"object"==typeof a&&!~t.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,s.d(n,i),n},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,r)=>(s.f[r](e,t),t)),[])),s.u=e=>"js/"+e+".chunk.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},n="urbandocs_webapp:",s.l=(e,t,r,i)=>{if(o[e])o[e].push(t);else{var a,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==n+r){a=d;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",n+r),a.src=e),o[e]=[t];var f=(t,r)=>{a.onerror=a.onload=null,clearTimeout(m);var n=o[e];if(delete o[e],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(r))),t)return t(r)},m=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),c&&document.head.appendChild(a)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.j=353,s.p="/",(()=>{var e={353:0};s.f.j=(t,r)=>{var o=s.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise(((r,n)=>o=e[t]=[r,n]));r.push(o[2]=n);var i=s.p+s.u(t),a=new Error;s.l(i,(r=>{if(s.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",a.name="ChunkLoadError",a.type=n,a.request=i,o[1](a)}}),"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,r)=>{var o,n,[i,a,c]=r,l=0;if(i.some((t=>0!==e[t]))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(c)var u=c(s)}for(t&&t(r);l<i.length;l++)n=i[l],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},r=self.webpackChunkurbandocs_webapp=self.webpackChunkurbandocs_webapp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var c=s.O(void 0,[76],(()=>s(6528)));c=s.O(c)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R3VDLFNBQVdzRyxFQUFTQSxFQUUvRCxHQVlIN0MsRUFBb0JTLEVBQUVTLEVBQUsyQixHQUEwQyxJQUE3QndDLEVBQWdCeEMsR0FHeEQsSUFBSWdELEVBQXVCLENBQUNDLEVBQTRCeEosS0FDdkQsSUFHSTJELEVBQVU0QyxHQUhUbkMsRUFBVXFGLEVBQWFDLEdBQVcxSixFQUdoQnlFLEVBQUksRUFDM0IsR0FBR0wsRUFBU3VGLE1BQU1DLEdBQWdDLElBQXhCYixFQUFnQmEsS0FBYSxDQUN0RCxJQUFJakcsS0FBWThGLEVBQ1ovRixFQUFvQndDLEVBQUV1RCxFQUFhOUYsS0FDckNELEVBQW9CUSxFQUFFUCxHQUFZOEYsRUFBWTlGLElBR2hELEdBQUcrRixFQUFTLElBQUl0SSxFQUFTc0ksRUFBUWhHLEVBQ2xDLENBRUEsSUFERzhGLEdBQTRCQSxFQUEyQnhKLEdBQ3JEeUUsRUFBSUwsRUFBU00sT0FBUUQsSUFDekI4QixFQUFVbkMsRUFBU0ssR0FDaEJmLEVBQW9Cd0MsRUFBRTZDLEVBQWlCeEMsSUFBWXdDLEVBQWdCeEMsSUFDckV3QyxFQUFnQnhDLEdBQVMsS0FFMUJ3QyxFQUFnQnhDLEdBQVcsRUFFNUIsT0FBTzdDLEVBQW9CUyxFQUFFL0MsSUFHMUJ5SSxFQUFxQkMsS0FBbUMsNkJBQUlBLEtBQW1DLDhCQUFLLEdBQ3hHRCxFQUFtQjdILFFBQVF1SCxFQUFxQmIsS0FBSyxLQUFNLElBQzNEbUIsRUFBbUJ0QyxLQUFPZ0MsRUFBcUJiLEtBQUssS0FBTW1CLEVBQW1CdEMsS0FBS21CLEtBQUttQixHLEtDbEZ2RixJQUFJRSxFQUFzQnJHLEVBQW9CUyxPQUFFTixFQUFXLENBQUMsS0FBSyxJQUFPSCxFQUFvQixRQUM1RnFHLEVBQXNCckcsRUFBb0JTLEVBQUU0RixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2NyZWF0ZSBmYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvbG9hZCBzY3JpcHQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC8uL3NyYy9qcy9tb2R1bGVzL2NvbnRhY3QtZm9ybS5qcyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwLy4vc3JjL2pzL2VudHJpZXMvY29udGFjdC5qcyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2Vuc3VyZSBjaHVuayIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9ydW50aW1lSWQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkgPT4ge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldID0gZGVmZXJyZWRbaV07XG5cdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjaHVua0lkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKChwcmlvcml0eSAmIDEgPT09IDAgfHwgbm90RnVsZmlsbGVkID49IHByaW9yaXR5KSAmJiBPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLk8pLmV2ZXJ5KChrZXkpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSkpKSkge1xuXHRcdFx0XHRjaHVua0lkcy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihwcmlvcml0eSA8IG5vdEZ1bGZpbGxlZCkgbm90RnVsZmlsbGVkID0gcHJpb3JpdHk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWQuc3BsaWNlKGktLSwgMSlcblx0XHRcdHZhciByID0gZm4oKTtcblx0XHRcdGlmIChyICE9PSB1bmRlZmluZWQpIHJlc3VsdCA9IHI7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59OyIsInZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiA/IChvYmopID0+IChPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSkgOiAob2JqKSA9PiAob2JqLl9fcHJvdG9fXyk7XG52YXIgbGVhZlByb3RvdHlwZXM7XG4vLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3Rcbi8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuLy8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4vLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3Rcbi8vIG1vZGUgJiAxNjogcmV0dXJuIHZhbHVlIHdoZW4gaXQncyBQcm9taXNlLWxpa2Vcbi8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbl9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG5cdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IHRoaXModmFsdWUpO1xuXHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuXHRpZih0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlKSB7XG5cdFx0aWYoKG1vZGUgJiA0KSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG5cdFx0aWYoKG1vZGUgJiAxNikgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbicpIHJldHVybiB2YWx1ZTtcblx0fVxuXHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuXHR2YXIgZGVmID0ge307XG5cdGxlYWZQcm90b3R5cGVzID0gbGVhZlByb3RvdHlwZXMgfHwgW251bGwsIGdldFByb3RvKHt9KSwgZ2V0UHJvdG8oW10pLCBnZXRQcm90byhnZXRQcm90byldO1xuXHRmb3IodmFyIGN1cnJlbnQgPSBtb2RlICYgMiAmJiB2YWx1ZTsgdHlwZW9mIGN1cnJlbnQgPT0gJ29iamVjdCcgJiYgIX5sZWFmUHJvdG90eXBlcy5pbmRleE9mKGN1cnJlbnQpOyBjdXJyZW50ID0gZ2V0UHJvdG8oY3VycmVudCkpIHtcblx0XHRPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjdXJyZW50KS5mb3JFYWNoKChrZXkpID0+IChkZWZba2V5XSA9ICgpID0+ICh2YWx1ZVtrZXldKSkpO1xuXHR9XG5cdGRlZlsnZGVmYXVsdCddID0gKCkgPT4gKHZhbHVlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBkZWYpO1xuXHRyZXR1cm4gbnM7XG59OyIsInZhciBpblByb2dyZXNzID0ge307XG52YXIgZGF0YVdlYnBhY2tQcmVmaXggPSBcInVyYmFuZG9jc193ZWJhcHA6XCI7XG4vLyBsb2FkU2NyaXB0IGZ1bmN0aW9uIHRvIGxvYWQgYSBzY3JpcHQgdmlhIHNjcmlwdCB0YWdcbl9fd2VicGFja19yZXF1aXJlX18ubCA9ICh1cmwsIGRvbmUsIGtleSwgY2h1bmtJZCkgPT4ge1xuXHRpZihpblByb2dyZXNzW3VybF0pIHsgaW5Qcm9ncmVzc1t1cmxdLnB1c2goZG9uZSk7IHJldHVybjsgfVxuXHR2YXIgc2NyaXB0LCBuZWVkQXR0YWNoO1xuXHRpZihrZXkgIT09IHVuZGVmaW5lZCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHNjcmlwdHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBzID0gc2NyaXB0c1tpXTtcblx0XHRcdGlmKHMuZ2V0QXR0cmlidXRlKFwic3JjXCIpID09IHVybCB8fCBzLmdldEF0dHJpYnV0ZShcImRhdGEtd2VicGFja1wiKSA9PSBkYXRhV2VicGFja1ByZWZpeCArIGtleSkgeyBzY3JpcHQgPSBzOyBicmVhazsgfVxuXHRcdH1cblx0fVxuXHRpZighc2NyaXB0KSB7XG5cdFx0bmVlZEF0dGFjaCA9IHRydWU7XG5cdFx0c2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cblx0XHRzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XG5cdFx0c2NyaXB0LnRpbWVvdXQgPSAxMjA7XG5cdFx0aWYgKF9fd2VicGFja19yZXF1aXJlX18ubmMpIHtcblx0XHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKTtcblx0XHR9XG5cdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcImRhdGEtd2VicGFja1wiLCBkYXRhV2VicGFja1ByZWZpeCArIGtleSk7XG5cblx0XHRzY3JpcHQuc3JjID0gdXJsO1xuXHR9XG5cdGluUHJvZ3Jlc3NbdXJsXSA9IFtkb25lXTtcblx0dmFyIG9uU2NyaXB0Q29tcGxldGUgPSAocHJldiwgZXZlbnQpID0+IHtcblx0XHQvLyBhdm9pZCBtZW0gbGVha3MgaW4gSUUuXG5cdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcblx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0dmFyIGRvbmVGbnMgPSBpblByb2dyZXNzW3VybF07XG5cdFx0ZGVsZXRlIGluUHJvZ3Jlc3NbdXJsXTtcblx0XHRzY3JpcHQucGFyZW50Tm9kZSAmJiBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHRcdGRvbmVGbnMgJiYgZG9uZUZucy5mb3JFYWNoKChmbikgPT4gKGZuKGV2ZW50KSkpO1xuXHRcdGlmKHByZXYpIHJldHVybiBwcmV2KGV2ZW50KTtcblx0fVxuXHR2YXIgdGltZW91dCA9IHNldFRpbWVvdXQob25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHVuZGVmaW5lZCwgeyB0eXBlOiAndGltZW91dCcsIHRhcmdldDogc2NyaXB0IH0pLCAxMjAwMDApO1xuXHRzY3JpcHQub25lcnJvciA9IG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCBzY3JpcHQub25lcnJvcik7XG5cdHNjcmlwdC5vbmxvYWQgPSBvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgc2NyaXB0Lm9ubG9hZCk7XG5cdG5lZWRBdHRhY2ggJiYgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xufTsiLCIvLyBzcmMvanMvbW9kdWxlcy9jb250YWN0LWZvcm0uanMgLSBDb250YWN0IGZvcm0gbW9kdWxlXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gXCIuLi9zdXBhYmFzZS1jbGllbnQuanNcIjtcblxuLy8gQ29udGFjdCBmb3JtIGhhbmRsZXJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVDb250YWN0U3VibWl0KGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XG4gIGNvbnN0IG9yaWdpbmFsVGV4dCA9IHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcblxuICAvLyBEaXNhYmxlIGJ1dHRvbiBhbmQgc2hvdyBsb2FkaW5nIHN0YXRlXG4gIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRW52b2kgZW4gY291cnMuLi5cIjtcblxuICB0cnkge1xuICAgIC8vIEdldCBmb3JtIGRhdGFcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShldmVudC50YXJnZXQpO1xuICAgIGNvbnN0IGNvbnRhY3REYXRhID0ge1xuICAgICAgbmFtZTogZm9ybURhdGEuZ2V0KFwibmFtZVwiKSxcbiAgICAgIGVtYWlsOiBmb3JtRGF0YS5nZXQoXCJlbWFpbFwiKSxcbiAgICAgIHN1YmplY3Q6IGZvcm1EYXRhLmdldChcInN1YmplY3RcIiksXG4gICAgICBtZXNzYWdlOiBmb3JtRGF0YS5nZXQoXCJtZXNzYWdlXCIpLFxuICAgIH07XG5cbiAgICAvLyBWYWxpZGF0ZSB0aGF0IGFsbCBmaWVsZHMgaGF2ZSB2YWx1ZXNcbiAgICBpZiAoXG4gICAgICAhY29udGFjdERhdGEubmFtZSB8fFxuICAgICAgIWNvbnRhY3REYXRhLmVtYWlsIHx8XG4gICAgICAhY29udGFjdERhdGEuc3ViamVjdCB8fFxuICAgICAgIWNvbnRhY3REYXRhLm1lc3NhZ2VcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRvdXMgbGVzIGNoYW1wcyBzb250IHJlcXVpc1wiKTtcbiAgICB9XG5cbiAgICAvLyBDbGVhbiBhbmQgdmFsaWRhdGUgdGhlIGRhdGFcbiAgICBjb25zdCBjbGVhbkNvbnRhY3REYXRhID0ge1xuICAgICAgbmFtZTogU3RyaW5nKGNvbnRhY3REYXRhLm5hbWUpLnRyaW0oKSxcbiAgICAgIGVtYWlsOiBTdHJpbmcoY29udGFjdERhdGEuZW1haWwpLnRyaW0oKSxcbiAgICAgIHN1YmplY3Q6IFN0cmluZyhjb250YWN0RGF0YS5zdWJqZWN0KS50cmltKCksXG4gICAgICBtZXNzYWdlOiBTdHJpbmcoY29udGFjdERhdGEubWVzc2FnZSkudHJpbSgpLFxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZyhcIlN1Ym1pdHRpbmcgY29udGFjdCBkYXRhOlwiLCBjbGVhbkNvbnRhY3REYXRhKTtcblxuICAgIC8vIEluc2VydCBpbnRvIFN1cGFiYXNlIGRhdGFiYXNlXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwic3VwcG9ydF9tZXNzYWdlc1wiKVxuICAgICAgLmluc2VydChjbGVhbkNvbnRhY3REYXRhKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJTdXBhYmFzZSBlcnJvcjpcIiwgZXJyb3IpO1xuXG4gICAgICAvLyBQcm92aWRlIHVzZXItZnJpZW5kbHkgZXJyb3IgbWVzc2FnZSBiYXNlZCBvbiBlcnJvciBjb2RlXG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gXCI0MjUwMVwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIkVycmV1ciBkZSBwZXJtaXNzaW9uLiBWZXVpbGxleiByw6llc3NheWVyIG91IG5vdXMgY29udGFjdGVyIGRpcmVjdGVtZW50LlwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLmNvZGUgPT09IFwiUEdSU1QzMDFcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJFcnJldXIgZGUgdmFsaWRhdGlvbiBkZXMgZG9ubsOpZXMuIFbDqXJpZmlleiB2b3MgaW5mb3JtYXRpb25zLlwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycmV1ciBsb3JzIGRlIGwnZW5yZWdpc3RyZW1lbnQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIlN1Y2Nlc3NmdWxseSBpbnNlcnRlZCB0byBkYXRhYmFzZTpcIiwgZGF0YSk7XG5cbiAgICAvLyBTZW5kIERpc2NvcmQgbm90aWZpY2F0aW9uIGRpcmVjdGx5IGZyb20gY2xpZW50XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHNlbmREaXNjb3JkTm90aWZpY2F0aW9uKHtcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgY3JlYXRlZF9hdDogZGF0YS5jcmVhdGVkX2F0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGRpc2NvcmRFcnJvcikge1xuICAgICAgLy8gRG9uJ3QgZmFpbCB0aGUgZW50aXJlIHN1Ym1pc3Npb24gaWYgRGlzY29yZCBmYWlsc1xuICAgICAgY29uc29sZS53YXJuKFwiRGlzY29yZCBub3RpZmljYXRpb24gZmFpbGVkOlwiLCBkaXNjb3JkRXJyb3IpO1xuICAgIH1cblxuICAgIC8vIFN1Y2Nlc3MgZmVlZGJhY2tcbiAgICBzaG93Tm90aWZpY2F0aW9uKFxuICAgICAgXCJNZXNzYWdlIGVudm95w6kgYXZlYyBzdWNjw6hzICEgTm91cyB2b3VzIHLDqXBvbmRyb25zIGJpZW50w7R0LlwiLFxuICAgICAgXCJzdWNjZXNzXCJcbiAgICApO1xuICAgIGV2ZW50LnRhcmdldC5yZXNldCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzZW5kaW5nIGNvbnRhY3QgbWVzc2FnZTpcIiwgZXJyb3IpO1xuXG4gICAgLy8gU2hvdyBzcGVjaWZpYyBlcnJvciBtZXNzYWdlIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGdlbmVyaWMgbWVzc2FnZVxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICBlcnJvci5tZXNzYWdlIHx8IFwiRXJyZXVyIGxvcnMgZGUgbCdlbnZvaSBkdSBtZXNzYWdlLiBWZXVpbGxleiByw6llc3NheWVyLlwiO1xuICAgIHNob3dOb3RpZmljYXRpb24oZXJyb3JNZXNzYWdlLCBcImVycm9yXCIpO1xuICB9IGZpbmFsbHkge1xuICAgIC8vIFJlLWVuYWJsZSBidXR0b25cbiAgICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQ7XG4gIH1cbn1cblxuLy8gU2VuZCBEaXNjb3JkIG5vdGlmaWNhdGlvblxuYXN5bmMgZnVuY3Rpb24gc2VuZERpc2NvcmROb3RpZmljYXRpb24oY29udGFjdERhdGEpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgXCJodHRwczovL29mZXlzc2lwaWJrdG1iZmViaWJvLnN1cGFiYXNlLmNvL2Z1bmN0aW9ucy92MS9kaXNjb3JkLWNvbnRhY3Qtbm90aWZpY2F0aW9uXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyIGV5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUpwYzNNaU9pSnpkWEJoWW1GelpTSXNJbkpsWmlJNkltOW1aWGx6YzJsd2FXSnJkRzFpWm1WaWFXSnZJaXdpY205c1pTSTZJbUZ1YjI0aUxDSnBZWFFpT2pFM05ETTVNalV3T1RRc0ltVjRjQ0k2TWpBMU9UVXdNVEE1TkgwLnc3MUNBS2ZvbGt0elJsLVRtTFZoSFlhRWJoQ2ZWazRBN1lyYUVVQ2dsclVgLCAvLyBhbm9uIGtleVxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgcmVjb3JkOiBjb250YWN0RGF0YSxcbiAgICAgICAgfSksXG4gICAgICB9XG4gICAgKTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYERpc2NvcmQgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke1xuICAgICAgICAgIGVycm9yRGF0YS5lcnJvciB8fCBcIlVua25vd24gZXJyb3JcIlxuICAgICAgICB9YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgY29uc29sZS5sb2coXCJEaXNjb3JkIG5vdGlmaWNhdGlvbiBzZW50IHN1Y2Nlc3NmdWxseTpcIiwgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gc2VuZCBEaXNjb3JkIG5vdGlmaWNhdGlvbjpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIFNpbXBsZSBub3RpZmljYXRpb24gc3lzdGVtXG5leHBvcnQgZnVuY3Rpb24gc2hvd05vdGlmaWNhdGlvbihtZXNzYWdlLCB0eXBlID0gXCJpbmZvXCIpIHtcbiAgLy8gUmVtb3ZlIGV4aXN0aW5nIG5vdGlmaWNhdGlvbnNcbiAgY29uc3QgZXhpc3RpbmdOb3RpZmljYXRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ub3RpZmljYXRpb25cIik7XG4gIGV4aXN0aW5nTm90aWZpY2F0aW9ucy5mb3JFYWNoKChub3RpZikgPT4gbm90aWYucmVtb3ZlKCkpO1xuXG4gIC8vIENyZWF0ZSBub3RpZmljYXRpb24gZWxlbWVudFxuICBjb25zdCBub3RpZmljYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBub3RpZmljYXRpb24uY2xhc3NOYW1lID0gYG5vdGlmaWNhdGlvbiBub3RpZmljYXRpb24tJHt0eXBlfWA7XG4gIG5vdGlmaWNhdGlvbi50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG5cbiAgLy8gQWRkIHN0eWxlc1xuICBPYmplY3QuYXNzaWduKG5vdGlmaWNhdGlvbi5zdHlsZSwge1xuICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXG4gICAgdG9wOiBcIjIwcHhcIixcbiAgICByaWdodDogXCIyMHB4XCIsXG4gICAgcGFkZGluZzogXCIxNXB4IDIwcHhcIixcbiAgICBib3JkZXJSYWRpdXM6IFwiNXB4XCIsXG4gICAgY29sb3I6IFwid2hpdGVcIixcbiAgICBmb250V2VpZ2h0OiBcImJvbGRcIixcbiAgICB6SW5kZXg6IFwiMTAwMDBcIixcbiAgICBtYXhXaWR0aDogXCI0MDBweFwiLFxuICAgIGJhY2tncm91bmRDb2xvcjpcbiAgICAgIHR5cGUgPT09IFwic3VjY2Vzc1wiID8gXCIjMTBiOTgxXCIgOiB0eXBlID09PSBcImVycm9yXCIgPyBcIiNlZjQ0NDRcIiA6IFwiIzNiODJmNlwiLFxuICB9KTtcblxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vdGlmaWNhdGlvbik7XG5cbiAgLy8gQXV0byByZW1vdmUgYWZ0ZXIgNSBzZWNvbmRzXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGlmIChub3RpZmljYXRpb24ucGFyZW50Tm9kZSkge1xuICAgICAgbm90aWZpY2F0aW9uLnJlbW92ZSgpO1xuICAgIH1cbiAgfSwgNTAwMCk7XG5cbiAgcmV0dXJuIG5vdGlmaWNhdGlvbjtcbn1cblxuLy8gSW5pdGlhbGl6ZSBjb250YWN0IGZvcm1cbmV4cG9ydCBmdW5jdGlvbiBpbml0Q29udGFjdEZvcm0oKSB7XG4gIGNvbnN0IGNvbnRhY3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWN0LWZvcm1cIik7XG4gIGlmIChjb250YWN0Rm9ybSkge1xuICAgIGNvbnRhY3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQ29udGFjdFN1Ym1pdCk7XG4gICAgY29uc29sZS5sb2coXCJDb250YWN0IGZvcm0gaW5pdGlhbGl6ZWRcIik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwiLy8gc3JjL2pzL2VudHJpZXMvY29udGFjdC5qcyAtIENvbnRhY3QgcGFnZSBlbnRyeSBwb2ludFxuaW1wb3J0IHsgaW5pdEhlYWRlckF1dGggfSBmcm9tIFwiLi4vYXV0aC9oZWFkZXItYXV0aC5qc1wiO1xuaW1wb3J0IHsgaW5pdENvbnRhY3RGb3JtIH0gZnJvbSBcIi4uL21vZHVsZXMvY29udGFjdC1mb3JtLmpzXCI7XG5cbi8vIEluaXRpYWxpemUgaGVhZGVyIGF1dGhlbnRpY2F0aW9uIGFuZCBjb250YWN0IGZvcm0gd2hlbiBET00gaXMgbG9hZGVkXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gSW5pdGlhbGl6ZSBoZWFkZXIgYXV0aGVudGljYXRpb25cbiAgICBpbml0SGVhZGVyQXV0aCgpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBjb250YWN0IGZvcm1cbiAgICBjb25zdCBjb250YWN0Rm9ybUluaXRpYWxpemVkID0gaW5pdENvbnRhY3RGb3JtKCk7XG5cbiAgICBpZiAoY29udGFjdEZvcm1Jbml0aWFsaXplZCkge1xuICAgICAgY29uc29sZS5sb2coXCJDb250YWN0IHBhZ2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJDb250YWN0IGZvcm0gbm90IGZvdW5kIG9uIHRoaXMgcGFnZVwiKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluaXRpYWxpemluZyBjb250YWN0IHBhZ2U6XCIsIGVycm9yKTtcbiAgfVxufSk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZiA9IHt9O1xuLy8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuLy8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSAoY2h1bmtJZCkgPT4ge1xuXHRyZXR1cm4gUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5mKS5yZWR1Y2UoKHByb21pc2VzLCBrZXkpID0+IHtcblx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmZba2V5XShjaHVua0lkLCBwcm9taXNlcyk7XG5cdFx0cmV0dXJuIHByb21pc2VzO1xuXHR9LCBbXSkpO1xufTsiLCIvLyBUaGlzIGZ1bmN0aW9uIGFsbG93IHRvIHJlZmVyZW5jZSBhc3luYyBjaHVua3Ncbl9fd2VicGFja19yZXF1aXJlX18udSA9IChjaHVua0lkKSA9PiB7XG5cdC8vIHJldHVybiB1cmwgZm9yIGZpbGVuYW1lcyBiYXNlZCBvbiB0ZW1wbGF0ZVxuXHRyZXR1cm4gXCJqcy9cIiArIGNodW5rSWQgKyBcIi5jaHVuay5qc1wiO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmogPSAzNTM7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDM1MzogMFxufTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5mLmogPSAoY2h1bmtJZCwgcHJvbWlzZXMpID0+IHtcblx0XHQvLyBKU09OUCBjaHVuayBsb2FkaW5nIGZvciBqYXZhc2NyaXB0XG5cdFx0dmFyIGluc3RhbGxlZENodW5rRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpID8gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdIDogdW5kZWZpbmVkO1xuXHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSAhPT0gMCkgeyAvLyAwIG1lYW5zIFwiYWxyZWFkeSBpbnN0YWxsZWRcIi5cblxuXHRcdFx0Ly8gYSBQcm9taXNlIG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cblx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuXHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZih0cnVlKSB7IC8vIGFsbCBjaHVua3MgaGF2ZSBKU1xuXHRcdFx0XHRcdC8vIHNldHVwIFByb21pc2UgaW4gY2h1bmsgY2FjaGVcblx0XHRcdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IChpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbcmVzb2x2ZSwgcmVqZWN0XSkpO1xuXHRcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdID0gcHJvbWlzZSk7XG5cblx0XHRcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG5cdFx0XHRcdFx0dmFyIHVybCA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIF9fd2VicGFja19yZXF1aXJlX18udShjaHVua0lkKTtcblx0XHRcdFx0XHQvLyBjcmVhdGUgZXJyb3IgYmVmb3JlIHN0YWNrIHVud291bmQgdG8gZ2V0IHVzZWZ1bCBzdGFja3RyYWNlIGxhdGVyXG5cdFx0XHRcdFx0dmFyIGVycm9yID0gbmV3IEVycm9yKCk7XG5cdFx0XHRcdFx0dmFyIGxvYWRpbmdFbmRlZCA9IChldmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkpIHtcblx0XHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuXHRcdFx0XHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yVHlwZSA9IGV2ZW50ICYmIChldmVudC50eXBlID09PSAnbG9hZCcgPyAnbWlzc2luZycgOiBldmVudC50eXBlKTtcblx0XHRcdFx0XHRcdFx0XHR2YXIgcmVhbFNyYyA9IGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuc3JjO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLm1lc3NhZ2UgPSAnTG9hZGluZyBjaHVuayAnICsgY2h1bmtJZCArICcgZmFpbGVkLlxcbignICsgZXJyb3JUeXBlICsgJzogJyArIHJlYWxTcmMgKyAnKSc7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IubmFtZSA9ICdDaHVua0xvYWRFcnJvcic7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IudHlwZSA9IGVycm9yVHlwZTtcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5yZXF1ZXN0ID0gcmVhbFNyYztcblx0XHRcdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGFbMV0oZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmwodXJsLCBsb2FkaW5nRW5kZWQsIFwiY2h1bmstXCIgKyBjaHVua0lkLCBjaHVua0lkKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cbn07XG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua3VyYmFuZG9jc193ZWJhcHBcIl0gPSBzZWxmW1wid2VicGFja0NodW5rdXJiYW5kb2NzX3dlYmFwcFwiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzc2XSwgKCkgPT4gKF9fd2VicGFja19yZXF1aXJlX18oNjUyOCkpKVxuX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcbiJdLCJuYW1lcyI6WyJkZWZlcnJlZCIsImxlYWZQcm90b3R5cGVzIiwiZ2V0UHJvdG8iLCJpblByb2dyZXNzIiwiZGF0YVdlYnBhY2tQcmVmaXgiLCJhc3luYyIsImhhbmRsZUNvbnRhY3RTdWJtaXQiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3VibWl0QnV0dG9uIiwidGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIm9yaWdpbmFsVGV4dCIsInRleHRDb250ZW50IiwiZGlzYWJsZWQiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiY29udGFjdERhdGEiLCJuYW1lIiwiZ2V0IiwiZW1haWwiLCJzdWJqZWN0IiwibWVzc2FnZSIsIkVycm9yIiwiY2xlYW5Db250YWN0RGF0YSIsIlN0cmluZyIsInRyaW0iLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsImluc2VydCIsInNlbGVjdCIsInNpbmdsZSIsImNvZGUiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInJlY29yZCIsIm9rIiwiZXJyb3JEYXRhIiwianNvbiIsInN0YXR1cyIsInJlc3VsdCIsInNlbmREaXNjb3JkTm90aWZpY2F0aW9uIiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImRpc2NvcmRFcnJvciIsIndhcm4iLCJzaG93Tm90aWZpY2F0aW9uIiwicmVzZXQiLCJ0eXBlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsIm5vdGlmIiwicmVtb3ZlIiwibm90aWZpY2F0aW9uIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIk9iamVjdCIsImFzc2lnbiIsInN0eWxlIiwicG9zaXRpb24iLCJ0b3AiLCJyaWdodCIsInBhZGRpbmciLCJib3JkZXJSYWRpdXMiLCJjb2xvciIsImZvbnRXZWlnaHQiLCJ6SW5kZXgiLCJtYXhXaWR0aCIsImJhY2tncm91bmRDb2xvciIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsInBhcmVudE5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiY29udGFjdEZvcm0iLCJpbml0Q29udGFjdEZvcm0iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJtIiwiTyIsImNodW5rSWRzIiwiZm4iLCJwcmlvcml0eSIsIm5vdEZ1bGZpbGxlZCIsIkluZmluaXR5IiwiaSIsImxlbmd0aCIsImZ1bGZpbGxlZCIsImoiLCJrZXlzIiwiZXZlcnkiLCJrZXkiLCJzcGxpY2UiLCJyIiwiZ2V0UHJvdG90eXBlT2YiLCJvYmoiLCJ0IiwidmFsdWUiLCJtb2RlIiwidGhpcyIsIl9fZXNNb2R1bGUiLCJ0aGVuIiwibnMiLCJjcmVhdGUiLCJkZWYiLCJjdXJyZW50IiwiaW5kZXhPZiIsImdldE93blByb3BlcnR5TmFtZXMiLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJmIiwiZSIsImNodW5rSWQiLCJQcm9taXNlIiwiYWxsIiwicmVkdWNlIiwicHJvbWlzZXMiLCJ1IiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsIndpbmRvdyIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImwiLCJ1cmwiLCJkb25lIiwicHVzaCIsInNjcmlwdCIsIm5lZWRBdHRhY2giLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzIiwiZ2V0QXR0cmlidXRlIiwiY2hhcnNldCIsInRpbWVvdXQiLCJuYyIsInNldEF0dHJpYnV0ZSIsInNyYyIsIm9uU2NyaXB0Q29tcGxldGUiLCJwcmV2Iiwib25lcnJvciIsIm9ubG9hZCIsImNsZWFyVGltZW91dCIsImRvbmVGbnMiLCJyZW1vdmVDaGlsZCIsImJpbmQiLCJoZWFkIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJwIiwiaW5zdGFsbGVkQ2h1bmtzIiwiaW5zdGFsbGVkQ2h1bmtEYXRhIiwicHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJlcnJvclR5cGUiLCJyZWFsU3JjIiwicmVxdWVzdCIsIndlYnBhY2tKc29ucENhbGxiYWNrIiwicGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24iLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiaWQiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiX193ZWJwYWNrX2V4cG9ydHNfXyJdLCJzb3VyY2VSb290IjoiIn0=