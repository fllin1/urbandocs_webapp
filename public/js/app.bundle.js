(()=>{"use strict";var e,t,n,r,o,i={1900:(e,t,n)=>{var r=n(9660),o=n(1235),i=n(141),s=n(6354);async function c(){const e=s.Aw.get("citySelect"),t=s.Aw.get("citySpinner");if(e){(0,s.Oh)(t,!0),o.n.setLoading(!0);try{const t=await i.K.loadCities();if((0,s.fM)(e,t,"Sélectionnez une ville","Aucune ville disponible","city"))(0,s.wc)("Nouvelle ville disponible ! Retrouvez les synthèses de Lille","success"),o.n.setCities(t);else{const e=null===o.n.getState("user")?"Veuillez vous connecter pour accéder aux données.":"Aucune ville trouvée.";(0,s.wc)(e,"warning")}}catch(t){console.error("Erreur lors du chargement des villes:",t),(0,s.wc)("Erreur de chargement des villes","error"),(0,s.kD)(e,"Erreur chargement")}finally{(0,s.Oh)(t,!1),o.n.setLoading(!1)}}}function a(){return o.n.getState("selectedDocument")}n(3715);var l=n(9251),u=n(2387);let d=null;r.N.auth.onAuthStateChange(((e,t)=>{!function(e){if(d=e,o.n.setUser(e),e){const e=a();e&&e.id?(s.X2&&(s.X2.disabled=!1),(0,s.wc)(`Document trouvé (Source: ${(0,s.rf)(e.source_plu_date)||"Non spécifiée"}). Prêt à consulter.`,"success")):s.X2&&(s.X2.disabled=!0)}else s.X2&&(s.X2.disabled=!0)}(t?.user||null),"SIGNED_OUT"===e?(console.log("App: User signed out"),o.n.resetSelections()):"SIGNED_IN"===e?(console.log("App: User signed in"),s.ss&&s.wZ&&s.zA&&c()):"INITIAL_SESSION"===e?console.log("App: Initial session loaded"):"TOKEN_REFRESHED"===e&&console.log("App: Token refreshed")})),s.ss.addEventListener("change",(e=>{!async function(e){const t=s.Aw.get("zoningSelect"),n=s.Aw.get("zoneSelect"),r=s.Aw.get("zoningSpinner"),c=s.Aw.get("synthesisBtn");if((0,s.kD)(t,"Sélectionnez d'abord une ville"),(0,s.kD)(n,"Sélectionnez d'abord un zonage"),c&&(c.disabled=!0),o.n.clearSelectedDocument(),e){(0,s.Oh)(r,!0),o.n.setLoading(!0);try{const n=await i.K.loadZonings(e);(0,s.fM)(t,n,"Sélectionnez un zonage","Aucun zonage disponible","zoning")?((0,s.wc)(`${n.length} zonages chargés`,"success"),o.n.setZonings(n)):(0,s.wc)("Aucun zonage trouvé pour cette ville.","warning")}catch(e){console.error("Erreur lors du chargement des zonages:",e),(0,s.wc)("Erreur de chargement des zonages","error"),(0,s.kD)(t,"Erreur chargement")}finally{(0,s.Oh)(r,!1),o.n.setLoading(!1)}}else(0,s.wc)("Veuillez sélectionner une ville.","info")}(e.target.value)})),s.wZ.addEventListener("change",(e=>{!async function(e){const t=s.Aw.get("zoneSelect"),n=s.Aw.get("zoneSpinner"),r=s.Aw.get("synthesisBtn");if((0,s.kD)(t,"Sélectionnez d'abord un zonage"),r&&(r.disabled=!0),o.n.clearSelectedDocument(),e){(0,s.Oh)(n,!0),o.n.setLoading(!0);try{const n=await i.K.loadZones(e);(0,s.fM)(t,n,"Sélectionnez une zone","Aucune zone disponible","zone")?((0,s.wc)(`${n.length} zones chargées`,"success"),o.n.setZones(n)):(0,s.wc)("Aucune zone trouvée pour ce zonage.","warning")}catch(e){console.error("Erreur lors du chargement des zones:",e),(0,s.wc)("Erreur de chargement des zones","error"),(0,s.kD)(t,"Erreur chargement")}finally{(0,s.Oh)(n,!1),o.n.setLoading(!1)}}else(0,s.wc)("Veuillez sélectionner un zonage.","info")}(e.target.value)})),s.zA.addEventListener("change",(e=>{const t=e.target.value,n=s.wZ.value;t&&n?async function(e,t,n=null){const r=s.Aw.get("synthesisBtn"),c=s.Aw.get("documentSpinner");if(r&&(r.disabled=!0),o.n.clearSelectedDocument(),!o.n.getState("user"))return(0,s.wc)("Veuillez vous connecter pour accéder aux documents.","warning"),null;if(!e||!t)return(0,s.wc)("Sélection incomplète pour rechercher le document.","info"),null;(0,s.Oh)(c,!0),o.n.setLoading(!0);try{const c=await i.K.findDocument(e,t,n);return c?(o.n.setSelectedDocument(c),r&&(r.disabled=!1),(0,s.wc)("Document trouvé !","success"),c):((0,s.wc)("Aucun document trouvé pour cette sélection.","warning"),null)}catch(e){return console.error("Erreur lors de la recherche du document:",e),(0,s.wc)("Erreur lors de la recherche du document","error"),null}finally{(0,s.Oh)(c,!1),o.n.setLoading(!1)}}(n,t,"7c0f2830-f3fc-4c69-911c-470286f91982"):(0,s.wc)("Veuillez d'abord sélectionner un zoning.","warning")})),s.X2.addEventListener("click",(function(){if(!(0,l.HW)())return(0,s.wc)("Authentification requise pour télécharger.","warning"),void(s.X2.disabled=!0);const e=a();e&&e.id?((0,s.wc)("Ouverture du document...","info"),window.open(`/plu-summary?id=${e.id}`,"_blank"),setTimeout((()=>{s.X2.disabled||(0,s.wc)(`Document trouvé (Source: ${(0,s.rf)(e.source_plu_date)||"Non spécifiée"}). Prêt à consulter.`,"success")}),1500)):((0,s.wc)("Lien du document non disponible.","warning"),s.X2.disabled=!0)})),document.addEventListener("DOMContentLoaded",(async()=>{try{if(!await(0,u.Kv)(!1))return;(0,l.Mt)(),(0,s.kD)(s.ss,"Chargement..."),(0,s.kD)(s.wZ,"Sélectionnez d'abord une ville"),(0,s.kD)(s.zA,"Sélectionnez d'abord un zonage"),s.X2&&(s.X2.disabled=!0),s.ss&&s.wZ&&s.zA&&((0,s.wc)("Initialisation...","info"),await c())}catch(e){console.error("Error initializing app:",e)}}))},6354:(e,t,n)=>{n.d(t,{Aw:()=>i,Oh:()=>c,X2:()=>h,fM:()=>u,kD:()=>a,rf:()=>l,ss:()=>d,wZ:()=>g,wc:()=>s,zA:()=>p}),n(4587);const r={showToast:(e,t)=>console.log(`Toast: ${e} (${t})`)},o={setUIState:()=>{},setLoading:()=>{}},i=new class{constructor(){this.elements=new Map,this.initializeElements()}initializeElements(){this.register("citySelect","citySelect"),this.register("zoningSelect","zoningSelect"),this.register("zoneSelect","zoneSelect"),this.register("typologieSelect","typologieSelect"),this.register("synthesisBtn","synthesisBtn"),this.register("statusMessage","statusMessage"),this.register("citySpinner","citySpinner"),this.register("zoningSpinner","zoningSpinner"),this.register("zoneSpinner","zoneSpinner"),this.register("typologieSpinner","typologieSpinner"),this.register("documentSpinner","documentSpinner"),this.register("userStatus","userStatus"),this.register("logoutBtn","logoutBtn"),this.register("loginLink","loginLink"),this.register("signupLink","signupLink")}register(e,t){const n=document.getElementById(t);n&&this.elements.set(e,n)}get(e){return this.elements.get(e)||null}exists(e){return this.elements.has(e)&&null!==this.elements.get(e)}};function s(e,t="info"){const n=i.get("statusMessage");if(n&&(n.textContent=e,n.className=`status-message alert alert-${t}`,n.classList.remove("d-none")),"error"===t||"warning"===t)try{r.showToast(e,t,8e3)}catch(e){console.warn("Toast not available:",e)}try{o.setUIState(t,e)}catch(e){console.warn("State manager not available:",e)}}function c(e,t){const n="string"==typeof e?i.get(e):e;n&&(n.classList.toggle("d-none",!t),n.classList.toggle("hidden",!t));try{o.setLoading(t)}catch(e){console.warn("State manager not available:",e)}}function a(e,t){const n="string"==typeof e?i.get(e):e;n&&(n.innerHTML=`<option value="">${t||"Sélectionnez une option"}</option>`,n.disabled=!0,n.classList.remove("error"))}function l(e){return e?e.replace(/_/g," ").replace(/(^|\s)\w/g,(e=>e.toUpperCase())).trim():""}function u(e,t,n,r,o){const s="string"==typeof e?i.get(e):e;if(!s)return console.warn(`Select element not found: ${e}`),!1;if(a(s,n),!t||0===t.length)return s.innerHTML=`<option value="">${r}</option>`,s.disabled=!0,!1;const c=document.createDocumentFragment(),u=document.createElement("option");return u.value="",u.textContent=n,u.disabled=!0,u.selected=!0,c.appendChild(u),t.forEach((e=>{const t=document.createElement("option");t.value=e.id;let n="";n="city"===o?l(e.name):e.name,t.textContent=n,t.setAttribute("data-raw-name",e.name),c.appendChild(t)})),s.innerHTML="",s.appendChild(c),s.disabled=!1,s.classList.add("fade-in"),!0}const d=i.get("citySelect"),g=i.get("zoningSelect"),p=i.get("zoneSelect"),h=(i.get("typologieSelect"),i.get("synthesisBtn"));i.get("statusMessage"),i.get("citySpinner"),i.get("zoningSpinner"),i.get("zoneSpinner"),i.get("typologieSpinner"),i.get("documentSpinner"),i.get("userStatus"),i.get("logoutBtn"),i.get("loginLink"),i.get("signupLink")}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return i[e].call(n.exports,n,n.exports,c),n.exports}c.m=i,e=[],c.O=(t,n,r,o)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,r,o]=e[u],s=!0,a=0;a<n.length;a++)(!1&o||i>=o)&&Object.keys(c.O).every((e=>c.O[e](n[a])))?n.splice(a--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);c.r(o);var i={};t=t||[null,n({}),n([]),n(n)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,c.d(o,i),o},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,n)=>(c.f[n](e,t),t)),[])),c.u=e=>"js/"+e+".chunk.js",c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},o="urbandocs_webapp:",c.l=(e,t,n,i)=>{if(r[e])r[e].push(t);else{var s,a;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==o+n){s=d;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.setAttribute("data-webpack",o+n),s.src=e),r[e]=[t];var g=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var o=r[e];if(delete r[e],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},p=setTimeout(g.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=g.bind(null,s.onerror),s.onload=g.bind(null,s.onload),a&&document.head.appendChild(s)}},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.j=524,c.p="/",(()=>{var e={209:0,524:0};c.f.j=(t,n)=>{var r=c.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=e[t]=[n,o]));n.push(r[2]=o);var i=c.p+c.u(t),s=new Error;c.l(i,(n=>{if(c.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}}),"chunk-"+t,t)}},c.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[i,s,a]=n,l=0;if(i.some((t=>0!==e[t]))){for(r in s)c.o(s,r)&&(c.m[r]=s[r]);if(a)var u=a(c)}for(t&&t(n);l<i.length;l++)o=i[l],c.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return c.O(u)},n=self.webpackChunkurbandocs_webapp=self.webpackChunkurbandocs_webapp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=c.O(void 0,[76,671],(()=>c(1900)));a=c.O(a)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUMsNkJBQUlBLEtBQW1DLDhCQUFLLEdBQ3hHRCxFQUFtQnhHLFFBQVFtRyxFQUFxQmQsS0FBSyxLQUFNLElBQzNEbUIsRUFBbUJ0QyxLQUFPaUMsRUFBcUJkLEtBQUssS0FBTW1CLEVBQW1CdEMsS0FBS21CLEtBQUttQixHLEtDbkZ2RixJQUFJRSxFQUFzQm5HLEVBQW9CUyxPQUFFTixFQUFXLENBQUMsR0FBRyxNQUFNLElBQU9ILEVBQW9CLFFBQ2hHbUcsRUFBc0JuRyxFQUFvQlMsRUFBRTBGLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvY3JlYXRlIGZha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9sb2FkIHNjcmlwdCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwLy4vc3JjL2pzL2FwaS5qcyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwLy4vc3JjL2pzL2FwcC5qcyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwLy4vc3JjL2pzL3VpLmpzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvZW5zdXJlIGNodW5rIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2dldCBqYXZhc2NyaXB0IGNodW5rIGZpbGVuYW1lIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL3J1bnRpbWVJZCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwidmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mID8gKG9iaikgPT4gKE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopKSA6IChvYmopID0+IChvYmouX19wcm90b19fKTtcbnZhciBsZWFmUHJvdG90eXBlcztcbi8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuLy8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4vLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbi8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuLy8gbW9kZSAmIDE2OiByZXR1cm4gdmFsdWUgd2hlbiBpdCdzIFByb21pc2UtbGlrZVxuLy8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuX193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcblx0aWYobW9kZSAmIDEpIHZhbHVlID0gdGhpcyh2YWx1ZSk7XG5cdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG5cdGlmKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUpIHtcblx0XHRpZigobW9kZSAmIDQpICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcblx0XHRpZigobW9kZSAmIDE2KSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHZhbHVlO1xuXHR9XG5cdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG5cdHZhciBkZWYgPSB7fTtcblx0bGVhZlByb3RvdHlwZXMgPSBsZWFmUHJvdG90eXBlcyB8fCBbbnVsbCwgZ2V0UHJvdG8oe30pLCBnZXRQcm90byhbXSksIGdldFByb3RvKGdldFByb3RvKV07XG5cdGZvcih2YXIgY3VycmVudCA9IG1vZGUgJiAyICYmIHZhbHVlOyB0eXBlb2YgY3VycmVudCA9PSAnb2JqZWN0JyAmJiAhfmxlYWZQcm90b3R5cGVzLmluZGV4T2YoY3VycmVudCk7IGN1cnJlbnQgPSBnZXRQcm90byhjdXJyZW50KSkge1xuXHRcdE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGN1cnJlbnQpLmZvckVhY2goKGtleSkgPT4gKGRlZltrZXldID0gKCkgPT4gKHZhbHVlW2tleV0pKSk7XG5cdH1cblx0ZGVmWydkZWZhdWx0J10gPSAoKSA9PiAodmFsdWUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGRlZik7XG5cdHJldHVybiBucztcbn07IiwidmFyIGluUHJvZ3Jlc3MgPSB7fTtcbnZhciBkYXRhV2VicGFja1ByZWZpeCA9IFwidXJiYW5kb2NzX3dlYmFwcDpcIjtcbi8vIGxvYWRTY3JpcHQgZnVuY3Rpb24gdG8gbG9hZCBhIHNjcmlwdCB2aWEgc2NyaXB0IHRhZ1xuX193ZWJwYWNrX3JlcXVpcmVfXy5sID0gKHVybCwgZG9uZSwga2V5LCBjaHVua0lkKSA9PiB7XG5cdGlmKGluUHJvZ3Jlc3NbdXJsXSkgeyBpblByb2dyZXNzW3VybF0ucHVzaChkb25lKTsgcmV0dXJuOyB9XG5cdHZhciBzY3JpcHQsIG5lZWRBdHRhY2g7XG5cdGlmKGtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2NyaXB0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIHMgPSBzY3JpcHRzW2ldO1xuXHRcdFx0aWYocy5nZXRBdHRyaWJ1dGUoXCJzcmNcIikgPT0gdXJsIHx8IHMuZ2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIpID09IGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KSB7IHNjcmlwdCA9IHM7IGJyZWFrOyB9XG5cdFx0fVxuXHR9XG5cdGlmKCFzY3JpcHQpIHtcblx0XHRuZWVkQXR0YWNoID0gdHJ1ZTtcblx0XHRzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuXHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04Jztcblx0XHRzY3JpcHQudGltZW91dCA9IDEyMDtcblx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5uYykge1xuXHRcdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIF9fd2VicGFja19yZXF1aXJlX18ubmMpO1xuXHRcdH1cblx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIsIGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KTtcblxuXHRcdHNjcmlwdC5zcmMgPSB1cmw7XG5cdH1cblx0aW5Qcm9ncmVzc1t1cmxdID0gW2RvbmVdO1xuXHR2YXIgb25TY3JpcHRDb21wbGV0ZSA9IChwcmV2LCBldmVudCkgPT4ge1xuXHRcdC8vIGF2b2lkIG1lbSBsZWFrcyBpbiBJRS5cblx0XHRzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuXHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0XHR2YXIgZG9uZUZucyA9IGluUHJvZ3Jlc3NbdXJsXTtcblx0XHRkZWxldGUgaW5Qcm9ncmVzc1t1cmxdO1xuXHRcdHNjcmlwdC5wYXJlbnROb2RlICYmIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cdFx0ZG9uZUZucyAmJiBkb25lRm5zLmZvckVhY2goKGZuKSA9PiAoZm4oZXZlbnQpKSk7XG5cdFx0aWYocHJldikgcmV0dXJuIHByZXYoZXZlbnQpO1xuXHR9XG5cdHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgdW5kZWZpbmVkLCB7IHR5cGU6ICd0aW1lb3V0JywgdGFyZ2V0OiBzY3JpcHQgfSksIDEyMDAwMCk7XG5cdHNjcmlwdC5vbmVycm9yID0gb25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHNjcmlwdC5vbmVycm9yKTtcblx0c2NyaXB0Lm9ubG9hZCA9IG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCBzY3JpcHQub25sb2FkKTtcblx0bmVlZEF0dGFjaCAmJiBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG59OyIsIi8vIHNyYy9qcy9hcGkuanNcbi8qKlxuICogU3VwYWJhc2UgQVBJIC0gTW9kZXJuaXplZFxuICogQG1vZHVsZSBhcGlcbiAqIEBkZXNjcmlwdGlvbiBDbGVhbiwgZWZmaWNpZW50IEFQSSBsYXllciB3aXRoIGVuaGFuY2VkIGVycm9yIGhhbmRsaW5nIGFuZCBzdGF0ZSBtYW5hZ2VtZW50XG4gKiBAdmVyc2lvbiAxLjAuMFxuICogQGF1dGhvciBHcmV5UGFuZGFcbiAqXG4gKiBAY2hhbmdlbG9nXG4gKiAtIDEuMC4wICgyMDI1LTAxLTI5KTogTW9kZXJuaXplZCB3aXRoIHN0YXRlIG1hbmFnZW1lbnQgYW5kIGVuaGFuY2VkIGNvbXBvbmVudHNcbiAqIC0gMC4xLjAgKDIwMjUtMDUtMTUpOiBNaWdyYXRpbmcgU3VwYWJhc2UgQVBJIGNhbGxzIGZvciBpbXByb3ZlZCBwZXJmb3JtYW5jZS5cbiAqIC0gMC4wLjEgKDIwMjUtMDQtMjYpOiBJbml0aWFsIHZlcnNpb24gd2l0aCBiYXNpYyBBUEkgZnVuY3Rpb25hbGl0eS5cbiAqL1xuXG4vLyBJbXBvcnQgZW5oYW5jZWQgbW9kdWxlc1xuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tIFwiLi9zdXBhYmFzZS1jbGllbnQuanNcIjtcbmltcG9ydCB7IGFwaVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlcy9hcGktc2VydmljZS5qc1wiO1xuaW1wb3J0IHsgc3RhdGVNYW5hZ2VyIH0gZnJvbSBcIi4vc3RhdGUvc3RhdGUtbWFuYWdlci5qc1wiO1xuaW1wb3J0IHtcbiAgdG9nZ2xlU3Bpbm5lcixcbiAgc2hvd1N0YXR1cyxcbiAgcG9wdWxhdGVTZWxlY3QsXG4gIHJlc2V0U2VsZWN0LFxuICBkb21FbGVtZW50cyxcbn0gZnJvbSBcIi4vdWkuanNcIjtcblxuLyoqXG4gKiBFbmhhbmNlZCBjaXR5IGxvYWRpbmcgd2l0aCBjYWNoaW5nIGFuZCBzdGF0ZSBtYW5hZ2VtZW50XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGxvYWRDaXRpZXMoKSB7XG4gIGNvbnN0IGNpdHlTZWxlY3QgPSBkb21FbGVtZW50cy5nZXQoXCJjaXR5U2VsZWN0XCIpO1xuICBjb25zdCBjaXR5U3Bpbm5lciA9IGRvbUVsZW1lbnRzLmdldChcImNpdHlTcGlubmVyXCIpO1xuXG4gIGlmICghY2l0eVNlbGVjdCkgcmV0dXJuO1xuXG4gIHRvZ2dsZVNwaW5uZXIoY2l0eVNwaW5uZXIsIHRydWUpO1xuICBzdGF0ZU1hbmFnZXIuc2V0TG9hZGluZyh0cnVlKTtcblxuICB0cnkge1xuICAgIGNvbnN0IGNpdGllcyA9IGF3YWl0IGFwaVNlcnZpY2UubG9hZENpdGllcygpO1xuXG4gICAgY29uc3QgaGFzRGF0YSA9IHBvcHVsYXRlU2VsZWN0KFxuICAgICAgY2l0eVNlbGVjdCxcbiAgICAgIGNpdGllcyxcbiAgICAgIFwiU8OpbGVjdGlvbm5leiB1bmUgdmlsbGVcIixcbiAgICAgIFwiQXVjdW5lIHZpbGxlIGRpc3BvbmlibGVcIixcbiAgICAgIFwiY2l0eVwiXG4gICAgKTtcblxuICAgIGlmIChoYXNEYXRhKSB7XG4gICAgICBzaG93U3RhdHVzKFxuICAgICAgICBgTm91dmVsbGUgdmlsbGUgZGlzcG9uaWJsZSAhIFJldHJvdXZleiBsZXMgc3ludGjDqHNlcyBkZSBMaWxsZWAsXG4gICAgICAgIFwic3VjY2Vzc1wiXG4gICAgICApO1xuICAgICAgc3RhdGVNYW5hZ2VyLnNldENpdGllcyhjaXRpZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHN0YXRlTWFuYWdlci5nZXRTdGF0ZShcInVzZXJcIik7XG4gICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgY3VycmVudFVzZXIgPT09IG51bGxcbiAgICAgICAgICA/IFwiVmV1aWxsZXogdm91cyBjb25uZWN0ZXIgcG91ciBhY2PDqWRlciBhdXggZG9ubsOpZXMuXCJcbiAgICAgICAgICA6IFwiQXVjdW5lIHZpbGxlIHRyb3V2w6llLlwiO1xuICAgICAgc2hvd1N0YXR1cyhtZXNzYWdlLCBcIndhcm5pbmdcIik7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkdSBjaGFyZ2VtZW50IGRlcyB2aWxsZXM6XCIsIGVycm9yKTtcbiAgICBzaG93U3RhdHVzKFwiRXJyZXVyIGRlIGNoYXJnZW1lbnQgZGVzIHZpbGxlc1wiLCBcImVycm9yXCIpO1xuICAgIHJlc2V0U2VsZWN0KGNpdHlTZWxlY3QsIFwiRXJyZXVyIGNoYXJnZW1lbnRcIik7XG4gIH0gZmluYWxseSB7XG4gICAgdG9nZ2xlU3Bpbm5lcihjaXR5U3Bpbm5lciwgZmFsc2UpO1xuICAgIHN0YXRlTWFuYWdlci5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgfVxufVxuXG4vKipcbiAqIEVuaGFuY2VkIHpvbmluZyBsb2FkaW5nIHdpdGggc3RhdGUgbWFuYWdlbWVudFxuICovXG5hc3luYyBmdW5jdGlvbiBsb2FkWm9uaW5ncyhjaXR5SWQpIHtcbiAgY29uc3Qgem9uaW5nU2VsZWN0ID0gZG9tRWxlbWVudHMuZ2V0KFwiem9uaW5nU2VsZWN0XCIpO1xuICBjb25zdCB6b25lU2VsZWN0ID0gZG9tRWxlbWVudHMuZ2V0KFwiem9uZVNlbGVjdFwiKTtcbiAgY29uc3Qgem9uaW5nU3Bpbm5lciA9IGRvbUVsZW1lbnRzLmdldChcInpvbmluZ1NwaW5uZXJcIik7XG4gIGNvbnN0IHN5bnRoZXNpc0J0biA9IGRvbUVsZW1lbnRzLmdldChcInN5bnRoZXNpc0J0blwiKTtcblxuICAvLyBSZXNldCBkZXBlbmRlbnQgc2VsZWN0c1xuICByZXNldFNlbGVjdCh6b25pbmdTZWxlY3QsIFwiU8OpbGVjdGlvbm5leiBkJ2Fib3JkIHVuZSB2aWxsZVwiKTtcbiAgcmVzZXRTZWxlY3Qoem9uZVNlbGVjdCwgXCJTw6lsZWN0aW9ubmV6IGQnYWJvcmQgdW4gem9uYWdlXCIpO1xuICBpZiAoc3ludGhlc2lzQnRuKSBzeW50aGVzaXNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuXG4gIHN0YXRlTWFuYWdlci5jbGVhclNlbGVjdGVkRG9jdW1lbnQoKTtcblxuICBpZiAoIWNpdHlJZCkge1xuICAgIHNob3dTdGF0dXMoXCJWZXVpbGxleiBzw6lsZWN0aW9ubmVyIHVuZSB2aWxsZS5cIiwgXCJpbmZvXCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRvZ2dsZVNwaW5uZXIoem9uaW5nU3Bpbm5lciwgdHJ1ZSk7XG4gIHN0YXRlTWFuYWdlci5zZXRMb2FkaW5nKHRydWUpO1xuXG4gIHRyeSB7XG4gICAgY29uc3Qgem9uaW5ncyA9IGF3YWl0IGFwaVNlcnZpY2UubG9hZFpvbmluZ3MoY2l0eUlkKTtcblxuICAgIGNvbnN0IGhhc0RhdGEgPSBwb3B1bGF0ZVNlbGVjdChcbiAgICAgIHpvbmluZ1NlbGVjdCxcbiAgICAgIHpvbmluZ3MsXG4gICAgICBcIlPDqWxlY3Rpb25uZXogdW4gem9uYWdlXCIsXG4gICAgICBcIkF1Y3VuIHpvbmFnZSBkaXNwb25pYmxlXCIsXG4gICAgICBcInpvbmluZ1wiXG4gICAgKTtcblxuICAgIGlmIChoYXNEYXRhKSB7XG4gICAgICBzaG93U3RhdHVzKGAke3pvbmluZ3MubGVuZ3RofSB6b25hZ2VzIGNoYXJnw6lzYCwgXCJzdWNjZXNzXCIpO1xuICAgICAgc3RhdGVNYW5hZ2VyLnNldFpvbmluZ3Moem9uaW5ncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3dTdGF0dXMoXCJBdWN1biB6b25hZ2UgdHJvdXbDqSBwb3VyIGNldHRlIHZpbGxlLlwiLCBcIndhcm5pbmdcIik7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkdSBjaGFyZ2VtZW50IGRlcyB6b25hZ2VzOlwiLCBlcnJvcik7XG4gICAgc2hvd1N0YXR1cyhcIkVycmV1ciBkZSBjaGFyZ2VtZW50IGRlcyB6b25hZ2VzXCIsIFwiZXJyb3JcIik7XG4gICAgcmVzZXRTZWxlY3Qoem9uaW5nU2VsZWN0LCBcIkVycmV1ciBjaGFyZ2VtZW50XCIpO1xuICB9IGZpbmFsbHkge1xuICAgIHRvZ2dsZVNwaW5uZXIoem9uaW5nU3Bpbm5lciwgZmFsc2UpO1xuICAgIHN0YXRlTWFuYWdlci5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgfVxufVxuXG4vKipcbiAqIEVuaGFuY2VkIHpvbmUgbG9hZGluZyB3aXRoIHN0YXRlIG1hbmFnZW1lbnRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gbG9hZFpvbmVzKHpvbmluZ0lkKSB7XG4gIGNvbnN0IHpvbmVTZWxlY3QgPSBkb21FbGVtZW50cy5nZXQoXCJ6b25lU2VsZWN0XCIpO1xuICBjb25zdCB6b25lU3Bpbm5lciA9IGRvbUVsZW1lbnRzLmdldChcInpvbmVTcGlubmVyXCIpO1xuICBjb25zdCBzeW50aGVzaXNCdG4gPSBkb21FbGVtZW50cy5nZXQoXCJzeW50aGVzaXNCdG5cIik7XG5cbiAgcmVzZXRTZWxlY3Qoem9uZVNlbGVjdCwgXCJTw6lsZWN0aW9ubmV6IGQnYWJvcmQgdW4gem9uYWdlXCIpO1xuICBpZiAoc3ludGhlc2lzQnRuKSBzeW50aGVzaXNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuXG4gIHN0YXRlTWFuYWdlci5jbGVhclNlbGVjdGVkRG9jdW1lbnQoKTtcblxuICBpZiAoIXpvbmluZ0lkKSB7XG4gICAgc2hvd1N0YXR1cyhcIlZldWlsbGV6IHPDqWxlY3Rpb25uZXIgdW4gem9uYWdlLlwiLCBcImluZm9cIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdG9nZ2xlU3Bpbm5lcih6b25lU3Bpbm5lciwgdHJ1ZSk7XG4gIHN0YXRlTWFuYWdlci5zZXRMb2FkaW5nKHRydWUpO1xuXG4gIHRyeSB7XG4gICAgY29uc3Qgem9uZXMgPSBhd2FpdCBhcGlTZXJ2aWNlLmxvYWRab25lcyh6b25pbmdJZCk7XG5cbiAgICBjb25zdCBoYXNEYXRhID0gcG9wdWxhdGVTZWxlY3QoXG4gICAgICB6b25lU2VsZWN0LFxuICAgICAgem9uZXMsXG4gICAgICBcIlPDqWxlY3Rpb25uZXogdW5lIHpvbmVcIixcbiAgICAgIFwiQXVjdW5lIHpvbmUgZGlzcG9uaWJsZVwiLFxuICAgICAgXCJ6b25lXCJcbiAgICApO1xuXG4gICAgaWYgKGhhc0RhdGEpIHtcbiAgICAgIHNob3dTdGF0dXMoYCR7em9uZXMubGVuZ3RofSB6b25lcyBjaGFyZ8OpZXNgLCBcInN1Y2Nlc3NcIik7XG4gICAgICBzdGF0ZU1hbmFnZXIuc2V0Wm9uZXMoem9uZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93U3RhdHVzKFwiQXVjdW5lIHpvbmUgdHJvdXbDqWUgcG91ciBjZSB6b25hZ2UuXCIsIFwid2FybmluZ1wiKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGR1IGNoYXJnZW1lbnQgZGVzIHpvbmVzOlwiLCBlcnJvcik7XG4gICAgc2hvd1N0YXR1cyhcIkVycmV1ciBkZSBjaGFyZ2VtZW50IGRlcyB6b25lc1wiLCBcImVycm9yXCIpO1xuICAgIHJlc2V0U2VsZWN0KHpvbmVTZWxlY3QsIFwiRXJyZXVyIGNoYXJnZW1lbnRcIik7XG4gIH0gZmluYWxseSB7XG4gICAgdG9nZ2xlU3Bpbm5lcih6b25lU3Bpbm5lciwgZmFsc2UpO1xuICAgIHN0YXRlTWFuYWdlci5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgfVxufVxuXG4vKipcbiAqIEVuaGFuY2VkIGRvY3VtZW50IGZpbmRlciB3aXRoIHN0YXRlIG1hbmFnZW1lbnRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZmluZERvY3VtZW50KHpvbmluZ0lkLCB6b25lSWQsIHR5cG9sb2dpZUlkID0gbnVsbCkge1xuICBjb25zdCBzeW50aGVzaXNCdG4gPSBkb21FbGVtZW50cy5nZXQoXCJzeW50aGVzaXNCdG5cIik7XG4gIGNvbnN0IGRvY3VtZW50U3Bpbm5lciA9IGRvbUVsZW1lbnRzLmdldChcImRvY3VtZW50U3Bpbm5lclwiKTtcblxuICBpZiAoc3ludGhlc2lzQnRuKSBzeW50aGVzaXNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICBzdGF0ZU1hbmFnZXIuY2xlYXJTZWxlY3RlZERvY3VtZW50KCk7XG5cbiAgY29uc3QgY3VycmVudFVzZXIgPSBzdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoXCJ1c2VyXCIpO1xuICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgc2hvd1N0YXR1cyhcbiAgICAgIFwiVmV1aWxsZXogdm91cyBjb25uZWN0ZXIgcG91ciBhY2PDqWRlciBhdXggZG9jdW1lbnRzLlwiLFxuICAgICAgXCJ3YXJuaW5nXCJcbiAgICApO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKCF6b25pbmdJZCB8fCAhem9uZUlkKSB7XG4gICAgc2hvd1N0YXR1cyhcIlPDqWxlY3Rpb24gaW5jb21wbMOodGUgcG91ciByZWNoZXJjaGVyIGxlIGRvY3VtZW50LlwiLCBcImluZm9cIik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB0b2dnbGVTcGlubmVyKGRvY3VtZW50U3Bpbm5lciwgdHJ1ZSk7XG4gIHN0YXRlTWFuYWdlci5zZXRMb2FkaW5nKHRydWUpO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBhd2FpdCBhcGlTZXJ2aWNlLmZpbmREb2N1bWVudChcbiAgICAgIHpvbmluZ0lkLFxuICAgICAgem9uZUlkLFxuICAgICAgdHlwb2xvZ2llSWRcbiAgICApO1xuXG4gICAgaWYgKGRvY3VtZW50KSB7XG4gICAgICBzdGF0ZU1hbmFnZXIuc2V0U2VsZWN0ZWREb2N1bWVudChkb2N1bWVudCk7XG4gICAgICBpZiAoc3ludGhlc2lzQnRuKSBzeW50aGVzaXNCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHNob3dTdGF0dXMoXCJEb2N1bWVudCB0cm91dsOpICFcIiwgXCJzdWNjZXNzXCIpO1xuICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93U3RhdHVzKFwiQXVjdW4gZG9jdW1lbnQgdHJvdXbDqSBwb3VyIGNldHRlIHPDqWxlY3Rpb24uXCIsIFwid2FybmluZ1wiKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgcmVjaGVyY2hlIGR1IGRvY3VtZW50OlwiLCBlcnJvcik7XG4gICAgc2hvd1N0YXR1cyhcIkVycmV1ciBsb3JzIGRlIGxhIHJlY2hlcmNoZSBkdSBkb2N1bWVudFwiLCBcImVycm9yXCIpO1xuICAgIHJldHVybiBudWxsO1xuICB9IGZpbmFsbHkge1xuICAgIHRvZ2dsZVNwaW5uZXIoZG9jdW1lbnRTcGlubmVyLCBmYWxzZSk7XG4gICAgc3RhdGVNYW5hZ2VyLnNldExvYWRpbmcoZmFsc2UpO1xuICB9XG59XG5cbi8qKlxuICogR2V0IHNlbGVjdGVkIGRvY3VtZW50IGZyb20gc3RhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0U2VsZWN0ZWREb2N1bWVudCgpIHtcbiAgcmV0dXJuIHN0YXRlTWFuYWdlci5nZXRTdGF0ZShcInNlbGVjdGVkRG9jdW1lbnRcIik7XG59XG5cbi8qKlxuICogRW5oYW5jZWQgaW5pdGlhbGl6YXRpb24gd2l0aCBzdGF0ZSBtYW5hZ2VtZW50XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVBcHAoKSB7XG4gIHN0YXRlTWFuYWdlci5zZXRMb2FkaW5nKHRydWUpO1xuXG4gIHRyeSB7XG4gICAgLy8gTG9hZCBpbml0aWFsIGRhdGFcbiAgICBhd2FpdCBsb2FkQ2l0aWVzKCk7XG5cbiAgICAvLyBTZXQgdXAgZXZlbnQgbGlzdGVuZXJzIGZvciBzdGF0ZSBjaGFuZ2VzXG4gICAgc3RhdGVNYW5hZ2VyLnN1YnNjcmliZShcInVzZXJcIiwgKHVzZXIpID0+IHtcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIGxvYWRDaXRpZXMoKTsgLy8gUmVsb2FkIGNpdGllcyB3aGVuIHVzZXIgbG9ncyBpblxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc2hvd1N0YXR1cyhcIkFwcGxpY2F0aW9uIGluaXRpYWxpc8OpZVwiLCBcInN1Y2Nlc3NcIik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBkJ2luaXRpYWxpc2F0aW9uOlwiLCBlcnJvcik7XG4gICAgc2hvd1N0YXR1cyhcIkVycmV1ciBkJ2luaXRpYWxpc2F0aW9uIGRlIGwnYXBwbGljYXRpb25cIiwgXCJlcnJvclwiKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBzdGF0ZU1hbmFnZXIuc2V0TG9hZGluZyhmYWxzZSk7XG4gIH1cbn1cblxuLy8gRXhwb3J0IGNsZWFuLCBmb2N1c2VkIEFQSVxuZXhwb3J0IHtcbiAgbG9hZENpdGllcyxcbiAgbG9hZFpvbmluZ3MsXG4gIGxvYWRab25lcyxcbiAgZmluZERvY3VtZW50LFxuICBnZXRTZWxlY3RlZERvY3VtZW50LFxuICBpbml0aWFsaXplQXBwLFxufTtcbiIsIi8vIHB1YmxpYy9qcy9hcHAuanMgLSBNYWluIGFwcGxpY2F0aW9uIGxvZ2ljXG4vKipcbiAqIEZpcmViYXNlIEFwcFxuICogQG1vZHVsZSBhcHBcbiAqIEBkZXNjcmlwdGlvbiBUaGlzIG1vZHVsZSBoYW5kbGVzIHRoZSBtYWluIGFwcGxpY2F0aW9uIGxvZ2ljLlxuICogQHZlcnNpb24gMC4wLjdcbiAqIEBhdXRob3IgR3JleVBhbmRhXG4gKlxuICogQGNoYW5nZWxvZ1xuICogLSAwLjAuNyAoMjAyNS0wMS0yOSk6IEludGVncmF0ZWQgd2l0aCBlbmhhbmNlZCBzdGF0ZSBtYW5hZ2VtZW50IGFuZCBBUEkgc2VydmljZVxuICogLSAwLjAuNiAoMjAyNS0wMS0yNyk6IFJlZmFjdG9yZWQgdG8gdXNlIHNoYXJlZCBoZWFkZXIgYXV0aGVudGljYXRpb24gbW9kdWxlXG4gKiAtIDAuMC41ICgyMDI1LTA1LTEzKTogQWRkaW5nIGFjY291bnQgYnV0dG9uIHRvIHRoZSBwcm9maWxlIHBhZ2UsIGNvcnJlY3RpbmcgdGhlIGxvZ2luIHByb21wdC5cbiAqIC0gMC4wLjQgKDIwMjUtMDUtMDkpOiBNb2RpZmllZCB0aGUgYXV0aGVudGljYXRpb24gc3RhdGUgbWFuYWdlbWVudCB0byB1c2UgU3VwYWJhc2UgQXV0aCBzeXN0ZW0uXG4gKiAtIDAuMC4zICgyMDI1LTA1LTA4KTogTW92ZWQgRmlyZWJhc2UgY29uZmlndXJhdGlvbiBpbnRvIGEgc2VwYXJhdGUgZmlsZS5cbiAqIC0gMC4wLjIgKDIwMjUtMDQtMjcpOiBBZGRlZCBhdXRoZW50aWNhdGlvbiBzdGF0ZSBtYW5hZ2VtZW50IGFuZCBkb2N1bWVudCBkb3dubG9hZCBmdW5jdGlvbmFsaXR5IHdpdGggRmlyZWJhc2UgQXV0aC5cbiAqIC0gMC4wLjEgKDIwMjUtMDQtMjEpOiBJbml0aWFsIHZlcnNpb24gd2l0aCBiYXNpYyBkb2N1bWVudCBkb3dubG9hZCBmdW5jdGlvbmFsaXR5LlxuICovXG5cbi8vIEltcG9ydCBTdXBhYmFzZSBDbGllbnRcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSBcIi4vc3VwYWJhc2UtY2xpZW50LmpzXCI7XG5cbi8vIEltcG9ydCBlbmhhbmNlZCBzdGF0ZSBtYW5hZ2VtZW50XG5pbXBvcnQgeyBzdGF0ZU1hbmFnZXIgfSBmcm9tIFwiLi9zdGF0ZS9zdGF0ZS1tYW5hZ2VyLmpzXCI7XG5cbi8vIEltcG9ydCBBUEkgZnVuY3Rpb25zXG5pbXBvcnQge1xuICBsb2FkQ2l0aWVzLFxuICBsb2FkWm9uaW5ncyxcbiAgbG9hZFpvbmVzLFxuICBmaW5kRG9jdW1lbnQsXG4gIGdldFNlbGVjdGVkRG9jdW1lbnQsIC8vIEZ1bmN0aW9uIHRvIGdldCB0aGUgZG9jdW1lbnQgZGV0YWlscyBmcm9tIGFwaS5qc1xufSBmcm9tIFwiLi9hcGkuanNcIjtcblxuLy8gSW1wb3J0IFVJIGVsZW1lbnRzIGFuZCBmdW5jdGlvbnNcbmltcG9ydCB7XG4gIGNpdHlTZWxlY3QsXG4gIHpvbmluZ1NlbGVjdCxcbiAgem9uZVNlbGVjdCxcbiAgc3ludGhlc2lzQnRuLFxuICBzaG93U3RhdHVzLFxuICByZXNldFNlbGVjdCxcbiAgZm9ybWF0QXBpTmFtZSxcbiAgLy8gUmVmZXJlbmNlcyB0byBVSSBlbGVtZW50cyBmcm9tIHVpLmpzXG4gIHVzZXJTdGF0dXMsXG4gIGxvZ291dEJ0bixcbiAgbG9naW5MaW5rLFxuICBzaWdudXBMaW5rLFxufSBmcm9tIFwiLi91aS5qc1wiO1xuXG5pbXBvcnQgKiBhcyBhdXRoTW9kdWxlIGZyb20gXCIuL2F1dGgvYXV0aC5qc1wiO1xuaW1wb3J0IHtcbiAgaW5pdEhlYWRlckF1dGgsXG4gIGdldEN1cnJlbnRVc2VyIGFzIGdldEhlYWRlckN1cnJlbnRVc2VyLFxufSBmcm9tIFwiLi9hdXRoL2hlYWRlci1hdXRoLmpzXCI7XG5pbXBvcnQgeyBpbml0RGVsZXRpb25HdWFyZCB9IGZyb20gXCIuL2F1dGgvZGVsZXRpb24tZ3VhcmQuanNcIjtcblxubGV0IGN1cnJlbnRVc2VyID0gbnVsbDsgLy8gVmFyaWFibGUgdG8gaG9sZCB0aGUgY3VycmVudCB1c2VyIHN0YXRlXG5cbi8vIC0tLSBBdXRoZW50aWNhdGlvbiBTdGF0ZSBNYW5hZ2VtZW50IC0tLVxuZnVuY3Rpb24gdXBkYXRlVUlGb3JBdXRoU3RhdGUodXNlcikge1xuICBjdXJyZW50VXNlciA9IHVzZXI7IC8vIFVwZGF0ZSBnbG9iYWwgdXNlciBzdGF0ZVxuICBzdGF0ZU1hbmFnZXIuc2V0VXNlcih1c2VyKTsgLy8gVXBkYXRlIHN0YXRlIG1hbmFnZXJcblxuICBpZiAodXNlcikge1xuICAgIC8vIFVzZXIgaXMgc2lnbmVkIGluIC0gdXBkYXRlIHN5bnRoZXNpcyBidXR0b24gc3RhdGVcbiAgICBjb25zdCBzZWxlY3RlZERvY3VtZW50ID0gZ2V0U2VsZWN0ZWREb2N1bWVudCgpO1xuICAgIGlmIChzZWxlY3RlZERvY3VtZW50ICYmIHNlbGVjdGVkRG9jdW1lbnQuaWQpIHtcbiAgICAgIGlmIChzeW50aGVzaXNCdG4pIHN5bnRoZXNpc0J0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgc2hvd1N0YXR1cyhcbiAgICAgICAgYERvY3VtZW50IHRyb3V2w6kgKFNvdXJjZTogJHtcbiAgICAgICAgICBmb3JtYXRBcGlOYW1lKHNlbGVjdGVkRG9jdW1lbnQuc291cmNlX3BsdV9kYXRlKSB8fCBcIk5vbiBzcMOpY2lmacOpZVwiXG4gICAgICAgIH0pLiBQcsOqdCDDoCBjb25zdWx0ZXIuYCxcbiAgICAgICAgXCJzdWNjZXNzXCJcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzeW50aGVzaXNCdG4pIHN5bnRoZXNpc0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIFVzZXIgaXMgc2lnbmVkIG91dCAtIGRpc2FibGUgc3ludGhlc2lzIGJ1dHRvblxuICAgIGlmIChzeW50aGVzaXNCdG4pIHN5bnRoZXNpc0J0bi5kaXNhYmxlZCA9IHRydWU7IC8vIEFsd2F5cyBkaXNhYmxlIGRvd25sb2FkIGlmIGxvZ2dlZCBvdXRcbiAgfVxufVxuXG4vLyBDdXN0b20gYXV0aCBzdGF0ZSBjaGFuZ2UgbGlzdGVuZXIgZm9yIGFwcC1zcGVjaWZpYyBmdW5jdGlvbmFsaXR5XG5zdXBhYmFzZS5hdXRoLm9uQXV0aFN0YXRlQ2hhbmdlKChldmVudCwgc2Vzc2lvbikgPT4ge1xuICBjb25zdCB1c2VyID0gc2Vzc2lvbj8udXNlciB8fCBudWxsO1xuXG4gIC8vIFVwZGF0ZSBhcHAtc3BlY2lmaWMgVUkgc3RhdGUgKHN5bnRoZXNpcyBidXR0b24sIGV0Yy4pXG4gIHVwZGF0ZVVJRm9yQXV0aFN0YXRlKHVzZXIpO1xuXG4gIGlmIChldmVudCA9PT0gXCJTSUdORURfT1VUXCIpIHtcbiAgICBjb25zb2xlLmxvZyhcIkFwcDogVXNlciBzaWduZWQgb3V0XCIpO1xuICAgIHN0YXRlTWFuYWdlci5yZXNldFNlbGVjdGlvbnMoKTtcbiAgfSBlbHNlIGlmIChldmVudCA9PT0gXCJTSUdORURfSU5cIikge1xuICAgIGNvbnNvbGUubG9nKFwiQXBwOiBVc2VyIHNpZ25lZCBpblwiKTtcbiAgICAvLyBSZWxvYWQgY2l0aWVzIHdoZW4gdXNlciBzaWducyBpblxuICAgIGlmIChjaXR5U2VsZWN0ICYmIHpvbmluZ1NlbGVjdCAmJiB6b25lU2VsZWN0KSB7XG4gICAgICBsb2FkQ2l0aWVzKCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGV2ZW50ID09PSBcIklOSVRJQUxfU0VTU0lPTlwiKSB7XG4gICAgY29uc29sZS5sb2coXCJBcHA6IEluaXRpYWwgc2Vzc2lvbiBsb2FkZWRcIik7XG4gIH0gZWxzZSBpZiAoZXZlbnQgPT09IFwiVE9LRU5fUkVGUkVTSEVEXCIpIHtcbiAgICBjb25zb2xlLmxvZyhcIkFwcDogVG9rZW4gcmVmcmVzaGVkXCIpO1xuICB9XG59KTtcblxuLy8gLS0tIERvY3VtZW50IERvd25sb2FkIExvZ2ljIC0tLVxuZnVuY3Rpb24gZG93bmxvYWREb2N1bWVudCgpIHtcbiAgY29uc3QgdXNlciA9IGdldEhlYWRlckN1cnJlbnRVc2VyKCk7IC8vIEdldCB1c2VyIGZyb20gaGVhZGVyIGF1dGggbW9kdWxlXG4gIGlmICghdXNlcikge1xuICAgIHNob3dTdGF0dXMoXCJBdXRoZW50aWZpY2F0aW9uIHJlcXVpc2UgcG91ciB0w6lsw6ljaGFyZ2VyLlwiLCBcIndhcm5pbmdcIik7XG4gICAgc3ludGhlc2lzQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICByZXR1cm47IC8vIEV4aXQgaWYgbm90IGF1dGhlbnRpY2F0ZWRcbiAgfVxuXG4gIGNvbnN0IHNlbGVjdGVkRG9jdW1lbnQgPSBnZXRTZWxlY3RlZERvY3VtZW50KCk7IC8vIEdldCBmcm9tIGFwaS5qc1xuICBpZiAoc2VsZWN0ZWREb2N1bWVudCAmJiBzZWxlY3RlZERvY3VtZW50LmlkKSB7XG4gICAgc2hvd1N0YXR1cyhcIk91dmVydHVyZSBkdSBkb2N1bWVudC4uLlwiLCBcImluZm9cIik7XG4gICAgd2luZG93Lm9wZW4oYC9wbHUtc3VtbWFyeT9pZD0ke3NlbGVjdGVkRG9jdW1lbnQuaWR9YCwgXCJfYmxhbmtcIik7XG4gICAgLy8gUmUtZGlzcGxheSBzdWNjZXNzIG1lc3NhZ2UgYWZ0ZXIgYSBkZWxheVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgLy8gQ2hlY2sgaWYgYnV0dG9uIGlzIHN0aWxsIGVuYWJsZWQgKGkuZS4sIGRvY3VtZW50IGlzIHN0aWxsIGNvbnNpZGVyZWQgdmFsaWQpXG4gICAgICBpZiAoIXN5bnRoZXNpc0J0bi5kaXNhYmxlZCkge1xuICAgICAgICBzaG93U3RhdHVzKFxuICAgICAgICAgIGBEb2N1bWVudCB0cm91dsOpIChTb3VyY2U6ICR7XG4gICAgICAgICAgICBmb3JtYXRBcGlOYW1lKHNlbGVjdGVkRG9jdW1lbnQuc291cmNlX3BsdV9kYXRlKSB8fCBcIk5vbiBzcMOpY2lmacOpZVwiXG4gICAgICAgICAgfSkuIFByw6p0IMOgIGNvbnN1bHRlci5gLFxuICAgICAgICAgIFwic3VjY2Vzc1wiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSwgMTUwMCk7XG4gIH0gZWxzZSB7XG4gICAgc2hvd1N0YXR1cyhcIkxpZW4gZHUgZG9jdW1lbnQgbm9uIGRpc3BvbmlibGUuXCIsIFwid2FybmluZ1wiKTtcbiAgICBzeW50aGVzaXNCdG4uZGlzYWJsZWQgPSB0cnVlOyAvLyBFbnN1cmUgYnV0dG9uIGlzIGRpc2FibGVkIGlmIG5vIFVSTFxuICB9XG59XG5cbi8vID09PSBFdmVudCBsaXN0ZW5lcnMgPT09XG5jaXR5U2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGV2ZW50KSA9PiB7XG4gIGNvbnN0IGNpdHlJZCA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgbG9hZFpvbmluZ3MoY2l0eUlkKTsgLy8gQ2FsbCBBUEkgZnVuY3Rpb25cbn0pO1xuXG56b25pbmdTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZXZlbnQpID0+IHtcbiAgY29uc3Qgem9uaW5nSWQgPSBldmVudC50YXJnZXQudmFsdWU7XG4gIGxvYWRab25lcyh6b25pbmdJZCk7IC8vIENhbGwgQVBJIGZ1bmN0aW9uXG59KTtcblxuem9uZVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChldmVudCkgPT4ge1xuICBjb25zdCB6b25lSWQgPSBldmVudC50YXJnZXQudmFsdWU7XG4gIGNvbnN0IHpvbmluZ0lkID0gem9uaW5nU2VsZWN0LnZhbHVlOyAvLyBHZXQgY3VycmVudCB6b25pbmcgc2VsZWN0aW9uXG4gIC8vIFRPRE8gOiB0eXBvbG9naWVTZWxlY3QgbG9naWNcbiAgaWYgKHpvbmVJZCAmJiB6b25pbmdJZCkge1xuICAgIGZpbmREb2N1bWVudCh6b25pbmdJZCwgem9uZUlkLCBcIjdjMGYyODMwLWYzZmMtNGM2OS05MTFjLTQ3MDI4NmY5MTk4MlwiKTsgLy8gQ2FsbCBBUEkgZnVuY3Rpb25cbiAgfSBlbHNlIHtcbiAgICBzaG93U3RhdHVzKFwiVmV1aWxsZXogZCdhYm9yZCBzw6lsZWN0aW9ubmVyIHVuIHpvbmluZy5cIiwgXCJ3YXJuaW5nXCIpO1xuICB9XG4gIC8vIGlmICh6b25pbmdJZCkge1xuICAvLyAgIGxvYWRUeXBvbG9naWVzKHpvbmVJZCwgem9uaW5nSWQpOyAvLyBDYWxsIEFQSSBmdW5jdGlvblxuICAvLyB9IGVsc2Uge1xuICAvLyAgIHNob3dTdGF0dXMoXCJWZXVpbGxleiBkJ2Fib3JkIHPDqWxlY3Rpb25uZXIgdW4gem9uaW5nLlwiLCBcIndhcm5pbmdcIik7XG4gIC8vIH1cbn0pO1xuXG4vLyB0eXBvbG9naWVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZXZlbnQpID0+IHtcbi8vICAgY29uc3QgdHlwb2xvZ2llSWQgPSBldmVudC50YXJnZXQudmFsdWU7XG4vLyAgIGNvbnN0IHpvbmVJZCA9IHpvbmVTZWxlY3QudmFsdWU7XG4vLyAgIGNvbnN0IHpvbmluZ0lkID0gem9uaW5nU2VsZWN0LnZhbHVlO1xuLy8gICBpZiAoem9uZUlkICYmIHpvbmluZ0lkKSB7XG4vLyAgICAgZmluZERvY3VtZW50KHpvbmluZ0lkLCB6b25lSWQsIHR5cG9sb2dpZUlkKTsgLy8gQ2FsbCBBUEkgZnVuY3Rpb25cbi8vICAgfSBlbHNlIHtcbi8vICAgICBzaG93U3RhdHVzKFxuLy8gICAgICAgXCJWZXVpbGxleiBkJ2Fib3JkIHPDqWxlY3Rpb25uZXIgdW4gem9uaW5nIGV0IHVuZSB6b25lLlwiLFxuLy8gICAgICAgXCJ3YXJuaW5nXCJcbi8vICAgICApO1xuLy8gICB9XG4vLyB9KTtcblxuc3ludGhlc2lzQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkb3dubG9hZERvY3VtZW50KTtcblxuLy8gPT09IEluaXRpYWxpc2F0aW9uID09PVxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIC8vIEluaXRpYWxpemUgZGVsZXRpb24gZ3VhcmQgZmlyc3QgKGJsb2NrcyBhY2Nlc3MgaWYgbmVlZGVkKVxuICAgIGNvbnN0IGNhbkFjY2VzcyA9IGF3YWl0IGluaXREZWxldGlvbkd1YXJkKGZhbHNlKTtcbiAgICBpZiAoIWNhbkFjY2Vzcykge1xuICAgICAgcmV0dXJuOyAvLyBBY2Nlc3Mgd2FzIGJsb2NrZWQsIHN0b3AgaW5pdGlhbGl6YXRpb25cbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIGhlYWRlciBhdXRoZW50aWNhdGlvbiBmaXJzdFxuICAgIGluaXRIZWFkZXJBdXRoKCk7XG5cbiAgICAvLyBJbml0aWFsaXplIFVJIHN0YXRlXG4gICAgcmVzZXRTZWxlY3QoY2l0eVNlbGVjdCwgXCJDaGFyZ2VtZW50Li4uXCIpO1xuICAgIHJlc2V0U2VsZWN0KHpvbmluZ1NlbGVjdCwgXCJTw6lsZWN0aW9ubmV6IGQnYWJvcmQgdW5lIHZpbGxlXCIpO1xuICAgIHJlc2V0U2VsZWN0KHpvbmVTZWxlY3QsIFwiU8OpbGVjdGlvbm5leiBkJ2Fib3JkIHVuIHpvbmFnZVwiKTtcbiAgICAvLyByZXNldFNlbGVjdCh0eXBvbG9naWVTZWxlY3QsIFwiU8OpbGVjdGlvbm5leiBkJ2Fib3JkIHVuZSB6b25lXCIpO1xuICAgIGlmIChzeW50aGVzaXNCdG4pIHN5bnRoZXNpc0J0bi5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICAvLyBMb2FkIGluaXRpYWwgZGF0YSBpZiBvbiB0aGUgbWFpbiBwYWdlXG4gICAgaWYgKGNpdHlTZWxlY3QgJiYgem9uaW5nU2VsZWN0ICYmIHpvbmVTZWxlY3QpIHtcbiAgICAgIHNob3dTdGF0dXMoXCJJbml0aWFsaXNhdGlvbi4uLlwiLCBcImluZm9cIik7IC8vIFNob3cgdGhpcyBvbmx5IHdoZW4gcmVsZXZhbnQgc2VsZWN0b3JzIGFyZSBwcmVzZW50XG4gICAgICBhd2FpdCBsb2FkQ2l0aWVzKCk7IC8vIFN0YXJ0IGxvYWRpbmcgY2l0aWVzXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbml0aWFsaXppbmcgYXBwOlwiLCBlcnJvcik7XG4gIH1cbn0pO1xuXG4vLyBFeHBvcnQgY3VycmVudFVzZXIgZm9yIHVzZSBpbiBhcGkuanNcbmV4cG9ydCB7IGN1cnJlbnRVc2VyIH07XG4iLCIvLyBwdWJsaWMvanMvdWkuanNcbi8qKlxuICogVUkgTW9kdWxlXG4gKiBAbW9kdWxlIHVpXG4gKiBAZGVzY3JpcHRpb24gVXBncmFkZWQgVUkgbW9kdWxlIHdpdGggZW5oYW5jZWQgY29tcG9uZW50cyBhbmQgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICogQHZlcnNpb24gMC4xLjBcbiAqIEBhdXRob3IgR3JleVBhbmRhXG4gKlxuICogQGNoYW5nZWxvZ1xuICogLSAwLjEuMCAoMjAyNS0wMS0yOSk6IE1ham9yIHJlZmFjdG9yIHdpdGggZW5oYW5jZWQgY29tcG9uZW50cyBhbmQgc3RhdGUgbWFuYWdlbWVudCBpbnRlZ3JhdGlvblxuICogLSAwLjAuMSAoMjAyNS0wNC0yNik6IEluaXRpYWwgdmVyc2lvbiB3aXRoIGJhc2ljIFVJIGZ1bmN0aW9ucyBhbmQgZWxlbWVudCByZWZlcmVuY2VzXG4gKi9cblxuaW1wb3J0IHsgem9uZU5hbWVNYXBwaW5ncyB9IGZyb20gXCIuL21hcHBpbmdzLmpzXCI7XG5cbi8vIFNpbXBsZSBmYWxsYmFja3MgZm9yIGVuaGFuY2VkIGZlYXR1cmVzXG5jb25zdCBVSUNvbXBvbmVudHMgPSB7XG4gIHNob3dUb2FzdDogKG1lc3NhZ2UsIHR5cGUpID0+IGNvbnNvbGUubG9nKGBUb2FzdDogJHttZXNzYWdlfSAoJHt0eXBlfSlgKSxcbn07XG5cbmNvbnN0IHN0YXRlTWFuYWdlciA9IHtcbiAgc2V0VUlTdGF0ZTogKCkgPT4ge30sXG4gIHNldExvYWRpbmc6ICgpID0+IHt9LFxufTtcblxuLy8gLS0tIEVuaGFuY2VkIERPTSBFbGVtZW50IE1hbmFnZW1lbnQgLS0tXG5jbGFzcyBET01FbGVtZW50cyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZWxlbWVudHMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5pbml0aWFsaXplRWxlbWVudHMoKTtcbiAgfVxuXG4gIGluaXRpYWxpemVFbGVtZW50cygpIHtcbiAgICAvLyBGb3JtIGVsZW1lbnRzXG4gICAgdGhpcy5yZWdpc3RlcihcImNpdHlTZWxlY3RcIiwgXCJjaXR5U2VsZWN0XCIpO1xuICAgIHRoaXMucmVnaXN0ZXIoXCJ6b25pbmdTZWxlY3RcIiwgXCJ6b25pbmdTZWxlY3RcIik7XG4gICAgdGhpcy5yZWdpc3RlcihcInpvbmVTZWxlY3RcIiwgXCJ6b25lU2VsZWN0XCIpO1xuICAgIHRoaXMucmVnaXN0ZXIoXCJ0eXBvbG9naWVTZWxlY3RcIiwgXCJ0eXBvbG9naWVTZWxlY3RcIik7XG4gICAgdGhpcy5yZWdpc3RlcihcInN5bnRoZXNpc0J0blwiLCBcInN5bnRoZXNpc0J0blwiKTtcbiAgICB0aGlzLnJlZ2lzdGVyKFwic3RhdHVzTWVzc2FnZVwiLCBcInN0YXR1c01lc3NhZ2VcIik7XG5cbiAgICAvLyBTcGlubmVyIGVsZW1lbnRzXG4gICAgdGhpcy5yZWdpc3RlcihcImNpdHlTcGlubmVyXCIsIFwiY2l0eVNwaW5uZXJcIik7XG4gICAgdGhpcy5yZWdpc3RlcihcInpvbmluZ1NwaW5uZXJcIiwgXCJ6b25pbmdTcGlubmVyXCIpO1xuICAgIHRoaXMucmVnaXN0ZXIoXCJ6b25lU3Bpbm5lclwiLCBcInpvbmVTcGlubmVyXCIpO1xuICAgIHRoaXMucmVnaXN0ZXIoXCJ0eXBvbG9naWVTcGlubmVyXCIsIFwidHlwb2xvZ2llU3Bpbm5lclwiKTtcbiAgICB0aGlzLnJlZ2lzdGVyKFwiZG9jdW1lbnRTcGlubmVyXCIsIFwiZG9jdW1lbnRTcGlubmVyXCIpO1xuXG4gICAgLy8gQXV0aCBlbGVtZW50c1xuICAgIHRoaXMucmVnaXN0ZXIoXCJ1c2VyU3RhdHVzXCIsIFwidXNlclN0YXR1c1wiKTtcbiAgICB0aGlzLnJlZ2lzdGVyKFwibG9nb3V0QnRuXCIsIFwibG9nb3V0QnRuXCIpO1xuICAgIHRoaXMucmVnaXN0ZXIoXCJsb2dpbkxpbmtcIiwgXCJsb2dpbkxpbmtcIik7XG4gICAgdGhpcy5yZWdpc3RlcihcInNpZ251cExpbmtcIiwgXCJzaWdudXBMaW5rXCIpO1xuICB9XG5cbiAgcmVnaXN0ZXIobmFtZSwgaWQpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIGlmIChlbGVtZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLnNldChuYW1lLCBlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBnZXQobmFtZSkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLmdldChuYW1lKSB8fCBudWxsO1xuICB9XG5cbiAgZXhpc3RzKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50cy5oYXMobmFtZSkgJiYgdGhpcy5lbGVtZW50cy5nZXQobmFtZSkgIT09IG51bGw7XG4gIH1cbn1cblxuLy8gQ3JlYXRlIHNpbmdsZXRvbiBpbnN0YW5jZVxuY29uc3QgZG9tRWxlbWVudHMgPSBuZXcgRE9NRWxlbWVudHMoKTtcblxuLy8gLS0tIEVuaGFuY2VkIFVJIEZ1bmN0aW9ucyAtLS1cblxuLyoqXG4gKiBFbmhhbmNlZCBzdGF0dXMgbWVzc2FnZSBkaXNwbGF5IHdpdGggdG9hc3QgaW50ZWdyYXRpb25cbiAqL1xuZnVuY3Rpb24gc2hvd1N0YXR1cyhtZXNzYWdlLCB0eXBlID0gXCJpbmZvXCIpIHtcbiAgY29uc3Qgc3RhdHVzRWxlbWVudCA9IGRvbUVsZW1lbnRzLmdldChcInN0YXR1c01lc3NhZ2VcIik7XG5cbiAgaWYgKHN0YXR1c0VsZW1lbnQpIHtcbiAgICAvLyBVcGRhdGUgdGhlIGV4aXN0aW5nIHN0YXR1cyBtZXNzYWdlIGVsZW1lbnRcbiAgICBzdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICBzdGF0dXNFbGVtZW50LmNsYXNzTmFtZSA9IGBzdGF0dXMtbWVzc2FnZSBhbGVydCBhbGVydC0ke3R5cGV9YDtcbiAgICBzdGF0dXNFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJkLW5vbmVcIik7XG4gIH1cblxuICAvLyBBbHNvIHNob3cgYSB0b2FzdCBmb3IgYmV0dGVyIFVYIChvcHRpb25hbCwgY2FuIGJlIGRpc2FibGVkKVxuICBpZiAodHlwZSA9PT0gXCJlcnJvclwiIHx8IHR5cGUgPT09IFwid2FybmluZ1wiKSB7XG4gICAgdHJ5IHtcbiAgICAgIFVJQ29tcG9uZW50cy5zaG93VG9hc3QobWVzc2FnZSwgdHlwZSwgODAwMCk7IC8vIExvbmdlciBkdXJhdGlvbiBmb3IgZXJyb3JzXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIlRvYXN0IG5vdCBhdmFpbGFibGU6XCIsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgc3RhdGVcbiAgdHJ5IHtcbiAgICBzdGF0ZU1hbmFnZXIuc2V0VUlTdGF0ZSh0eXBlLCBtZXNzYWdlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oXCJTdGF0ZSBtYW5hZ2VyIG5vdCBhdmFpbGFibGU6XCIsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIEVuaGFuY2VkIHNwaW5uZXIgbWFuYWdlbWVudCB3aXRoIGZhbGxiYWNrXG4gKi9cbmZ1bmN0aW9uIHRvZ2dsZVNwaW5uZXIoZWxlbWVudE5hbWUsIHNob3cpIHtcbiAgY29uc3Qgc3Bpbm5lckVsZW1lbnQgPVxuICAgIHR5cGVvZiBlbGVtZW50TmFtZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgPyBkb21FbGVtZW50cy5nZXQoZWxlbWVudE5hbWUpXG4gICAgICA6IGVsZW1lbnROYW1lO1xuXG4gIGlmIChzcGlubmVyRWxlbWVudCkge1xuICAgIHNwaW5uZXJFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJkLW5vbmVcIiwgIXNob3cpO1xuICAgIHNwaW5uZXJFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIiwgIXNob3cpO1xuICB9XG5cbiAgLy8gVXBkYXRlIGdsb2JhbCBsb2FkaW5nIHN0YXRlXG4gIHRyeSB7XG4gICAgc3RhdGVNYW5hZ2VyLnNldExvYWRpbmcoc2hvdyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKFwiU3RhdGUgbWFuYWdlciBub3QgYXZhaWxhYmxlOlwiLCBlcnJvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBFbmhhbmNlZCBzZWxlY3QgcmVzZXQgd2l0aCBiZXR0ZXIgVVhcbiAqL1xuZnVuY3Rpb24gcmVzZXRTZWxlY3Qoc2VsZWN0RWxlbWVudCwgZGVmYXVsdFRleHQpIHtcbiAgY29uc3QgZWxlbWVudCA9XG4gICAgdHlwZW9mIHNlbGVjdEVsZW1lbnQgPT09IFwic3RyaW5nXCJcbiAgICAgID8gZG9tRWxlbWVudHMuZ2V0KHNlbGVjdEVsZW1lbnQpXG4gICAgICA6IHNlbGVjdEVsZW1lbnQ7XG5cbiAgaWYgKGVsZW1lbnQpIHtcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IGA8b3B0aW9uIHZhbHVlPVwiXCI+JHtcbiAgICAgIGRlZmF1bHRUZXh0IHx8IFwiU8OpbGVjdGlvbm5leiB1bmUgb3B0aW9uXCJcbiAgICB9PC9vcHRpb24+YDtcbiAgICBlbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvclwiKTsgLy8gUmVtb3ZlIGFueSBlcnJvciBzdGF0ZVxuICB9XG59XG5cbi8qKlxuICogRW5oYW5jZWQgbmFtZSBmb3JtYXR0aW5nIHdpdGggYmV0dGVyIFVuaWNvZGUgc3VwcG9ydFxuICovXG5mdW5jdGlvbiBmb3JtYXRBcGlOYW1lKG5hbWUpIHtcbiAgaWYgKCFuYW1lKSByZXR1cm4gXCJcIjtcblxuICByZXR1cm4gbmFtZVxuICAgIC5yZXBsYWNlKC9fL2csIFwiIFwiKVxuICAgIC5yZXBsYWNlKC8oXnxcXHMpXFx3L2csIChtYXRjaCkgPT4gbWF0Y2gudG9VcHBlckNhc2UoKSlcbiAgICAudHJpbSgpO1xufVxuXG4vKipcbiAqIEVuaGFuY2VkIHNlbGVjdCBwb3B1bGF0aW9uIHdpdGggZXJyb3IgaGFuZGxpbmcgYW5kIGFuaW1hdGlvbnNcbiAqL1xuZnVuY3Rpb24gcG9wdWxhdGVTZWxlY3QoXG4gIHNlbGVjdEVsZW1lbnQsXG4gIGRhdGEsXG4gIGRlZmF1bHRPcHRpb25UZXh0LFxuICBlbXB0eURhdGFUZXh0LFxuICBkYXRhVHlwZVxuKSB7XG4gIGNvbnN0IGVsZW1lbnQgPVxuICAgIHR5cGVvZiBzZWxlY3RFbGVtZW50ID09PSBcInN0cmluZ1wiXG4gICAgICA/IGRvbUVsZW1lbnRzLmdldChzZWxlY3RFbGVtZW50KVxuICAgICAgOiBzZWxlY3RFbGVtZW50O1xuXG4gIGlmICghZWxlbWVudCkge1xuICAgIGNvbnNvbGUud2FybihgU2VsZWN0IGVsZW1lbnQgbm90IGZvdW5kOiAke3NlbGVjdEVsZW1lbnR9YCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gUmVzZXQgZmlyc3RcbiAgcmVzZXRTZWxlY3QoZWxlbWVudCwgZGVmYXVsdE9wdGlvblRleHQpO1xuXG4gIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYDxvcHRpb24gdmFsdWU9XCJcIj4ke2VtcHR5RGF0YVRleHR9PC9vcHRpb24+YDtcbiAgICBlbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBDcmVhdGUgZG9jdW1lbnQgZnJhZ21lbnQgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAvLyBBZGQgZGVmYXVsdCBvcHRpb25cbiAgY29uc3QgZGVmYXVsdE9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gIGRlZmF1bHRPcHRpb24udmFsdWUgPSBcIlwiO1xuICBkZWZhdWx0T3B0aW9uLnRleHRDb250ZW50ID0gZGVmYXVsdE9wdGlvblRleHQ7XG4gIGRlZmF1bHRPcHRpb24uZGlzYWJsZWQgPSB0cnVlO1xuICBkZWZhdWx0T3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZGVmYXVsdE9wdGlvbik7XG5cbiAgLy8gQWRkIGRhdGEgb3B0aW9uc1xuICBkYXRhLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIG9wdGlvbi52YWx1ZSA9IGl0ZW0uaWQ7XG5cbiAgICAvLyBFbmhhbmNlZCBmb3JtYXR0aW5nIGxvZ2ljXG4gICAgbGV0IGRpc3BsYXlUZXh0ID0gXCJcIjtcbiAgICBpZiAoZGF0YVR5cGUgPT09IFwiY2l0eVwiKSB7XG4gICAgICBkaXNwbGF5VGV4dCA9IGZvcm1hdEFwaU5hbWUoaXRlbS5uYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlzcGxheVRleHQgPSBpdGVtLm5hbWU7XG4gICAgfVxuXG4gICAgb3B0aW9uLnRleHRDb250ZW50ID0gZGlzcGxheVRleHQ7XG4gICAgb3B0aW9uLnNldEF0dHJpYnV0ZShcImRhdGEtcmF3LW5hbWVcIiwgaXRlbS5uYW1lKTsgLy8gU3RvcmUgb3JpZ2luYWwgbmFtZVxuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gIH0pO1xuXG4gIC8vIFVwZGF0ZSBET00gaW4gb25lIG9wZXJhdGlvblxuICBlbGVtZW50LmlubmVySFRNTCA9IFwiXCI7XG4gIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICBlbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG5cbiAgLy8gQWRkIGZhZGUtaW4gYW5pbWF0aW9uXG4gIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZhZGUtaW5cIik7XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8vIC0tLSBFbmhhbmNlZCBIZWxwZXIgRnVuY3Rpb25zIC0tLVxuXG4vKipcbiAqIENyZWF0ZSBlbmhhbmNlZCBmb3JtIGZpZWxkIHdpdGggdmFsaWRhdGlvblxuICovXG5mdW5jdGlvbiBjcmVhdGVFbmhhbmNlZEZpZWxkKGNvbmZpZykge1xuICBjb25zb2xlLndhcm4oXCJFbmhhbmNlZCBmaWVsZCBjcmVhdGlvbiBub3QgYXZhaWxhYmxlIGluIGZhbGxiYWNrIG1vZGVcIik7XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEJhdGNoIHVwZGF0ZSBtdWx0aXBsZSBzZWxlY3RzIGVmZmljaWVudGx5XG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVNlbGVjdFN0YXRlcyh1cGRhdGVzKSB7XG4gIHVwZGF0ZXMuZm9yRWFjaCgoeyBlbGVtZW50LCBkYXRhLCBjb25maWcgfSkgPT4ge1xuICAgIHBvcHVsYXRlU2VsZWN0KFxuICAgICAgZWxlbWVudCxcbiAgICAgIGRhdGEsXG4gICAgICBjb25maWcuZGVmYXVsdFRleHQsXG4gICAgICBjb25maWcuZW1wdHlUZXh0LFxuICAgICAgY29uZmlnLmRhdGFUeXBlXG4gICAgKTtcbiAgfSk7XG59XG5cbi8qKlxuICogRW5oYW5jZWQgZXJyb3IgZGlzcGxheSB3aXRoIGJldHRlciBVWFxuICovXG5mdW5jdGlvbiBzaG93RmllbGRFcnJvcihmaWVsZE5hbWUsIGVycm9yKSB7XG4gIGNvbnN0IGZpZWxkID0gZG9tRWxlbWVudHMuZ2V0KGZpZWxkTmFtZSk7XG4gIGlmIChmaWVsZCkge1xuICAgIGZpZWxkLmNsYXNzTGlzdC5hZGQoXCJlcnJvclwiKTtcblxuICAgIC8vIFNob3cgZXJyb3IgbWVzc2FnZVxuICAgIGxldCBlcnJvckVsZW1lbnQgPSBmaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoXCIuZmllbGQtZXJyb3JcIik7XG4gICAgaWYgKCFlcnJvckVsZW1lbnQpIHtcbiAgICAgIGVycm9yRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBlcnJvckVsZW1lbnQuY2xhc3NOYW1lID0gXCJmaWVsZC1lcnJvclwiO1xuICAgICAgZmllbGQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlcnJvckVsZW1lbnQpO1xuICAgIH1cblxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xuICB9XG59XG5cbi8qKlxuICogQ2xlYXIgZmllbGQgZXJyb3Igc3RhdGVcbiAqL1xuZnVuY3Rpb24gY2xlYXJGaWVsZEVycm9yKGZpZWxkTmFtZSkge1xuICBjb25zdCBmaWVsZCA9IGRvbUVsZW1lbnRzLmdldChmaWVsZE5hbWUpO1xuICBpZiAoZmllbGQpIHtcbiAgICBmaWVsZC5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3JcIik7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKFwiLmZpZWxkLWVycm9yXCIpO1xuICAgIGlmIChlcnJvckVsZW1lbnQpIHtcbiAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgIH1cbiAgfVxufVxuXG4vLyAtLS0gQmFja3dhcmQgQ29tcGF0aWJpbGl0eSBMYXllciAtLS1cbi8vIEV4cG9ydCBpbmRpdmlkdWFsIGVsZW1lbnRzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG5jb25zdCBjaXR5U2VsZWN0ID0gZG9tRWxlbWVudHMuZ2V0KFwiY2l0eVNlbGVjdFwiKTtcbmNvbnN0IHpvbmluZ1NlbGVjdCA9IGRvbUVsZW1lbnRzLmdldChcInpvbmluZ1NlbGVjdFwiKTtcbmNvbnN0IHpvbmVTZWxlY3QgPSBkb21FbGVtZW50cy5nZXQoXCJ6b25lU2VsZWN0XCIpO1xuY29uc3QgdHlwb2xvZ2llU2VsZWN0ID0gZG9tRWxlbWVudHMuZ2V0KFwidHlwb2xvZ2llU2VsZWN0XCIpO1xuY29uc3Qgc3ludGhlc2lzQnRuID0gZG9tRWxlbWVudHMuZ2V0KFwic3ludGhlc2lzQnRuXCIpO1xuY29uc3Qgc3RhdHVzTWVzc2FnZSA9IGRvbUVsZW1lbnRzLmdldChcInN0YXR1c01lc3NhZ2VcIik7XG5cbmNvbnN0IGNpdHlTcGlubmVyID0gZG9tRWxlbWVudHMuZ2V0KFwiY2l0eVNwaW5uZXJcIik7XG5jb25zdCB6b25pbmdTcGlubmVyID0gZG9tRWxlbWVudHMuZ2V0KFwiem9uaW5nU3Bpbm5lclwiKTtcbmNvbnN0IHpvbmVTcGlubmVyID0gZG9tRWxlbWVudHMuZ2V0KFwiem9uZVNwaW5uZXJcIik7XG5jb25zdCB0eXBvbG9naWVTcGlubmVyID0gZG9tRWxlbWVudHMuZ2V0KFwidHlwb2xvZ2llU3Bpbm5lclwiKTtcbmNvbnN0IGRvY3VtZW50U3Bpbm5lciA9IGRvbUVsZW1lbnRzLmdldChcImRvY3VtZW50U3Bpbm5lclwiKTtcblxuY29uc3QgdXNlclN0YXR1cyA9IGRvbUVsZW1lbnRzLmdldChcInVzZXJTdGF0dXNcIik7XG5jb25zdCBsb2dvdXRCdG4gPSBkb21FbGVtZW50cy5nZXQoXCJsb2dvdXRCdG5cIik7XG5jb25zdCBsb2dpbkxpbmsgPSBkb21FbGVtZW50cy5nZXQoXCJsb2dpbkxpbmtcIik7XG5jb25zdCBzaWdudXBMaW5rID0gZG9tRWxlbWVudHMuZ2V0KFwic2lnbnVwTGlua1wiKTtcblxuLy8gLS0tIEVuaGFuY2VkIEV4cG9ydHMgLS0tXG5leHBvcnQge1xuICAvLyBCYWNrd2FyZCBjb21wYXRpYmlsaXR5IC0gaW5kaXZpZHVhbCBlbGVtZW50c1xuICBjaXR5U2VsZWN0LFxuICB6b25pbmdTZWxlY3QsXG4gIHpvbmVTZWxlY3QsXG4gIHR5cG9sb2dpZVNlbGVjdCxcbiAgc3ludGhlc2lzQnRuLFxuICBzdGF0dXNNZXNzYWdlLFxuICBjaXR5U3Bpbm5lcixcbiAgem9uaW5nU3Bpbm5lcixcbiAgem9uZVNwaW5uZXIsXG4gIHR5cG9sb2dpZVNwaW5uZXIsXG4gIGRvY3VtZW50U3Bpbm5lcixcbiAgdXNlclN0YXR1cyxcbiAgbG9nb3V0QnRuLFxuICBsb2dpbkxpbmssXG4gIHNpZ251cExpbmssXG5cbiAgLy8gRW5oYW5jZWQgZnVuY3Rpb25zXG4gIHNob3dTdGF0dXMsXG4gIHRvZ2dsZVNwaW5uZXIsXG4gIHJlc2V0U2VsZWN0LFxuICBmb3JtYXRBcGlOYW1lLFxuICBwb3B1bGF0ZVNlbGVjdCxcblxuICAvLyBOZXcgZW5oYW5jZWQgZnVuY3Rpb25zXG4gIGNyZWF0ZUVuaGFuY2VkRmllbGQsXG4gIHVwZGF0ZVNlbGVjdFN0YXRlcyxcbiAgc2hvd0ZpZWxkRXJyb3IsXG4gIGNsZWFyRmllbGRFcnJvcixcblxuICAvLyBFbmhhbmNlZCBlbGVtZW50cyBtYW5hZ2VyXG4gIGRvbUVsZW1lbnRzLFxuXG4gIC8vIFJlLWV4cG9ydCBVSSBjb21wb25lbnRzIGZvciBjb252ZW5pZW5jZVxuICBVSUNvbXBvbmVudHMsXG59O1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmYgPSB7fTtcbi8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbi8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5lID0gKGNodW5rSWQpID0+IHtcblx0cmV0dXJuIFByb21pc2UuYWxsKE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uZikucmVkdWNlKChwcm9taXNlcywga2V5KSA9PiB7XG5cdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5mW2tleV0oY2h1bmtJZCwgcHJvbWlzZXMpO1xuXHRcdHJldHVybiBwcm9taXNlcztcblx0fSwgW10pKTtcbn07IiwiLy8gVGhpcyBmdW5jdGlvbiBhbGxvdyB0byByZWZlcmVuY2UgYXN5bmMgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnUgPSAoY2h1bmtJZCkgPT4ge1xuXHQvLyByZXR1cm4gdXJsIGZvciBmaWxlbmFtZXMgYmFzZWQgb24gdGVtcGxhdGVcblx0cmV0dXJuIFwianMvXCIgKyBjaHVua0lkICsgXCIuY2h1bmsuanNcIjtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5qID0gNTI0OyIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiOyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQyMDk6IDAsXG5cdDUyNDogMFxufTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5mLmogPSAoY2h1bmtJZCwgcHJvbWlzZXMpID0+IHtcblx0XHQvLyBKU09OUCBjaHVuayBsb2FkaW5nIGZvciBqYXZhc2NyaXB0XG5cdFx0dmFyIGluc3RhbGxlZENodW5rRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpID8gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdIDogdW5kZWZpbmVkO1xuXHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSAhPT0gMCkgeyAvLyAwIG1lYW5zIFwiYWxyZWFkeSBpbnN0YWxsZWRcIi5cblxuXHRcdFx0Ly8gYSBQcm9taXNlIG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cblx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuXHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZih0cnVlKSB7IC8vIGFsbCBjaHVua3MgaGF2ZSBKU1xuXHRcdFx0XHRcdC8vIHNldHVwIFByb21pc2UgaW4gY2h1bmsgY2FjaGVcblx0XHRcdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IChpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbcmVzb2x2ZSwgcmVqZWN0XSkpO1xuXHRcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdID0gcHJvbWlzZSk7XG5cblx0XHRcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG5cdFx0XHRcdFx0dmFyIHVybCA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIF9fd2VicGFja19yZXF1aXJlX18udShjaHVua0lkKTtcblx0XHRcdFx0XHQvLyBjcmVhdGUgZXJyb3IgYmVmb3JlIHN0YWNrIHVud291bmQgdG8gZ2V0IHVzZWZ1bCBzdGFja3RyYWNlIGxhdGVyXG5cdFx0XHRcdFx0dmFyIGVycm9yID0gbmV3IEVycm9yKCk7XG5cdFx0XHRcdFx0dmFyIGxvYWRpbmdFbmRlZCA9IChldmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkpIHtcblx0XHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuXHRcdFx0XHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yVHlwZSA9IGV2ZW50ICYmIChldmVudC50eXBlID09PSAnbG9hZCcgPyAnbWlzc2luZycgOiBldmVudC50eXBlKTtcblx0XHRcdFx0XHRcdFx0XHR2YXIgcmVhbFNyYyA9IGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuc3JjO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLm1lc3NhZ2UgPSAnTG9hZGluZyBjaHVuayAnICsgY2h1bmtJZCArICcgZmFpbGVkLlxcbignICsgZXJyb3JUeXBlICsgJzogJyArIHJlYWxTcmMgKyAnKSc7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IubmFtZSA9ICdDaHVua0xvYWRFcnJvcic7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IudHlwZSA9IGVycm9yVHlwZTtcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5yZXF1ZXN0ID0gcmVhbFNyYztcblx0XHRcdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGFbMV0oZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmwodXJsLCBsb2FkaW5nRW5kZWQsIFwiY2h1bmstXCIgKyBjaHVua0lkLCBjaHVua0lkKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cbn07XG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua3VyYmFuZG9jc193ZWJhcHBcIl0gPSBzZWxmW1wid2VicGFja0NodW5rdXJiYW5kb2NzX3dlYmFwcFwiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzc2LDY3MV0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKDE5MDApKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJsZWFmUHJvdG90eXBlcyIsImdldFByb3RvIiwiaW5Qcm9ncmVzcyIsImRhdGFXZWJwYWNrUHJlZml4IiwiYXN5bmMiLCJsb2FkQ2l0aWVzIiwiY2l0eVNlbGVjdCIsImdldCIsImNpdHlTcGlubmVyIiwic2V0TG9hZGluZyIsImNpdGllcyIsInNldENpdGllcyIsIm1lc3NhZ2UiLCJnZXRTdGF0ZSIsImVycm9yIiwiY29uc29sZSIsImdldFNlbGVjdGVkRG9jdW1lbnQiLCJjdXJyZW50VXNlciIsImF1dGgiLCJvbkF1dGhTdGF0ZUNoYW5nZSIsImV2ZW50Iiwic2Vzc2lvbiIsInVzZXIiLCJzZXRVc2VyIiwic2VsZWN0ZWREb2N1bWVudCIsImlkIiwiZGlzYWJsZWQiLCJzb3VyY2VfcGx1X2RhdGUiLCJ1cGRhdGVVSUZvckF1dGhTdGF0ZSIsImxvZyIsInJlc2V0U2VsZWN0aW9ucyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaXR5SWQiLCJ6b25pbmdTZWxlY3QiLCJ6b25lU2VsZWN0Iiwiem9uaW5nU3Bpbm5lciIsInN5bnRoZXNpc0J0biIsImNsZWFyU2VsZWN0ZWREb2N1bWVudCIsInpvbmluZ3MiLCJsb2FkWm9uaW5ncyIsImxlbmd0aCIsInNldFpvbmluZ3MiLCJ0YXJnZXQiLCJ2YWx1ZSIsInpvbmluZ0lkIiwiem9uZVNwaW5uZXIiLCJ6b25lcyIsImxvYWRab25lcyIsInNldFpvbmVzIiwiem9uZUlkIiwidHlwb2xvZ2llSWQiLCJkb2N1bWVudFNwaW5uZXIiLCJkb2N1bWVudCIsImZpbmREb2N1bWVudCIsInNldFNlbGVjdGVkRG9jdW1lbnQiLCJ3aW5kb3ciLCJvcGVuIiwic2V0VGltZW91dCIsIlVJQ29tcG9uZW50cyIsInNob3dUb2FzdCIsInR5cGUiLCJzdGF0ZU1hbmFnZXIiLCJzZXRVSVN0YXRlIiwiZG9tRWxlbWVudHMiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJlbGVtZW50cyIsIk1hcCIsImluaXRpYWxpemVFbGVtZW50cyIsInJlZ2lzdGVyIiwibmFtZSIsImVsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNldCIsImV4aXN0cyIsImhhcyIsInNob3dTdGF0dXMiLCJzdGF0dXNFbGVtZW50IiwidGV4dENvbnRlbnQiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ3YXJuIiwidG9nZ2xlU3Bpbm5lciIsImVsZW1lbnROYW1lIiwic2hvdyIsInNwaW5uZXJFbGVtZW50IiwidG9nZ2xlIiwicmVzZXRTZWxlY3QiLCJzZWxlY3RFbGVtZW50IiwiZGVmYXVsdFRleHQiLCJpbm5lckhUTUwiLCJmb3JtYXRBcGlOYW1lIiwicmVwbGFjZSIsIm1hdGNoIiwidG9VcHBlckNhc2UiLCJ0cmltIiwicG9wdWxhdGVTZWxlY3QiLCJkYXRhIiwiZGVmYXVsdE9wdGlvblRleHQiLCJlbXB0eURhdGFUZXh0IiwiZGF0YVR5cGUiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJkZWZhdWx0T3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsInNlbGVjdGVkIiwiYXBwZW5kQ2hpbGQiLCJmb3JFYWNoIiwiaXRlbSIsIm9wdGlvbiIsImRpc3BsYXlUZXh0Iiwic2V0QXR0cmlidXRlIiwiYWRkIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwibSIsIk8iLCJyZXN1bHQiLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJmdWxmaWxsZWQiLCJqIiwiT2JqZWN0Iiwia2V5cyIsImV2ZXJ5Iiwia2V5Iiwic3BsaWNlIiwiciIsImdldFByb3RvdHlwZU9mIiwib2JqIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwidGhlbiIsIm5zIiwiY3JlYXRlIiwiZGVmIiwiY3VycmVudCIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZCIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZiIsImUiLCJjaHVua0lkIiwiUHJvbWlzZSIsImFsbCIsInJlZHVjZSIsInByb21pc2VzIiwidSIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJsIiwidXJsIiwiZG9uZSIsInB1c2giLCJzY3JpcHQiLCJuZWVkQXR0YWNoIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicyIsImdldEF0dHJpYnV0ZSIsImNoYXJzZXQiLCJ0aW1lb3V0IiwibmMiLCJzcmMiLCJvblNjcmlwdENvbXBsZXRlIiwicHJldiIsIm9uZXJyb3IiLCJvbmxvYWQiLCJjbGVhclRpbWVvdXQiLCJkb25lRm5zIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiYmluZCIsImhlYWQiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInAiLCJpbnN0YWxsZWRDaHVua3MiLCJpbnN0YWxsZWRDaHVua0RhdGEiLCJwcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIkVycm9yIiwiZXJyb3JUeXBlIiwicmVhbFNyYyIsInJlcXVlc3QiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwic29tZSIsImNodW5rTG9hZGluZ0dsb2JhbCIsInNlbGYiLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==