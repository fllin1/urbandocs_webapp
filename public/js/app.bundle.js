(()=>{"use strict";var e,t,n,r,o,i={1900:(e,t,n)=>{var r=n(9660),o=n(1235),i=n(141),s=n(6354);async function c(){const e=s.Aw.get("citySelect"),t=s.Aw.get("citySpinner");if(e){(0,s.Oh)(t,!0),o.n.setLoading(!0);try{const t=await i.K.loadCities();if((0,s.fM)(e,t,"Sélectionnez une ville","Aucune ville disponible","city"))(0,s.wc)(`${t.length} villes chargées`,"success"),o.n.setCities(t);else{const e=null===o.n.getState("user")?"Veuillez vous connecter pour accéder aux données.":"Aucune ville trouvée.";(0,s.wc)(e,"warning")}}catch(t){console.error("Erreur lors du chargement des villes:",t),(0,s.wc)("Erreur de chargement des villes","error"),(0,s.kD)(e,"Erreur chargement")}finally{(0,s.Oh)(t,!1),o.n.setLoading(!1)}}}function a(){return o.n.getState("selectedDocument")}n(3715);var l=n(9251),u=n(2387);let d=null;r.N.auth.onAuthStateChange(((e,t)=>{!function(e){if(d=e,o.n.setUser(e),e){const e=a();e&&e.id?(s.X2&&(s.X2.disabled=!1),(0,s.wc)(`Document trouvé (Source: ${(0,s.rf)(e.source_plu_date)||"Non spécifiée"}). Prêt à consulter.`,"success")):s.X2&&(s.X2.disabled=!0)}else s.X2&&(s.X2.disabled=!0)}(t?.user||null),"SIGNED_OUT"===e?(console.log("App: User signed out"),o.n.resetSelections()):"SIGNED_IN"===e?(console.log("App: User signed in"),s.ss&&s.wZ&&s.zA&&c()):"INITIAL_SESSION"===e?console.log("App: Initial session loaded"):"TOKEN_REFRESHED"===e&&console.log("App: Token refreshed")})),s.ss.addEventListener("change",(e=>{!async function(e){const t=s.Aw.get("zoningSelect"),n=s.Aw.get("zoneSelect"),r=s.Aw.get("zoningSpinner"),c=s.Aw.get("synthesisBtn");if((0,s.kD)(t,"Sélectionnez d'abord une ville"),(0,s.kD)(n,"Sélectionnez d'abord un zonage"),c&&(c.disabled=!0),o.n.clearSelectedDocument(),e){(0,s.Oh)(r,!0),o.n.setLoading(!0);try{const n=await i.K.loadZonings(e);(0,s.fM)(t,n,"Sélectionnez un zonage","Aucun zonage disponible","zoning")?((0,s.wc)(`${n.length} zonages chargés`,"success"),o.n.setZonings(n)):(0,s.wc)("Aucun zonage trouvé pour cette ville.","warning")}catch(e){console.error("Erreur lors du chargement des zonages:",e),(0,s.wc)("Erreur de chargement des zonages","error"),(0,s.kD)(t,"Erreur chargement")}finally{(0,s.Oh)(r,!1),o.n.setLoading(!1)}}else(0,s.wc)("Veuillez sélectionner une ville.","info")}(e.target.value)})),s.wZ.addEventListener("change",(e=>{!async function(e){const t=s.Aw.get("zoneSelect"),n=s.Aw.get("zoneSpinner"),r=s.Aw.get("synthesisBtn");if((0,s.kD)(t,"Sélectionnez d'abord un zonage"),r&&(r.disabled=!0),o.n.clearSelectedDocument(),e){(0,s.Oh)(n,!0),o.n.setLoading(!0);try{const n=await i.K.loadZones(e);(0,s.fM)(t,n,"Sélectionnez une zone","Aucune zone disponible","zone")?((0,s.wc)(`${n.length} zones chargées`,"success"),o.n.setZones(n)):(0,s.wc)("Aucune zone trouvée pour ce zonage.","warning")}catch(e){console.error("Erreur lors du chargement des zones:",e),(0,s.wc)("Erreur de chargement des zones","error"),(0,s.kD)(t,"Erreur chargement")}finally{(0,s.Oh)(n,!1),o.n.setLoading(!1)}}else(0,s.wc)("Veuillez sélectionner un zonage.","info")}(e.target.value)})),s.zA.addEventListener("change",(e=>{const t=e.target.value,n=s.wZ.value;t&&n?async function(e,t,n=null){const r=s.Aw.get("synthesisBtn"),c=s.Aw.get("documentSpinner");if(r&&(r.disabled=!0),o.n.clearSelectedDocument(),!o.n.getState("user"))return(0,s.wc)("Veuillez vous connecter pour accéder aux documents.","warning"),null;if(!e||!t)return(0,s.wc)("Sélection incomplète pour rechercher le document.","info"),null;(0,s.Oh)(c,!0),o.n.setLoading(!0);try{const c=await i.K.findDocument(e,t,n);return c?(o.n.setSelectedDocument(c),r&&(r.disabled=!1),(0,s.wc)("Document trouvé !","success"),c):((0,s.wc)("Aucun document trouvé pour cette sélection.","warning"),null)}catch(e){return console.error("Erreur lors de la recherche du document:",e),(0,s.wc)("Erreur lors de la recherche du document","error"),null}finally{(0,s.Oh)(c,!1),o.n.setLoading(!1)}}(n,t,"7c0f2830-f3fc-4c69-911c-470286f91982"):(0,s.wc)("Veuillez d'abord sélectionner un zoning.","warning")})),s.X2.addEventListener("click",(function(){if(!(0,l.HW)())return(0,s.wc)("Authentification requise pour télécharger.","warning"),void(s.X2.disabled=!0);const e=a();e&&e.id?((0,s.wc)("Ouverture du document...","info"),window.open(`/plu-summary?id=${e.id}`,"_blank"),setTimeout((()=>{s.X2.disabled||(0,s.wc)(`Document trouvé (Source: ${(0,s.rf)(e.source_plu_date)||"Non spécifiée"}). Prêt à consulter.`,"success")}),1500)):((0,s.wc)("Lien du document non disponible.","warning"),s.X2.disabled=!0)})),document.addEventListener("DOMContentLoaded",(async()=>{try{if(!await(0,u.Kv)(!1))return;(0,l.Mt)(),(0,s.kD)(s.ss,"Chargement..."),(0,s.kD)(s.wZ,"Sélectionnez d'abord une ville"),(0,s.kD)(s.zA,"Sélectionnez d'abord un zonage"),s.X2&&(s.X2.disabled=!0),s.ss&&s.wZ&&s.zA&&((0,s.wc)("Initialisation...","info"),await c())}catch(e){console.error("Error initializing app:",e)}}))},6354:(e,t,n)=>{n.d(t,{Aw:()=>s,Oh:()=>a,X2:()=>f,fM:()=>d,kD:()=>l,rf:()=>u,ss:()=>g,wZ:()=>p,wc:()=>c,zA:()=>h});var r=n(4587);const o={showToast:(e,t)=>console.log(`Toast: ${e} (${t})`)},i={setUIState:()=>{},setLoading:()=>{}},s=new class{constructor(){this.elements=new Map,this.initializeElements()}initializeElements(){this.register("citySelect","citySelect"),this.register("zoningSelect","zoningSelect"),this.register("zoneSelect","zoneSelect"),this.register("typologieSelect","typologieSelect"),this.register("synthesisBtn","synthesisBtn"),this.register("statusMessage","statusMessage"),this.register("citySpinner","citySpinner"),this.register("zoningSpinner","zoningSpinner"),this.register("zoneSpinner","zoneSpinner"),this.register("typologieSpinner","typologieSpinner"),this.register("documentSpinner","documentSpinner"),this.register("userStatus","userStatus"),this.register("logoutBtn","logoutBtn"),this.register("loginLink","loginLink"),this.register("signupLink","signupLink")}register(e,t){const n=document.getElementById(t);n&&this.elements.set(e,n)}get(e){return this.elements.get(e)||null}exists(e){return this.elements.has(e)&&null!==this.elements.get(e)}};function c(e,t="info"){const n=s.get("statusMessage");if(n&&(n.textContent=e,n.className=`status-message alert alert-${t}`,n.classList.remove("d-none")),"error"===t||"warning"===t)try{o.showToast(e,t,8e3)}catch(e){console.warn("Toast not available:",e)}try{i.setUIState(t,e)}catch(e){console.warn("State manager not available:",e)}}function a(e,t){const n="string"==typeof e?s.get(e):e;n&&(n.classList.toggle("d-none",!t),n.classList.toggle("hidden",!t));try{i.setLoading(t)}catch(e){console.warn("State manager not available:",e)}}function l(e,t){const n="string"==typeof e?s.get(e):e;n&&(n.innerHTML=`<option value="">${t||"Sélectionnez une option"}</option>`,n.disabled=!0,n.classList.remove("error"))}function u(e){return e?e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())).trim():""}function d(e,t,n,o,i){const c="string"==typeof e?s.get(e):e;if(!c)return console.warn(`Select element not found: ${e}`),!1;if(l(c,n),!t||0===t.length)return c.innerHTML=`<option value="">${o}</option>`,c.disabled=!0,!1;const a=document.createDocumentFragment(),d=document.createElement("option");return d.value="",d.textContent=n,d.disabled=!0,d.selected=!0,a.appendChild(d),t.forEach((e=>{const t=document.createElement("option");t.value=e.id;let n="";n="zone"===i&&r.P.hasOwnProperty(e.name)?r.P[e.name]:u(e.name),t.textContent=n,t.setAttribute("data-raw-name",e.name),a.appendChild(t)})),c.innerHTML="",c.appendChild(a),c.disabled=!1,c.classList.add("fade-in"),!0}const g=s.get("citySelect"),p=s.get("zoningSelect"),h=s.get("zoneSelect"),f=(s.get("typologieSelect"),s.get("synthesisBtn"));s.get("statusMessage"),s.get("citySpinner"),s.get("zoningSpinner"),s.get("zoneSpinner"),s.get("typologieSpinner"),s.get("documentSpinner"),s.get("userStatus"),s.get("logoutBtn"),s.get("loginLink"),s.get("signupLink")}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return i[e].call(n.exports,n,n.exports,c),n.exports}c.m=i,e=[],c.O=(t,n,r,o)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,r,o]=e[u],s=!0,a=0;a<n.length;a++)(!1&o||i>=o)&&Object.keys(c.O).every((e=>c.O[e](n[a])))?n.splice(a--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);c.r(o);var i={};t=t||[null,n({}),n([]),n(n)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,c.d(o,i),o},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,n)=>(c.f[n](e,t),t)),[])),c.u=e=>"js/"+e+".chunk.js",c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},o="urbandocs_webapp:",c.l=(e,t,n,i)=>{if(r[e])r[e].push(t);else{var s,a;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==o+n){s=d;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.setAttribute("data-webpack",o+n),s.src=e),r[e]=[t];var g=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var o=r[e];if(delete r[e],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},p=setTimeout(g.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=g.bind(null,s.onerror),s.onload=g.bind(null,s.onload),a&&document.head.appendChild(s)}},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.j=524,c.p="/",(()=>{var e={209:0,524:0};c.f.j=(t,n)=>{var r=c.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=e[t]=[n,o]));n.push(r[2]=o);var i=c.p+c.u(t),s=new Error;c.l(i,(n=>{if(c.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}}),"chunk-"+t,t)}},c.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[i,s,a]=n,l=0;if(i.some((t=>0!==e[t]))){for(r in s)c.o(s,r)&&(c.m[r]=s[r]);if(a)var u=a(c)}for(t&&t(n);l<i.length;l++)o=i[l],c.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return c.O(u)},n=self.webpackChunkurbandocs_webapp=self.webpackChunkurbandocs_webapp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=c.O(void 0,[76,671],(()=>c(1900)));a=c.O(a)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQVcsRUFFNUIsT0FBTzVDLEVBQW9CUyxFQUFFQyxJQUcxQnNGLEVBQXFCQyxLQUFtQyw2QkFBSUEsS0FBbUMsOEJBQUssR0FDeEdELEVBQW1CeEcsUUFBUW1HLEVBQXFCZCxLQUFLLEtBQU0sSUFDM0RtQixFQUFtQnRDLEtBQU9pQyxFQUFxQmQsS0FBSyxLQUFNbUIsRUFBbUJ0QyxLQUFLbUIsS0FBS21CLEcsS0NuRnZGLElBQUlFLEVBQXNCbEcsRUFBb0JTLE9BQUVOLEVBQVcsQ0FBQyxHQUFHLE1BQU0sSUFBT0gsRUFBb0IsUUFDaEdrRyxFQUFzQmxHLEVBQW9CUyxFQUFFeUYsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9jcmVhdGUgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2xvYWQgc2NyaXB0Iiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvLi9zcmMvanMvYXBpLmpzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvLi9zcmMvanMvYXBwLmpzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvLi9zcmMvanMvdWkuanMiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9lbnN1cmUgY2h1bmsiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvZ2V0IGphdmFzY3JpcHQgY2h1bmsgZmlsZW5hbWUiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvcnVudGltZUlkIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IChyZXN1bHQsIGNodW5rSWRzLCBmbiwgcHJpb3JpdHkpID0+IHtcblx0aWYoY2h1bmtJZHMpIHtcblx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0Zm9yKHZhciBpID0gZGVmZXJyZWQubGVuZ3RoOyBpID4gMCAmJiBkZWZlcnJlZFtpIC0gMV1bMl0gPiBwcmlvcml0eTsgaS0tKSBkZWZlcnJlZFtpXSA9IGRlZmVycmVkW2kgLSAxXTtcblx0XHRkZWZlcnJlZFtpXSA9IFtjaHVua0lkcywgZm4sIHByaW9yaXR5XTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIG5vdEZ1bGZpbGxlZCA9IEluZmluaXR5O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIFtjaHVua0lkcywgZm4sIHByaW9yaXR5XSA9IGRlZmVycmVkW2ldO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeSgoa2V5KSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXy5PW2tleV0oY2h1bmtJZHNbal0pKSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJ2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgPyAob2JqKSA9PiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikpIDogKG9iaikgPT4gKG9iai5fX3Byb3RvX18pO1xudmFyIGxlYWZQcm90b3R5cGVzO1xuLy8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4vLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbi8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuLy8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4vLyBtb2RlICYgMTY6IHJldHVybiB2YWx1ZSB3aGVuIGl0J3MgUHJvbWlzZS1saWtlXG4vLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuXHRpZihtb2RlICYgMSkgdmFsdWUgPSB0aGlzKHZhbHVlKTtcblx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcblx0aWYodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSkge1xuXHRcdGlmKChtb2RlICYgNCkgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuXHRcdGlmKChtb2RlICYgMTYpICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdmFsdWU7XG5cdH1cblx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcblx0dmFyIGRlZiA9IHt9O1xuXHRsZWFmUHJvdG90eXBlcyA9IGxlYWZQcm90b3R5cGVzIHx8IFtudWxsLCBnZXRQcm90byh7fSksIGdldFByb3RvKFtdKSwgZ2V0UHJvdG8oZ2V0UHJvdG8pXTtcblx0Zm9yKHZhciBjdXJyZW50ID0gbW9kZSAmIDIgJiYgdmFsdWU7IHR5cGVvZiBjdXJyZW50ID09ICdvYmplY3QnICYmICF+bGVhZlByb3RvdHlwZXMuaW5kZXhPZihjdXJyZW50KTsgY3VycmVudCA9IGdldFByb3RvKGN1cnJlbnQpKSB7XG5cdFx0T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY3VycmVudCkuZm9yRWFjaCgoa2V5KSA9PiAoZGVmW2tleV0gPSAoKSA9PiAodmFsdWVba2V5XSkpKTtcblx0fVxuXHRkZWZbJ2RlZmF1bHQnXSA9ICgpID0+ICh2YWx1ZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChucywgZGVmKTtcblx0cmV0dXJuIG5zO1xufTsiLCJ2YXIgaW5Qcm9ncmVzcyA9IHt9O1xudmFyIGRhdGFXZWJwYWNrUHJlZml4ID0gXCJ1cmJhbmRvY3Nfd2ViYXBwOlwiO1xuLy8gbG9hZFNjcmlwdCBmdW5jdGlvbiB0byBsb2FkIGEgc2NyaXB0IHZpYSBzY3JpcHQgdGFnXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmwgPSAodXJsLCBkb25lLCBrZXksIGNodW5rSWQpID0+IHtcblx0aWYoaW5Qcm9ncmVzc1t1cmxdKSB7IGluUHJvZ3Jlc3NbdXJsXS5wdXNoKGRvbmUpOyByZXR1cm47IH1cblx0dmFyIHNjcmlwdCwgbmVlZEF0dGFjaDtcblx0aWYoa2V5ICE9PSB1bmRlZmluZWQpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzY3JpcHRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgcyA9IHNjcmlwdHNbaV07XG5cdFx0XHRpZihzLmdldEF0dHJpYnV0ZShcInNyY1wiKSA9PSB1cmwgfHwgcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXdlYnBhY2tcIikgPT0gZGF0YVdlYnBhY2tQcmVmaXggKyBrZXkpIHsgc2NyaXB0ID0gczsgYnJlYWs7IH1cblx0XHR9XG5cdH1cblx0aWYoIXNjcmlwdCkge1xuXHRcdG5lZWRBdHRhY2ggPSB0cnVlO1xuXHRcdHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG5cdFx0c2NyaXB0LmNoYXJzZXQgPSAndXRmLTgnO1xuXHRcdHNjcmlwdC50aW1lb3V0ID0gMTIwO1xuXHRcdGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKSB7XG5cdFx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgX193ZWJwYWNrX3JlcXVpcmVfXy5uYyk7XG5cdFx0fVxuXHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXdlYnBhY2tcIiwgZGF0YVdlYnBhY2tQcmVmaXggKyBrZXkpO1xuXG5cdFx0c2NyaXB0LnNyYyA9IHVybDtcblx0fVxuXHRpblByb2dyZXNzW3VybF0gPSBbZG9uZV07XG5cdHZhciBvblNjcmlwdENvbXBsZXRlID0gKHByZXYsIGV2ZW50KSA9PiB7XG5cdFx0Ly8gYXZvaWQgbWVtIGxlYWtzIGluIElFLlxuXHRcdHNjcmlwdC5vbmVycm9yID0gc2NyaXB0Lm9ubG9hZCA9IG51bGw7XG5cdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHRcdHZhciBkb25lRm5zID0gaW5Qcm9ncmVzc1t1cmxdO1xuXHRcdGRlbGV0ZSBpblByb2dyZXNzW3VybF07XG5cdFx0c2NyaXB0LnBhcmVudE5vZGUgJiYgc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcblx0XHRkb25lRm5zICYmIGRvbmVGbnMuZm9yRWFjaCgoZm4pID0+IChmbihldmVudCkpKTtcblx0XHRpZihwcmV2KSByZXR1cm4gcHJldihldmVudCk7XG5cdH1cblx0dmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCB1bmRlZmluZWQsIHsgdHlwZTogJ3RpbWVvdXQnLCB0YXJnZXQ6IHNjcmlwdCB9KSwgMTIwMDAwKTtcblx0c2NyaXB0Lm9uZXJyb3IgPSBvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgc2NyaXB0Lm9uZXJyb3IpO1xuXHRzY3JpcHQub25sb2FkID0gb25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHNjcmlwdC5vbmxvYWQpO1xuXHRuZWVkQXR0YWNoICYmIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbn07IiwiLy8gc3JjL2pzL2FwaS5qc1xuLyoqXG4gKiBTdXBhYmFzZSBBUEkgLSBNb2Rlcm5pemVkXG4gKiBAbW9kdWxlIGFwaVxuICogQGRlc2NyaXB0aW9uIENsZWFuLCBlZmZpY2llbnQgQVBJIGxheWVyIHdpdGggZW5oYW5jZWQgZXJyb3IgaGFuZGxpbmcgYW5kIHN0YXRlIG1hbmFnZW1lbnRcbiAqIEB2ZXJzaW9uIDEuMC4wXG4gKiBAYXV0aG9yIEdyZXlQYW5kYVxuICpcbiAqIEBjaGFuZ2Vsb2dcbiAqIC0gMS4wLjAgKDIwMjUtMDEtMjkpOiBNb2Rlcm5pemVkIHdpdGggc3RhdGUgbWFuYWdlbWVudCBhbmQgZW5oYW5jZWQgY29tcG9uZW50c1xuICogLSAwLjEuMCAoMjAyNS0wNS0xNSk6IE1pZ3JhdGluZyBTdXBhYmFzZSBBUEkgY2FsbHMgZm9yIGltcHJvdmVkIHBlcmZvcm1hbmNlLlxuICogLSAwLjAuMSAoMjAyNS0wNC0yNik6IEluaXRpYWwgdmVyc2lvbiB3aXRoIGJhc2ljIEFQSSBmdW5jdGlvbmFsaXR5LlxuICovXG5cbi8vIEltcG9ydCBlbmhhbmNlZCBtb2R1bGVzXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gXCIuL3N1cGFiYXNlLWNsaWVudC5qc1wiO1xuaW1wb3J0IHsgYXBpU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VzL2FwaS1zZXJ2aWNlLmpzXCI7XG5pbXBvcnQgeyBzdGF0ZU1hbmFnZXIgfSBmcm9tIFwiLi9zdGF0ZS9zdGF0ZS1tYW5hZ2VyLmpzXCI7XG5pbXBvcnQge1xuICB0b2dnbGVTcGlubmVyLFxuICBzaG93U3RhdHVzLFxuICBwb3B1bGF0ZVNlbGVjdCxcbiAgcmVzZXRTZWxlY3QsXG4gIGRvbUVsZW1lbnRzLFxufSBmcm9tIFwiLi91aS5qc1wiO1xuXG4vKipcbiAqIEVuaGFuY2VkIGNpdHkgbG9hZGluZyB3aXRoIGNhY2hpbmcgYW5kIHN0YXRlIG1hbmFnZW1lbnRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gbG9hZENpdGllcygpIHtcbiAgY29uc3QgY2l0eVNlbGVjdCA9IGRvbUVsZW1lbnRzLmdldChcImNpdHlTZWxlY3RcIik7XG4gIGNvbnN0IGNpdHlTcGlubmVyID0gZG9tRWxlbWVudHMuZ2V0KFwiY2l0eVNwaW5uZXJcIik7XG5cbiAgaWYgKCFjaXR5U2VsZWN0KSByZXR1cm47XG5cbiAgdG9nZ2xlU3Bpbm5lcihjaXR5U3Bpbm5lciwgdHJ1ZSk7XG4gIHN0YXRlTWFuYWdlci5zZXRMb2FkaW5nKHRydWUpO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgY2l0aWVzID0gYXdhaXQgYXBpU2VydmljZS5sb2FkQ2l0aWVzKCk7XG5cbiAgICBjb25zdCBoYXNEYXRhID0gcG9wdWxhdGVTZWxlY3QoXG4gICAgICBjaXR5U2VsZWN0LFxuICAgICAgY2l0aWVzLFxuICAgICAgXCJTw6lsZWN0aW9ubmV6IHVuZSB2aWxsZVwiLFxuICAgICAgXCJBdWN1bmUgdmlsbGUgZGlzcG9uaWJsZVwiLFxuICAgICAgXCJjaXR5XCJcbiAgICApO1xuXG4gICAgaWYgKGhhc0RhdGEpIHtcbiAgICAgIHNob3dTdGF0dXMoYCR7Y2l0aWVzLmxlbmd0aH0gdmlsbGVzIGNoYXJnw6llc2AsIFwic3VjY2Vzc1wiKTtcbiAgICAgIHN0YXRlTWFuYWdlci5zZXRDaXRpZXMoY2l0aWVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSBzdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoXCJ1c2VyXCIpO1xuICAgICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICAgIGN1cnJlbnRVc2VyID09PSBudWxsXG4gICAgICAgICAgPyBcIlZldWlsbGV6IHZvdXMgY29ubmVjdGVyIHBvdXIgYWNjw6lkZXIgYXV4IGRvbm7DqWVzLlwiXG4gICAgICAgICAgOiBcIkF1Y3VuZSB2aWxsZSB0cm91dsOpZS5cIjtcbiAgICAgIHNob3dTdGF0dXMobWVzc2FnZSwgXCJ3YXJuaW5nXCIpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZHUgY2hhcmdlbWVudCBkZXMgdmlsbGVzOlwiLCBlcnJvcik7XG4gICAgc2hvd1N0YXR1cyhcIkVycmV1ciBkZSBjaGFyZ2VtZW50IGRlcyB2aWxsZXNcIiwgXCJlcnJvclwiKTtcbiAgICByZXNldFNlbGVjdChjaXR5U2VsZWN0LCBcIkVycmV1ciBjaGFyZ2VtZW50XCIpO1xuICB9IGZpbmFsbHkge1xuICAgIHRvZ2dsZVNwaW5uZXIoY2l0eVNwaW5uZXIsIGZhbHNlKTtcbiAgICBzdGF0ZU1hbmFnZXIuc2V0TG9hZGluZyhmYWxzZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBFbmhhbmNlZCB6b25pbmcgbG9hZGluZyB3aXRoIHN0YXRlIG1hbmFnZW1lbnRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gbG9hZFpvbmluZ3MoY2l0eUlkKSB7XG4gIGNvbnN0IHpvbmluZ1NlbGVjdCA9IGRvbUVsZW1lbnRzLmdldChcInpvbmluZ1NlbGVjdFwiKTtcbiAgY29uc3Qgem9uZVNlbGVjdCA9IGRvbUVsZW1lbnRzLmdldChcInpvbmVTZWxlY3RcIik7XG4gIGNvbnN0IHpvbmluZ1NwaW5uZXIgPSBkb21FbGVtZW50cy5nZXQoXCJ6b25pbmdTcGlubmVyXCIpO1xuICBjb25zdCBzeW50aGVzaXNCdG4gPSBkb21FbGVtZW50cy5nZXQoXCJzeW50aGVzaXNCdG5cIik7XG5cbiAgLy8gUmVzZXQgZGVwZW5kZW50IHNlbGVjdHNcbiAgcmVzZXRTZWxlY3Qoem9uaW5nU2VsZWN0LCBcIlPDqWxlY3Rpb25uZXogZCdhYm9yZCB1bmUgdmlsbGVcIik7XG4gIHJlc2V0U2VsZWN0KHpvbmVTZWxlY3QsIFwiU8OpbGVjdGlvbm5leiBkJ2Fib3JkIHVuIHpvbmFnZVwiKTtcbiAgaWYgKHN5bnRoZXNpc0J0bikgc3ludGhlc2lzQnRuLmRpc2FibGVkID0gdHJ1ZTtcblxuICBzdGF0ZU1hbmFnZXIuY2xlYXJTZWxlY3RlZERvY3VtZW50KCk7XG5cbiAgaWYgKCFjaXR5SWQpIHtcbiAgICBzaG93U3RhdHVzKFwiVmV1aWxsZXogc8OpbGVjdGlvbm5lciB1bmUgdmlsbGUuXCIsIFwiaW5mb1wiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0b2dnbGVTcGlubmVyKHpvbmluZ1NwaW5uZXIsIHRydWUpO1xuICBzdGF0ZU1hbmFnZXIuc2V0TG9hZGluZyh0cnVlKTtcblxuICB0cnkge1xuICAgIGNvbnN0IHpvbmluZ3MgPSBhd2FpdCBhcGlTZXJ2aWNlLmxvYWRab25pbmdzKGNpdHlJZCk7XG5cbiAgICBjb25zdCBoYXNEYXRhID0gcG9wdWxhdGVTZWxlY3QoXG4gICAgICB6b25pbmdTZWxlY3QsXG4gICAgICB6b25pbmdzLFxuICAgICAgXCJTw6lsZWN0aW9ubmV6IHVuIHpvbmFnZVwiLFxuICAgICAgXCJBdWN1biB6b25hZ2UgZGlzcG9uaWJsZVwiLFxuICAgICAgXCJ6b25pbmdcIlxuICAgICk7XG5cbiAgICBpZiAoaGFzRGF0YSkge1xuICAgICAgc2hvd1N0YXR1cyhgJHt6b25pbmdzLmxlbmd0aH0gem9uYWdlcyBjaGFyZ8Opc2AsIFwic3VjY2Vzc1wiKTtcbiAgICAgIHN0YXRlTWFuYWdlci5zZXRab25pbmdzKHpvbmluZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93U3RhdHVzKFwiQXVjdW4gem9uYWdlIHRyb3V2w6kgcG91ciBjZXR0ZSB2aWxsZS5cIiwgXCJ3YXJuaW5nXCIpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZHUgY2hhcmdlbWVudCBkZXMgem9uYWdlczpcIiwgZXJyb3IpO1xuICAgIHNob3dTdGF0dXMoXCJFcnJldXIgZGUgY2hhcmdlbWVudCBkZXMgem9uYWdlc1wiLCBcImVycm9yXCIpO1xuICAgIHJlc2V0U2VsZWN0KHpvbmluZ1NlbGVjdCwgXCJFcnJldXIgY2hhcmdlbWVudFwiKTtcbiAgfSBmaW5hbGx5IHtcbiAgICB0b2dnbGVTcGlubmVyKHpvbmluZ1NwaW5uZXIsIGZhbHNlKTtcbiAgICBzdGF0ZU1hbmFnZXIuc2V0TG9hZGluZyhmYWxzZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBFbmhhbmNlZCB6b25lIGxvYWRpbmcgd2l0aCBzdGF0ZSBtYW5hZ2VtZW50XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGxvYWRab25lcyh6b25pbmdJZCkge1xuICBjb25zdCB6b25lU2VsZWN0ID0gZG9tRWxlbWVudHMuZ2V0KFwiem9uZVNlbGVjdFwiKTtcbiAgY29uc3Qgem9uZVNwaW5uZXIgPSBkb21FbGVtZW50cy5nZXQoXCJ6b25lU3Bpbm5lclwiKTtcbiAgY29uc3Qgc3ludGhlc2lzQnRuID0gZG9tRWxlbWVudHMuZ2V0KFwic3ludGhlc2lzQnRuXCIpO1xuXG4gIHJlc2V0U2VsZWN0KHpvbmVTZWxlY3QsIFwiU8OpbGVjdGlvbm5leiBkJ2Fib3JkIHVuIHpvbmFnZVwiKTtcbiAgaWYgKHN5bnRoZXNpc0J0bikgc3ludGhlc2lzQnRuLmRpc2FibGVkID0gdHJ1ZTtcblxuICBzdGF0ZU1hbmFnZXIuY2xlYXJTZWxlY3RlZERvY3VtZW50KCk7XG5cbiAgaWYgKCF6b25pbmdJZCkge1xuICAgIHNob3dTdGF0dXMoXCJWZXVpbGxleiBzw6lsZWN0aW9ubmVyIHVuIHpvbmFnZS5cIiwgXCJpbmZvXCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRvZ2dsZVNwaW5uZXIoem9uZVNwaW5uZXIsIHRydWUpO1xuICBzdGF0ZU1hbmFnZXIuc2V0TG9hZGluZyh0cnVlKTtcblxuICB0cnkge1xuICAgIGNvbnN0IHpvbmVzID0gYXdhaXQgYXBpU2VydmljZS5sb2FkWm9uZXMoem9uaW5nSWQpO1xuXG4gICAgY29uc3QgaGFzRGF0YSA9IHBvcHVsYXRlU2VsZWN0KFxuICAgICAgem9uZVNlbGVjdCxcbiAgICAgIHpvbmVzLFxuICAgICAgXCJTw6lsZWN0aW9ubmV6IHVuZSB6b25lXCIsXG4gICAgICBcIkF1Y3VuZSB6b25lIGRpc3BvbmlibGVcIixcbiAgICAgIFwiem9uZVwiXG4gICAgKTtcblxuICAgIGlmIChoYXNEYXRhKSB7XG4gICAgICBzaG93U3RhdHVzKGAke3pvbmVzLmxlbmd0aH0gem9uZXMgY2hhcmfDqWVzYCwgXCJzdWNjZXNzXCIpO1xuICAgICAgc3RhdGVNYW5hZ2VyLnNldFpvbmVzKHpvbmVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd1N0YXR1cyhcIkF1Y3VuZSB6b25lIHRyb3V2w6llIHBvdXIgY2Ugem9uYWdlLlwiLCBcIndhcm5pbmdcIik7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkdSBjaGFyZ2VtZW50IGRlcyB6b25lczpcIiwgZXJyb3IpO1xuICAgIHNob3dTdGF0dXMoXCJFcnJldXIgZGUgY2hhcmdlbWVudCBkZXMgem9uZXNcIiwgXCJlcnJvclwiKTtcbiAgICByZXNldFNlbGVjdCh6b25lU2VsZWN0LCBcIkVycmV1ciBjaGFyZ2VtZW50XCIpO1xuICB9IGZpbmFsbHkge1xuICAgIHRvZ2dsZVNwaW5uZXIoem9uZVNwaW5uZXIsIGZhbHNlKTtcbiAgICBzdGF0ZU1hbmFnZXIuc2V0TG9hZGluZyhmYWxzZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBFbmhhbmNlZCBkb2N1bWVudCBmaW5kZXIgd2l0aCBzdGF0ZSBtYW5hZ2VtZW50XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZpbmREb2N1bWVudCh6b25pbmdJZCwgem9uZUlkLCB0eXBvbG9naWVJZCA9IG51bGwpIHtcbiAgY29uc3Qgc3ludGhlc2lzQnRuID0gZG9tRWxlbWVudHMuZ2V0KFwic3ludGhlc2lzQnRuXCIpO1xuICBjb25zdCBkb2N1bWVudFNwaW5uZXIgPSBkb21FbGVtZW50cy5nZXQoXCJkb2N1bWVudFNwaW5uZXJcIik7XG5cbiAgaWYgKHN5bnRoZXNpc0J0bikgc3ludGhlc2lzQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgc3RhdGVNYW5hZ2VyLmNsZWFyU2VsZWN0ZWREb2N1bWVudCgpO1xuXG4gIGNvbnN0IGN1cnJlbnRVc2VyID0gc3RhdGVNYW5hZ2VyLmdldFN0YXRlKFwidXNlclwiKTtcbiAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgIHNob3dTdGF0dXMoXG4gICAgICBcIlZldWlsbGV6IHZvdXMgY29ubmVjdGVyIHBvdXIgYWNjw6lkZXIgYXV4IGRvY3VtZW50cy5cIixcbiAgICAgIFwid2FybmluZ1wiXG4gICAgKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmICghem9uaW5nSWQgfHwgIXpvbmVJZCkge1xuICAgIHNob3dTdGF0dXMoXCJTw6lsZWN0aW9uIGluY29tcGzDqHRlIHBvdXIgcmVjaGVyY2hlciBsZSBkb2N1bWVudC5cIiwgXCJpbmZvXCIpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdG9nZ2xlU3Bpbm5lcihkb2N1bWVudFNwaW5uZXIsIHRydWUpO1xuICBzdGF0ZU1hbmFnZXIuc2V0TG9hZGluZyh0cnVlKTtcblxuICB0cnkge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gYXdhaXQgYXBpU2VydmljZS5maW5kRG9jdW1lbnQoXG4gICAgICB6b25pbmdJZCxcbiAgICAgIHpvbmVJZCxcbiAgICAgIHR5cG9sb2dpZUlkXG4gICAgKTtcblxuICAgIGlmIChkb2N1bWVudCkge1xuICAgICAgc3RhdGVNYW5hZ2VyLnNldFNlbGVjdGVkRG9jdW1lbnQoZG9jdW1lbnQpO1xuICAgICAgaWYgKHN5bnRoZXNpc0J0bikgc3ludGhlc2lzQnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICBzaG93U3RhdHVzKFwiRG9jdW1lbnQgdHJvdXbDqSAhXCIsIFwic3VjY2Vzc1wiKTtcbiAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd1N0YXR1cyhcIkF1Y3VuIGRvY3VtZW50IHRyb3V2w6kgcG91ciBjZXR0ZSBzw6lsZWN0aW9uLlwiLCBcIndhcm5pbmdcIik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHJlY2hlcmNoZSBkdSBkb2N1bWVudDpcIiwgZXJyb3IpO1xuICAgIHNob3dTdGF0dXMoXCJFcnJldXIgbG9ycyBkZSBsYSByZWNoZXJjaGUgZHUgZG9jdW1lbnRcIiwgXCJlcnJvclwiKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBmaW5hbGx5IHtcbiAgICB0b2dnbGVTcGlubmVyKGRvY3VtZW50U3Bpbm5lciwgZmFsc2UpO1xuICAgIHN0YXRlTWFuYWdlci5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBzZWxlY3RlZCBkb2N1bWVudCBmcm9tIHN0YXRlXG4gKi9cbmZ1bmN0aW9uIGdldFNlbGVjdGVkRG9jdW1lbnQoKSB7XG4gIHJldHVybiBzdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoXCJzZWxlY3RlZERvY3VtZW50XCIpO1xufVxuXG4vKipcbiAqIEVuaGFuY2VkIGluaXRpYWxpemF0aW9uIHdpdGggc3RhdGUgbWFuYWdlbWVudFxuICovXG5hc3luYyBmdW5jdGlvbiBpbml0aWFsaXplQXBwKCkge1xuICBzdGF0ZU1hbmFnZXIuc2V0TG9hZGluZyh0cnVlKTtcblxuICB0cnkge1xuICAgIC8vIExvYWQgaW5pdGlhbCBkYXRhXG4gICAgYXdhaXQgbG9hZENpdGllcygpO1xuXG4gICAgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3Igc3RhdGUgY2hhbmdlc1xuICAgIHN0YXRlTWFuYWdlci5zdWJzY3JpYmUoXCJ1c2VyXCIsICh1c2VyKSA9PiB7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBsb2FkQ2l0aWVzKCk7IC8vIFJlbG9hZCBjaXRpZXMgd2hlbiB1c2VyIGxvZ3MgaW5cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHNob3dTdGF0dXMoXCJBcHBsaWNhdGlvbiBpbml0aWFsaXPDqWVcIiwgXCJzdWNjZXNzXCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgZCdpbml0aWFsaXNhdGlvbjpcIiwgZXJyb3IpO1xuICAgIHNob3dTdGF0dXMoXCJFcnJldXIgZCdpbml0aWFsaXNhdGlvbiBkZSBsJ2FwcGxpY2F0aW9uXCIsIFwiZXJyb3JcIik7XG4gIH0gZmluYWxseSB7XG4gICAgc3RhdGVNYW5hZ2VyLnNldExvYWRpbmcoZmFsc2UpO1xuICB9XG59XG5cbi8vIEV4cG9ydCBjbGVhbiwgZm9jdXNlZCBBUElcbmV4cG9ydCB7XG4gIGxvYWRDaXRpZXMsXG4gIGxvYWRab25pbmdzLFxuICBsb2FkWm9uZXMsXG4gIGZpbmREb2N1bWVudCxcbiAgZ2V0U2VsZWN0ZWREb2N1bWVudCxcbiAgaW5pdGlhbGl6ZUFwcCxcbn07XG4iLCIvLyBwdWJsaWMvanMvYXBwLmpzIC0gTWFpbiBhcHBsaWNhdGlvbiBsb2dpY1xuLyoqXG4gKiBGaXJlYmFzZSBBcHBcbiAqIEBtb2R1bGUgYXBwXG4gKiBAZGVzY3JpcHRpb24gVGhpcyBtb2R1bGUgaGFuZGxlcyB0aGUgbWFpbiBhcHBsaWNhdGlvbiBsb2dpYy5cbiAqIEB2ZXJzaW9uIDAuMC43XG4gKiBAYXV0aG9yIEdyZXlQYW5kYVxuICpcbiAqIEBjaGFuZ2Vsb2dcbiAqIC0gMC4wLjcgKDIwMjUtMDEtMjkpOiBJbnRlZ3JhdGVkIHdpdGggZW5oYW5jZWQgc3RhdGUgbWFuYWdlbWVudCBhbmQgQVBJIHNlcnZpY2VcbiAqIC0gMC4wLjYgKDIwMjUtMDEtMjcpOiBSZWZhY3RvcmVkIHRvIHVzZSBzaGFyZWQgaGVhZGVyIGF1dGhlbnRpY2F0aW9uIG1vZHVsZVxuICogLSAwLjAuNSAoMjAyNS0wNS0xMyk6IEFkZGluZyBhY2NvdW50IGJ1dHRvbiB0byB0aGUgcHJvZmlsZSBwYWdlLCBjb3JyZWN0aW5nIHRoZSBsb2dpbiBwcm9tcHQuXG4gKiAtIDAuMC40ICgyMDI1LTA1LTA5KTogTW9kaWZpZWQgdGhlIGF1dGhlbnRpY2F0aW9uIHN0YXRlIG1hbmFnZW1lbnQgdG8gdXNlIFN1cGFiYXNlIEF1dGggc3lzdGVtLlxuICogLSAwLjAuMyAoMjAyNS0wNS0wOCk6IE1vdmVkIEZpcmViYXNlIGNvbmZpZ3VyYXRpb24gaW50byBhIHNlcGFyYXRlIGZpbGUuXG4gKiAtIDAuMC4yICgyMDI1LTA0LTI3KTogQWRkZWQgYXV0aGVudGljYXRpb24gc3RhdGUgbWFuYWdlbWVudCBhbmQgZG9jdW1lbnQgZG93bmxvYWQgZnVuY3Rpb25hbGl0eSB3aXRoIEZpcmViYXNlIEF1dGguXG4gKiAtIDAuMC4xICgyMDI1LTA0LTIxKTogSW5pdGlhbCB2ZXJzaW9uIHdpdGggYmFzaWMgZG9jdW1lbnQgZG93bmxvYWQgZnVuY3Rpb25hbGl0eS5cbiAqL1xuXG4vLyBJbXBvcnQgU3VwYWJhc2UgQ2xpZW50XG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gXCIuL3N1cGFiYXNlLWNsaWVudC5qc1wiO1xuXG4vLyBJbXBvcnQgZW5oYW5jZWQgc3RhdGUgbWFuYWdlbWVudFxuaW1wb3J0IHsgc3RhdGVNYW5hZ2VyIH0gZnJvbSBcIi4vc3RhdGUvc3RhdGUtbWFuYWdlci5qc1wiO1xuXG4vLyBJbXBvcnQgQVBJIGZ1bmN0aW9uc1xuaW1wb3J0IHtcbiAgbG9hZENpdGllcyxcbiAgbG9hZFpvbmluZ3MsXG4gIGxvYWRab25lcyxcbiAgZmluZERvY3VtZW50LFxuICBnZXRTZWxlY3RlZERvY3VtZW50LCAvLyBGdW5jdGlvbiB0byBnZXQgdGhlIGRvY3VtZW50IGRldGFpbHMgZnJvbSBhcGkuanNcbn0gZnJvbSBcIi4vYXBpLmpzXCI7XG5cbi8vIEltcG9ydCBVSSBlbGVtZW50cyBhbmQgZnVuY3Rpb25zXG5pbXBvcnQge1xuICBjaXR5U2VsZWN0LFxuICB6b25pbmdTZWxlY3QsXG4gIHpvbmVTZWxlY3QsXG4gIHN5bnRoZXNpc0J0bixcbiAgc2hvd1N0YXR1cyxcbiAgcmVzZXRTZWxlY3QsXG4gIGZvcm1hdEFwaU5hbWUsXG4gIC8vIFJlZmVyZW5jZXMgdG8gVUkgZWxlbWVudHMgZnJvbSB1aS5qc1xuICB1c2VyU3RhdHVzLFxuICBsb2dvdXRCdG4sXG4gIGxvZ2luTGluayxcbiAgc2lnbnVwTGluayxcbn0gZnJvbSBcIi4vdWkuanNcIjtcblxuaW1wb3J0ICogYXMgYXV0aE1vZHVsZSBmcm9tIFwiLi9hdXRoL2F1dGguanNcIjtcbmltcG9ydCB7XG4gIGluaXRIZWFkZXJBdXRoLFxuICBnZXRDdXJyZW50VXNlciBhcyBnZXRIZWFkZXJDdXJyZW50VXNlcixcbn0gZnJvbSBcIi4vYXV0aC9oZWFkZXItYXV0aC5qc1wiO1xuaW1wb3J0IHsgaW5pdERlbGV0aW9uR3VhcmQgfSBmcm9tIFwiLi9hdXRoL2RlbGV0aW9uLWd1YXJkLmpzXCI7XG5cbmxldCBjdXJyZW50VXNlciA9IG51bGw7IC8vIFZhcmlhYmxlIHRvIGhvbGQgdGhlIGN1cnJlbnQgdXNlciBzdGF0ZVxuXG4vLyAtLS0gQXV0aGVudGljYXRpb24gU3RhdGUgTWFuYWdlbWVudCAtLS1cbmZ1bmN0aW9uIHVwZGF0ZVVJRm9yQXV0aFN0YXRlKHVzZXIpIHtcbiAgY3VycmVudFVzZXIgPSB1c2VyOyAvLyBVcGRhdGUgZ2xvYmFsIHVzZXIgc3RhdGVcbiAgc3RhdGVNYW5hZ2VyLnNldFVzZXIodXNlcik7IC8vIFVwZGF0ZSBzdGF0ZSBtYW5hZ2VyXG5cbiAgaWYgKHVzZXIpIHtcbiAgICAvLyBVc2VyIGlzIHNpZ25lZCBpbiAtIHVwZGF0ZSBzeW50aGVzaXMgYnV0dG9uIHN0YXRlXG4gICAgY29uc3Qgc2VsZWN0ZWREb2N1bWVudCA9IGdldFNlbGVjdGVkRG9jdW1lbnQoKTtcbiAgICBpZiAoc2VsZWN0ZWREb2N1bWVudCAmJiBzZWxlY3RlZERvY3VtZW50LmlkKSB7XG4gICAgICBpZiAoc3ludGhlc2lzQnRuKSBzeW50aGVzaXNCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHNob3dTdGF0dXMoXG4gICAgICAgIGBEb2N1bWVudCB0cm91dsOpIChTb3VyY2U6ICR7XG4gICAgICAgICAgZm9ybWF0QXBpTmFtZShzZWxlY3RlZERvY3VtZW50LnNvdXJjZV9wbHVfZGF0ZSkgfHwgXCJOb24gc3DDqWNpZmnDqWVcIlxuICAgICAgICB9KS4gUHLDqnQgw6AgY29uc3VsdGVyLmAsXG4gICAgICAgIFwic3VjY2Vzc1wiXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoc3ludGhlc2lzQnRuKSBzeW50aGVzaXNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBVc2VyIGlzIHNpZ25lZCBvdXQgLSBkaXNhYmxlIHN5bnRoZXNpcyBidXR0b25cbiAgICBpZiAoc3ludGhlc2lzQnRuKSBzeW50aGVzaXNCdG4uZGlzYWJsZWQgPSB0cnVlOyAvLyBBbHdheXMgZGlzYWJsZSBkb3dubG9hZCBpZiBsb2dnZWQgb3V0XG4gIH1cbn1cblxuLy8gQ3VzdG9tIGF1dGggc3RhdGUgY2hhbmdlIGxpc3RlbmVyIGZvciBhcHAtc3BlY2lmaWMgZnVuY3Rpb25hbGl0eVxuc3VwYWJhc2UuYXV0aC5vbkF1dGhTdGF0ZUNoYW5nZSgoZXZlbnQsIHNlc3Npb24pID0+IHtcbiAgY29uc3QgdXNlciA9IHNlc3Npb24/LnVzZXIgfHwgbnVsbDtcblxuICAvLyBVcGRhdGUgYXBwLXNwZWNpZmljIFVJIHN0YXRlIChzeW50aGVzaXMgYnV0dG9uLCBldGMuKVxuICB1cGRhdGVVSUZvckF1dGhTdGF0ZSh1c2VyKTtcblxuICBpZiAoZXZlbnQgPT09IFwiU0lHTkVEX09VVFwiKSB7XG4gICAgY29uc29sZS5sb2coXCJBcHA6IFVzZXIgc2lnbmVkIG91dFwiKTtcbiAgICBzdGF0ZU1hbmFnZXIucmVzZXRTZWxlY3Rpb25zKCk7XG4gIH0gZWxzZSBpZiAoZXZlbnQgPT09IFwiU0lHTkVEX0lOXCIpIHtcbiAgICBjb25zb2xlLmxvZyhcIkFwcDogVXNlciBzaWduZWQgaW5cIik7XG4gICAgLy8gUmVsb2FkIGNpdGllcyB3aGVuIHVzZXIgc2lnbnMgaW5cbiAgICBpZiAoY2l0eVNlbGVjdCAmJiB6b25pbmdTZWxlY3QgJiYgem9uZVNlbGVjdCkge1xuICAgICAgbG9hZENpdGllcygpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChldmVudCA9PT0gXCJJTklUSUFMX1NFU1NJT05cIikge1xuICAgIGNvbnNvbGUubG9nKFwiQXBwOiBJbml0aWFsIHNlc3Npb24gbG9hZGVkXCIpO1xuICB9IGVsc2UgaWYgKGV2ZW50ID09PSBcIlRPS0VOX1JFRlJFU0hFRFwiKSB7XG4gICAgY29uc29sZS5sb2coXCJBcHA6IFRva2VuIHJlZnJlc2hlZFwiKTtcbiAgfVxufSk7XG5cbi8vIC0tLSBEb2N1bWVudCBEb3dubG9hZCBMb2dpYyAtLS1cbmZ1bmN0aW9uIGRvd25sb2FkRG9jdW1lbnQoKSB7XG4gIGNvbnN0IHVzZXIgPSBnZXRIZWFkZXJDdXJyZW50VXNlcigpOyAvLyBHZXQgdXNlciBmcm9tIGhlYWRlciBhdXRoIG1vZHVsZVxuICBpZiAoIXVzZXIpIHtcbiAgICBzaG93U3RhdHVzKFwiQXV0aGVudGlmaWNhdGlvbiByZXF1aXNlIHBvdXIgdMOpbMOpY2hhcmdlci5cIiwgXCJ3YXJuaW5nXCIpO1xuICAgIHN5bnRoZXNpc0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgcmV0dXJuOyAvLyBFeGl0IGlmIG5vdCBhdXRoZW50aWNhdGVkXG4gIH1cblxuICBjb25zdCBzZWxlY3RlZERvY3VtZW50ID0gZ2V0U2VsZWN0ZWREb2N1bWVudCgpOyAvLyBHZXQgZnJvbSBhcGkuanNcbiAgaWYgKHNlbGVjdGVkRG9jdW1lbnQgJiYgc2VsZWN0ZWREb2N1bWVudC5pZCkge1xuICAgIHNob3dTdGF0dXMoXCJPdXZlcnR1cmUgZHUgZG9jdW1lbnQuLi5cIiwgXCJpbmZvXCIpO1xuICAgIHdpbmRvdy5vcGVuKGAvcGx1LXN1bW1hcnk/aWQ9JHtzZWxlY3RlZERvY3VtZW50LmlkfWAsIFwiX2JsYW5rXCIpO1xuICAgIC8vIFJlLWRpc3BsYXkgc3VjY2VzcyBtZXNzYWdlIGFmdGVyIGEgZGVsYXlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIENoZWNrIGlmIGJ1dHRvbiBpcyBzdGlsbCBlbmFibGVkIChpLmUuLCBkb2N1bWVudCBpcyBzdGlsbCBjb25zaWRlcmVkIHZhbGlkKVxuICAgICAgaWYgKCFzeW50aGVzaXNCdG4uZGlzYWJsZWQpIHtcbiAgICAgICAgc2hvd1N0YXR1cyhcbiAgICAgICAgICBgRG9jdW1lbnQgdHJvdXbDqSAoU291cmNlOiAke1xuICAgICAgICAgICAgZm9ybWF0QXBpTmFtZShzZWxlY3RlZERvY3VtZW50LnNvdXJjZV9wbHVfZGF0ZSkgfHwgXCJOb24gc3DDqWNpZmnDqWVcIlxuICAgICAgICAgIH0pLiBQcsOqdCDDoCBjb25zdWx0ZXIuYCxcbiAgICAgICAgICBcInN1Y2Nlc3NcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sIDE1MDApO1xuICB9IGVsc2Uge1xuICAgIHNob3dTdGF0dXMoXCJMaWVuIGR1IGRvY3VtZW50IG5vbiBkaXNwb25pYmxlLlwiLCBcIndhcm5pbmdcIik7XG4gICAgc3ludGhlc2lzQnRuLmRpc2FibGVkID0gdHJ1ZTsgLy8gRW5zdXJlIGJ1dHRvbiBpcyBkaXNhYmxlZCBpZiBubyBVUkxcbiAgfVxufVxuXG4vLyA9PT0gRXZlbnQgbGlzdGVuZXJzID09PVxuY2l0eVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChldmVudCkgPT4ge1xuICBjb25zdCBjaXR5SWQgPSBldmVudC50YXJnZXQudmFsdWU7XG4gIGxvYWRab25pbmdzKGNpdHlJZCk7IC8vIENhbGwgQVBJIGZ1bmN0aW9uXG59KTtcblxuem9uaW5nU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGV2ZW50KSA9PiB7XG4gIGNvbnN0IHpvbmluZ0lkID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICBsb2FkWm9uZXMoem9uaW5nSWQpOyAvLyBDYWxsIEFQSSBmdW5jdGlvblxufSk7XG5cbnpvbmVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZXZlbnQpID0+IHtcbiAgY29uc3Qgem9uZUlkID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICBjb25zdCB6b25pbmdJZCA9IHpvbmluZ1NlbGVjdC52YWx1ZTsgLy8gR2V0IGN1cnJlbnQgem9uaW5nIHNlbGVjdGlvblxuICAvLyBUT0RPIDogdHlwb2xvZ2llU2VsZWN0IGxvZ2ljXG4gIGlmICh6b25lSWQgJiYgem9uaW5nSWQpIHtcbiAgICBmaW5kRG9jdW1lbnQoem9uaW5nSWQsIHpvbmVJZCwgXCI3YzBmMjgzMC1mM2ZjLTRjNjktOTExYy00NzAyODZmOTE5ODJcIik7IC8vIENhbGwgQVBJIGZ1bmN0aW9uXG4gIH0gZWxzZSB7XG4gICAgc2hvd1N0YXR1cyhcIlZldWlsbGV6IGQnYWJvcmQgc8OpbGVjdGlvbm5lciB1biB6b25pbmcuXCIsIFwid2FybmluZ1wiKTtcbiAgfVxuICAvLyBpZiAoem9uaW5nSWQpIHtcbiAgLy8gICBsb2FkVHlwb2xvZ2llcyh6b25lSWQsIHpvbmluZ0lkKTsgLy8gQ2FsbCBBUEkgZnVuY3Rpb25cbiAgLy8gfSBlbHNlIHtcbiAgLy8gICBzaG93U3RhdHVzKFwiVmV1aWxsZXogZCdhYm9yZCBzw6lsZWN0aW9ubmVyIHVuIHpvbmluZy5cIiwgXCJ3YXJuaW5nXCIpO1xuICAvLyB9XG59KTtcblxuLy8gdHlwb2xvZ2llU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGV2ZW50KSA9PiB7XG4vLyAgIGNvbnN0IHR5cG9sb2dpZUlkID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuLy8gICBjb25zdCB6b25lSWQgPSB6b25lU2VsZWN0LnZhbHVlO1xuLy8gICBjb25zdCB6b25pbmdJZCA9IHpvbmluZ1NlbGVjdC52YWx1ZTtcbi8vICAgaWYgKHpvbmVJZCAmJiB6b25pbmdJZCkge1xuLy8gICAgIGZpbmREb2N1bWVudCh6b25pbmdJZCwgem9uZUlkLCB0eXBvbG9naWVJZCk7IC8vIENhbGwgQVBJIGZ1bmN0aW9uXG4vLyAgIH0gZWxzZSB7XG4vLyAgICAgc2hvd1N0YXR1cyhcbi8vICAgICAgIFwiVmV1aWxsZXogZCdhYm9yZCBzw6lsZWN0aW9ubmVyIHVuIHpvbmluZyBldCB1bmUgem9uZS5cIixcbi8vICAgICAgIFwid2FybmluZ1wiXG4vLyAgICAgKTtcbi8vICAgfVxuLy8gfSk7XG5cbnN5bnRoZXNpc0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZG93bmxvYWREb2N1bWVudCk7XG5cbi8vID09PSBJbml0aWFsaXNhdGlvbiA9PT1cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBJbml0aWFsaXplIGRlbGV0aW9uIGd1YXJkIGZpcnN0IChibG9ja3MgYWNjZXNzIGlmIG5lZWRlZClcbiAgICBjb25zdCBjYW5BY2Nlc3MgPSBhd2FpdCBpbml0RGVsZXRpb25HdWFyZChmYWxzZSk7XG4gICAgaWYgKCFjYW5BY2Nlc3MpIHtcbiAgICAgIHJldHVybjsgLy8gQWNjZXNzIHdhcyBibG9ja2VkLCBzdG9wIGluaXRpYWxpemF0aW9uXG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBoZWFkZXIgYXV0aGVudGljYXRpb24gZmlyc3RcbiAgICBpbml0SGVhZGVyQXV0aCgpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBVSSBzdGF0ZVxuICAgIHJlc2V0U2VsZWN0KGNpdHlTZWxlY3QsIFwiQ2hhcmdlbWVudC4uLlwiKTtcbiAgICByZXNldFNlbGVjdCh6b25pbmdTZWxlY3QsIFwiU8OpbGVjdGlvbm5leiBkJ2Fib3JkIHVuZSB2aWxsZVwiKTtcbiAgICByZXNldFNlbGVjdCh6b25lU2VsZWN0LCBcIlPDqWxlY3Rpb25uZXogZCdhYm9yZCB1biB6b25hZ2VcIik7XG4gICAgLy8gcmVzZXRTZWxlY3QodHlwb2xvZ2llU2VsZWN0LCBcIlPDqWxlY3Rpb25uZXogZCdhYm9yZCB1bmUgem9uZVwiKTtcbiAgICBpZiAoc3ludGhlc2lzQnRuKSBzeW50aGVzaXNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuXG4gICAgLy8gTG9hZCBpbml0aWFsIGRhdGEgaWYgb24gdGhlIG1haW4gcGFnZVxuICAgIGlmIChjaXR5U2VsZWN0ICYmIHpvbmluZ1NlbGVjdCAmJiB6b25lU2VsZWN0KSB7XG4gICAgICBzaG93U3RhdHVzKFwiSW5pdGlhbGlzYXRpb24uLi5cIiwgXCJpbmZvXCIpOyAvLyBTaG93IHRoaXMgb25seSB3aGVuIHJlbGV2YW50IHNlbGVjdG9ycyBhcmUgcHJlc2VudFxuICAgICAgYXdhaXQgbG9hZENpdGllcygpOyAvLyBTdGFydCBsb2FkaW5nIGNpdGllc1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW5pdGlhbGl6aW5nIGFwcDpcIiwgZXJyb3IpO1xuICB9XG59KTtcblxuLy8gRXhwb3J0IGN1cnJlbnRVc2VyIGZvciB1c2UgaW4gYXBpLmpzXG5leHBvcnQgeyBjdXJyZW50VXNlciB9O1xuIiwiLy8gcHVibGljL2pzL3VpLmpzXG4vKipcbiAqIFVJIE1vZHVsZVxuICogQG1vZHVsZSB1aVxuICogQGRlc2NyaXB0aW9uIFVwZ3JhZGVkIFVJIG1vZHVsZSB3aXRoIGVuaGFuY2VkIGNvbXBvbmVudHMgYW5kIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKiBAYXV0aG9yIEdyZXlQYW5kYVxuICpcbiAqIEBjaGFuZ2Vsb2dcbiAqIC0gMC4xLjAgKDIwMjUtMDEtMjkpOiBNYWpvciByZWZhY3RvciB3aXRoIGVuaGFuY2VkIGNvbXBvbmVudHMgYW5kIHN0YXRlIG1hbmFnZW1lbnQgaW50ZWdyYXRpb25cbiAqIC0gMC4wLjEgKDIwMjUtMDQtMjYpOiBJbml0aWFsIHZlcnNpb24gd2l0aCBiYXNpYyBVSSBmdW5jdGlvbnMgYW5kIGVsZW1lbnQgcmVmZXJlbmNlc1xuICovXG5cbmltcG9ydCB7IHpvbmVOYW1lTWFwcGluZ3MgfSBmcm9tIFwiLi9tYXBwaW5ncy5qc1wiO1xuXG4vLyBTaW1wbGUgZmFsbGJhY2tzIGZvciBlbmhhbmNlZCBmZWF0dXJlc1xuY29uc3QgVUlDb21wb25lbnRzID0ge1xuICBzaG93VG9hc3Q6IChtZXNzYWdlLCB0eXBlKSA9PiBjb25zb2xlLmxvZyhgVG9hc3Q6ICR7bWVzc2FnZX0gKCR7dHlwZX0pYCksXG59O1xuXG5jb25zdCBzdGF0ZU1hbmFnZXIgPSB7XG4gIHNldFVJU3RhdGU6ICgpID0+IHt9LFxuICBzZXRMb2FkaW5nOiAoKSA9PiB7fSxcbn07XG5cbi8vIC0tLSBFbmhhbmNlZCBET00gRWxlbWVudCBNYW5hZ2VtZW50IC0tLVxuY2xhc3MgRE9NRWxlbWVudHMge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmVsZW1lbnRzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZUVsZW1lbnRzKCk7XG4gIH1cblxuICBpbml0aWFsaXplRWxlbWVudHMoKSB7XG4gICAgLy8gRm9ybSBlbGVtZW50c1xuICAgIHRoaXMucmVnaXN0ZXIoXCJjaXR5U2VsZWN0XCIsIFwiY2l0eVNlbGVjdFwiKTtcbiAgICB0aGlzLnJlZ2lzdGVyKFwiem9uaW5nU2VsZWN0XCIsIFwiem9uaW5nU2VsZWN0XCIpO1xuICAgIHRoaXMucmVnaXN0ZXIoXCJ6b25lU2VsZWN0XCIsIFwiem9uZVNlbGVjdFwiKTtcbiAgICB0aGlzLnJlZ2lzdGVyKFwidHlwb2xvZ2llU2VsZWN0XCIsIFwidHlwb2xvZ2llU2VsZWN0XCIpO1xuICAgIHRoaXMucmVnaXN0ZXIoXCJzeW50aGVzaXNCdG5cIiwgXCJzeW50aGVzaXNCdG5cIik7XG4gICAgdGhpcy5yZWdpc3RlcihcInN0YXR1c01lc3NhZ2VcIiwgXCJzdGF0dXNNZXNzYWdlXCIpO1xuXG4gICAgLy8gU3Bpbm5lciBlbGVtZW50c1xuICAgIHRoaXMucmVnaXN0ZXIoXCJjaXR5U3Bpbm5lclwiLCBcImNpdHlTcGlubmVyXCIpO1xuICAgIHRoaXMucmVnaXN0ZXIoXCJ6b25pbmdTcGlubmVyXCIsIFwiem9uaW5nU3Bpbm5lclwiKTtcbiAgICB0aGlzLnJlZ2lzdGVyKFwiem9uZVNwaW5uZXJcIiwgXCJ6b25lU3Bpbm5lclwiKTtcbiAgICB0aGlzLnJlZ2lzdGVyKFwidHlwb2xvZ2llU3Bpbm5lclwiLCBcInR5cG9sb2dpZVNwaW5uZXJcIik7XG4gICAgdGhpcy5yZWdpc3RlcihcImRvY3VtZW50U3Bpbm5lclwiLCBcImRvY3VtZW50U3Bpbm5lclwiKTtcblxuICAgIC8vIEF1dGggZWxlbWVudHNcbiAgICB0aGlzLnJlZ2lzdGVyKFwidXNlclN0YXR1c1wiLCBcInVzZXJTdGF0dXNcIik7XG4gICAgdGhpcy5yZWdpc3RlcihcImxvZ291dEJ0blwiLCBcImxvZ291dEJ0blwiKTtcbiAgICB0aGlzLnJlZ2lzdGVyKFwibG9naW5MaW5rXCIsIFwibG9naW5MaW5rXCIpO1xuICAgIHRoaXMucmVnaXN0ZXIoXCJzaWdudXBMaW5rXCIsIFwic2lnbnVwTGlua1wiKTtcbiAgfVxuXG4gIHJlZ2lzdGVyKG5hbWUsIGlkKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgdGhpcy5lbGVtZW50cy5zZXQobmFtZSwgZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0KG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50cy5nZXQobmFtZSkgfHwgbnVsbDtcbiAgfVxuXG4gIGV4aXN0cyhuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudHMuaGFzKG5hbWUpICYmIHRoaXMuZWxlbWVudHMuZ2V0KG5hbWUpICE9PSBudWxsO1xuICB9XG59XG5cbi8vIENyZWF0ZSBzaW5nbGV0b24gaW5zdGFuY2VcbmNvbnN0IGRvbUVsZW1lbnRzID0gbmV3IERPTUVsZW1lbnRzKCk7XG5cbi8vIC0tLSBFbmhhbmNlZCBVSSBGdW5jdGlvbnMgLS0tXG5cbi8qKlxuICogRW5oYW5jZWQgc3RhdHVzIG1lc3NhZ2UgZGlzcGxheSB3aXRoIHRvYXN0IGludGVncmF0aW9uXG4gKi9cbmZ1bmN0aW9uIHNob3dTdGF0dXMobWVzc2FnZSwgdHlwZSA9IFwiaW5mb1wiKSB7XG4gIGNvbnN0IHN0YXR1c0VsZW1lbnQgPSBkb21FbGVtZW50cy5nZXQoXCJzdGF0dXNNZXNzYWdlXCIpO1xuXG4gIGlmIChzdGF0dXNFbGVtZW50KSB7XG4gICAgLy8gVXBkYXRlIHRoZSBleGlzdGluZyBzdGF0dXMgbWVzc2FnZSBlbGVtZW50XG4gICAgc3RhdHVzRWxlbWVudC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgc3RhdHVzRWxlbWVudC5jbGFzc05hbWUgPSBgc3RhdHVzLW1lc3NhZ2UgYWxlcnQgYWxlcnQtJHt0eXBlfWA7XG4gICAgc3RhdHVzRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZC1ub25lXCIpO1xuICB9XG5cbiAgLy8gQWxzbyBzaG93IGEgdG9hc3QgZm9yIGJldHRlciBVWCAob3B0aW9uYWwsIGNhbiBiZSBkaXNhYmxlZClcbiAgaWYgKHR5cGUgPT09IFwiZXJyb3JcIiB8fCB0eXBlID09PSBcIndhcm5pbmdcIikge1xuICAgIHRyeSB7XG4gICAgICBVSUNvbXBvbmVudHMuc2hvd1RvYXN0KG1lc3NhZ2UsIHR5cGUsIDgwMDApOyAvLyBMb25nZXIgZHVyYXRpb24gZm9yIGVycm9yc1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJUb2FzdCBub3QgYXZhaWxhYmxlOlwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIHN0YXRlXG4gIHRyeSB7XG4gICAgc3RhdGVNYW5hZ2VyLnNldFVJU3RhdGUodHlwZSwgbWVzc2FnZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKFwiU3RhdGUgbWFuYWdlciBub3QgYXZhaWxhYmxlOlwiLCBlcnJvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBFbmhhbmNlZCBzcGlubmVyIG1hbmFnZW1lbnQgd2l0aCBmYWxsYmFja1xuICovXG5mdW5jdGlvbiB0b2dnbGVTcGlubmVyKGVsZW1lbnROYW1lLCBzaG93KSB7XG4gIGNvbnN0IHNwaW5uZXJFbGVtZW50ID1cbiAgICB0eXBlb2YgZWxlbWVudE5hbWUgPT09IFwic3RyaW5nXCJcbiAgICAgID8gZG9tRWxlbWVudHMuZ2V0KGVsZW1lbnROYW1lKVxuICAgICAgOiBlbGVtZW50TmFtZTtcblxuICBpZiAoc3Bpbm5lckVsZW1lbnQpIHtcbiAgICBzcGlubmVyRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiZC1ub25lXCIsICFzaG93KTtcbiAgICBzcGlubmVyRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIsICFzaG93KTtcbiAgfVxuXG4gIC8vIFVwZGF0ZSBnbG9iYWwgbG9hZGluZyBzdGF0ZVxuICB0cnkge1xuICAgIHN0YXRlTWFuYWdlci5zZXRMb2FkaW5nKHNob3cpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUud2FybihcIlN0YXRlIG1hbmFnZXIgbm90IGF2YWlsYWJsZTpcIiwgZXJyb3IpO1xuICB9XG59XG5cbi8qKlxuICogRW5oYW5jZWQgc2VsZWN0IHJlc2V0IHdpdGggYmV0dGVyIFVYXG4gKi9cbmZ1bmN0aW9uIHJlc2V0U2VsZWN0KHNlbGVjdEVsZW1lbnQsIGRlZmF1bHRUZXh0KSB7XG4gIGNvbnN0IGVsZW1lbnQgPVxuICAgIHR5cGVvZiBzZWxlY3RFbGVtZW50ID09PSBcInN0cmluZ1wiXG4gICAgICA/IGRvbUVsZW1lbnRzLmdldChzZWxlY3RFbGVtZW50KVxuICAgICAgOiBzZWxlY3RFbGVtZW50O1xuXG4gIGlmIChlbGVtZW50KSB7XG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSBgPG9wdGlvbiB2YWx1ZT1cIlwiPiR7XG4gICAgICBkZWZhdWx0VGV4dCB8fCBcIlPDqWxlY3Rpb25uZXogdW5lIG9wdGlvblwiXG4gICAgfTwvb3B0aW9uPmA7XG4gICAgZWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3JcIik7IC8vIFJlbW92ZSBhbnkgZXJyb3Igc3RhdGVcbiAgfVxufVxuXG4vKipcbiAqIEVuaGFuY2VkIG5hbWUgZm9ybWF0dGluZyB3aXRoIGJldHRlciBVbmljb2RlIHN1cHBvcnRcbiAqL1xuZnVuY3Rpb24gZm9ybWF0QXBpTmFtZShuYW1lKSB7XG4gIGlmICghbmFtZSkgcmV0dXJuIFwiXCI7XG5cbiAgcmV0dXJuIG5hbWVcbiAgICAucmVwbGFjZSgvXy9nLCBcIiBcIilcbiAgICAucmVwbGFjZSgvXFxiXFx3L2csIChjaGFyKSA9PiBjaGFyLnRvVXBwZXJDYXNlKCkpXG4gICAgLnRyaW0oKTtcbn1cblxuLyoqXG4gKiBFbmhhbmNlZCBzZWxlY3QgcG9wdWxhdGlvbiB3aXRoIGVycm9yIGhhbmRsaW5nIGFuZCBhbmltYXRpb25zXG4gKi9cbmZ1bmN0aW9uIHBvcHVsYXRlU2VsZWN0KFxuICBzZWxlY3RFbGVtZW50LFxuICBkYXRhLFxuICBkZWZhdWx0T3B0aW9uVGV4dCxcbiAgZW1wdHlEYXRhVGV4dCxcbiAgZGF0YVR5cGVcbikge1xuICBjb25zdCBlbGVtZW50ID1cbiAgICB0eXBlb2Ygc2VsZWN0RWxlbWVudCA9PT0gXCJzdHJpbmdcIlxuICAgICAgPyBkb21FbGVtZW50cy5nZXQoc2VsZWN0RWxlbWVudClcbiAgICAgIDogc2VsZWN0RWxlbWVudDtcblxuICBpZiAoIWVsZW1lbnQpIHtcbiAgICBjb25zb2xlLndhcm4oYFNlbGVjdCBlbGVtZW50IG5vdCBmb3VuZDogJHtzZWxlY3RFbGVtZW50fWApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFJlc2V0IGZpcnN0XG4gIHJlc2V0U2VsZWN0KGVsZW1lbnQsIGRlZmF1bHRPcHRpb25UZXh0KTtcblxuICBpZiAoIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IGA8b3B0aW9uIHZhbHVlPVwiXCI+JHtlbXB0eURhdGFUZXh0fTwvb3B0aW9uPmA7XG4gICAgZWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gQ3JlYXRlIGRvY3VtZW50IGZyYWdtZW50IGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgLy8gQWRkIGRlZmF1bHQgb3B0aW9uXG4gIGNvbnN0IGRlZmF1bHRPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICBkZWZhdWx0T3B0aW9uLnZhbHVlID0gXCJcIjtcbiAgZGVmYXVsdE9wdGlvbi50ZXh0Q29udGVudCA9IGRlZmF1bHRPcHRpb25UZXh0O1xuICBkZWZhdWx0T3B0aW9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgZGVmYXVsdE9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gIGZyYWdtZW50LmFwcGVuZENoaWxkKGRlZmF1bHRPcHRpb24pO1xuXG4gIC8vIEFkZCBkYXRhIG9wdGlvbnNcbiAgZGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICBvcHRpb24udmFsdWUgPSBpdGVtLmlkO1xuXG4gICAgLy8gRW5oYW5jZWQgZm9ybWF0dGluZyBsb2dpY1xuICAgIGxldCBkaXNwbGF5VGV4dCA9IFwiXCI7XG4gICAgaWYgKGRhdGFUeXBlID09PSBcInpvbmVcIiAmJiB6b25lTmFtZU1hcHBpbmdzLmhhc093blByb3BlcnR5KGl0ZW0ubmFtZSkpIHtcbiAgICAgIGRpc3BsYXlUZXh0ID0gem9uZU5hbWVNYXBwaW5nc1tpdGVtLm5hbWVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXNwbGF5VGV4dCA9IGZvcm1hdEFwaU5hbWUoaXRlbS5uYW1lKTtcbiAgICB9XG5cbiAgICBvcHRpb24udGV4dENvbnRlbnQgPSBkaXNwbGF5VGV4dDtcbiAgICBvcHRpb24uc2V0QXR0cmlidXRlKFwiZGF0YS1yYXctbmFtZVwiLCBpdGVtLm5hbWUpOyAvLyBTdG9yZSBvcmlnaW5hbCBuYW1lXG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgfSk7XG5cbiAgLy8gVXBkYXRlIERPTSBpbiBvbmUgb3BlcmF0aW9uXG4gIGVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcbiAgZWxlbWVudC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gIGVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcblxuICAvLyBBZGQgZmFkZS1pbiBhbmltYXRpb25cbiAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZmFkZS1pblwiKTtcblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gLS0tIEVuaGFuY2VkIEhlbHBlciBGdW5jdGlvbnMgLS0tXG5cbi8qKlxuICogQ3JlYXRlIGVuaGFuY2VkIGZvcm0gZmllbGQgd2l0aCB2YWxpZGF0aW9uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUVuaGFuY2VkRmllbGQoY29uZmlnKSB7XG4gIGNvbnNvbGUud2FybihcIkVuaGFuY2VkIGZpZWxkIGNyZWF0aW9uIG5vdCBhdmFpbGFibGUgaW4gZmFsbGJhY2sgbW9kZVwiKTtcbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQmF0Y2ggdXBkYXRlIG11bHRpcGxlIHNlbGVjdHMgZWZmaWNpZW50bHlcbiAqL1xuZnVuY3Rpb24gdXBkYXRlU2VsZWN0U3RhdGVzKHVwZGF0ZXMpIHtcbiAgdXBkYXRlcy5mb3JFYWNoKCh7IGVsZW1lbnQsIGRhdGEsIGNvbmZpZyB9KSA9PiB7XG4gICAgcG9wdWxhdGVTZWxlY3QoXG4gICAgICBlbGVtZW50LFxuICAgICAgZGF0YSxcbiAgICAgIGNvbmZpZy5kZWZhdWx0VGV4dCxcbiAgICAgIGNvbmZpZy5lbXB0eVRleHQsXG4gICAgICBjb25maWcuZGF0YVR5cGVcbiAgICApO1xuICB9KTtcbn1cblxuLyoqXG4gKiBFbmhhbmNlZCBlcnJvciBkaXNwbGF5IHdpdGggYmV0dGVyIFVYXG4gKi9cbmZ1bmN0aW9uIHNob3dGaWVsZEVycm9yKGZpZWxkTmFtZSwgZXJyb3IpIHtcbiAgY29uc3QgZmllbGQgPSBkb21FbGVtZW50cy5nZXQoZmllbGROYW1lKTtcbiAgaWYgKGZpZWxkKSB7XG4gICAgZmllbGQuY2xhc3NMaXN0LmFkZChcImVycm9yXCIpO1xuXG4gICAgLy8gU2hvdyBlcnJvciBtZXNzYWdlXG4gICAgbGV0IGVycm9yRWxlbWVudCA9IGZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcihcIi5maWVsZC1lcnJvclwiKTtcbiAgICBpZiAoIWVycm9yRWxlbWVudCkge1xuICAgICAgZXJyb3JFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGVycm9yRWxlbWVudC5jbGFzc05hbWUgPSBcImZpZWxkLWVycm9yXCI7XG4gICAgICBmaWVsZC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGVycm9yRWxlbWVudCk7XG4gICAgfVxuXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3I7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhciBmaWVsZCBlcnJvciBzdGF0ZVxuICovXG5mdW5jdGlvbiBjbGVhckZpZWxkRXJyb3IoZmllbGROYW1lKSB7XG4gIGNvbnN0IGZpZWxkID0gZG9tRWxlbWVudHMuZ2V0KGZpZWxkTmFtZSk7XG4gIGlmIChmaWVsZCkge1xuICAgIGZpZWxkLmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvclwiKTtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoXCIuZmllbGQtZXJyb3JcIik7XG4gICAgaWYgKGVycm9yRWxlbWVudCkge1xuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgfVxuICB9XG59XG5cbi8vIC0tLSBCYWNrd2FyZCBDb21wYXRpYmlsaXR5IExheWVyIC0tLVxuLy8gRXhwb3J0IGluZGl2aWR1YWwgZWxlbWVudHMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbmNvbnN0IGNpdHlTZWxlY3QgPSBkb21FbGVtZW50cy5nZXQoXCJjaXR5U2VsZWN0XCIpO1xuY29uc3Qgem9uaW5nU2VsZWN0ID0gZG9tRWxlbWVudHMuZ2V0KFwiem9uaW5nU2VsZWN0XCIpO1xuY29uc3Qgem9uZVNlbGVjdCA9IGRvbUVsZW1lbnRzLmdldChcInpvbmVTZWxlY3RcIik7XG5jb25zdCB0eXBvbG9naWVTZWxlY3QgPSBkb21FbGVtZW50cy5nZXQoXCJ0eXBvbG9naWVTZWxlY3RcIik7XG5jb25zdCBzeW50aGVzaXNCdG4gPSBkb21FbGVtZW50cy5nZXQoXCJzeW50aGVzaXNCdG5cIik7XG5jb25zdCBzdGF0dXNNZXNzYWdlID0gZG9tRWxlbWVudHMuZ2V0KFwic3RhdHVzTWVzc2FnZVwiKTtcblxuY29uc3QgY2l0eVNwaW5uZXIgPSBkb21FbGVtZW50cy5nZXQoXCJjaXR5U3Bpbm5lclwiKTtcbmNvbnN0IHpvbmluZ1NwaW5uZXIgPSBkb21FbGVtZW50cy5nZXQoXCJ6b25pbmdTcGlubmVyXCIpO1xuY29uc3Qgem9uZVNwaW5uZXIgPSBkb21FbGVtZW50cy5nZXQoXCJ6b25lU3Bpbm5lclwiKTtcbmNvbnN0IHR5cG9sb2dpZVNwaW5uZXIgPSBkb21FbGVtZW50cy5nZXQoXCJ0eXBvbG9naWVTcGlubmVyXCIpO1xuY29uc3QgZG9jdW1lbnRTcGlubmVyID0gZG9tRWxlbWVudHMuZ2V0KFwiZG9jdW1lbnRTcGlubmVyXCIpO1xuXG5jb25zdCB1c2VyU3RhdHVzID0gZG9tRWxlbWVudHMuZ2V0KFwidXNlclN0YXR1c1wiKTtcbmNvbnN0IGxvZ291dEJ0biA9IGRvbUVsZW1lbnRzLmdldChcImxvZ291dEJ0blwiKTtcbmNvbnN0IGxvZ2luTGluayA9IGRvbUVsZW1lbnRzLmdldChcImxvZ2luTGlua1wiKTtcbmNvbnN0IHNpZ251cExpbmsgPSBkb21FbGVtZW50cy5nZXQoXCJzaWdudXBMaW5rXCIpO1xuXG4vLyAtLS0gRW5oYW5jZWQgRXhwb3J0cyAtLS1cbmV4cG9ydCB7XG4gIC8vIEJhY2t3YXJkIGNvbXBhdGliaWxpdHkgLSBpbmRpdmlkdWFsIGVsZW1lbnRzXG4gIGNpdHlTZWxlY3QsXG4gIHpvbmluZ1NlbGVjdCxcbiAgem9uZVNlbGVjdCxcbiAgdHlwb2xvZ2llU2VsZWN0LFxuICBzeW50aGVzaXNCdG4sXG4gIHN0YXR1c01lc3NhZ2UsXG4gIGNpdHlTcGlubmVyLFxuICB6b25pbmdTcGlubmVyLFxuICB6b25lU3Bpbm5lcixcbiAgdHlwb2xvZ2llU3Bpbm5lcixcbiAgZG9jdW1lbnRTcGlubmVyLFxuICB1c2VyU3RhdHVzLFxuICBsb2dvdXRCdG4sXG4gIGxvZ2luTGluayxcbiAgc2lnbnVwTGluayxcblxuICAvLyBFbmhhbmNlZCBmdW5jdGlvbnNcbiAgc2hvd1N0YXR1cyxcbiAgdG9nZ2xlU3Bpbm5lcixcbiAgcmVzZXRTZWxlY3QsXG4gIGZvcm1hdEFwaU5hbWUsXG4gIHBvcHVsYXRlU2VsZWN0LFxuXG4gIC8vIE5ldyBlbmhhbmNlZCBmdW5jdGlvbnNcbiAgY3JlYXRlRW5oYW5jZWRGaWVsZCxcbiAgdXBkYXRlU2VsZWN0U3RhdGVzLFxuICBzaG93RmllbGRFcnJvcixcbiAgY2xlYXJGaWVsZEVycm9yLFxuXG4gIC8vIEVuaGFuY2VkIGVsZW1lbnRzIG1hbmFnZXJcbiAgZG9tRWxlbWVudHMsXG5cbiAgLy8gUmUtZXhwb3J0IFVJIGNvbXBvbmVudHMgZm9yIGNvbnZlbmllbmNlXG4gIFVJQ29tcG9uZW50cyxcbn07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZiA9IHt9O1xuLy8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuLy8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSAoY2h1bmtJZCkgPT4ge1xuXHRyZXR1cm4gUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5mKS5yZWR1Y2UoKHByb21pc2VzLCBrZXkpID0+IHtcblx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmZba2V5XShjaHVua0lkLCBwcm9taXNlcyk7XG5cdFx0cmV0dXJuIHByb21pc2VzO1xuXHR9LCBbXSkpO1xufTsiLCIvLyBUaGlzIGZ1bmN0aW9uIGFsbG93IHRvIHJlZmVyZW5jZSBhc3luYyBjaHVua3Ncbl9fd2VicGFja19yZXF1aXJlX18udSA9IChjaHVua0lkKSA9PiB7XG5cdC8vIHJldHVybiB1cmwgZm9yIGZpbGVuYW1lcyBiYXNlZCBvbiB0ZW1wbGF0ZVxuXHRyZXR1cm4gXCJqcy9cIiArIGNodW5rSWQgKyBcIi5jaHVuay5qc1wiO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmogPSA1MjQ7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDIwOTogMCxcblx0NTI0OiAwXG59O1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmYuaiA9IChjaHVua0lkLCBwcm9taXNlcykgPT4ge1xuXHRcdC8vIEpTT05QIGNodW5rIGxvYWRpbmcgZm9yIGphdmFzY3JpcHRcblx0XHR2YXIgaW5zdGFsbGVkQ2h1bmtEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgPyBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gOiB1bmRlZmluZWQ7XG5cdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhICE9PSAwKSB7IC8vIDAgbWVhbnMgXCJhbHJlYWR5IGluc3RhbGxlZFwiLlxuXG5cdFx0XHQvLyBhIFByb21pc2UgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiLlxuXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhKSB7XG5cdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmKHRydWUpIHsgLy8gYWxsIGNodW5rcyBoYXZlIEpTXG5cdFx0XHRcdFx0Ly8gc2V0dXAgUHJvbWlzZSBpbiBjaHVuayBjYWNoZVxuXHRcdFx0XHRcdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gKGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IFtyZXNvbHZlLCByZWplY3RdKSk7XG5cdFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0gPSBwcm9taXNlKTtcblxuXHRcdFx0XHRcdC8vIHN0YXJ0IGNodW5rIGxvYWRpbmdcblx0XHRcdFx0XHR2YXIgdXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgX193ZWJwYWNrX3JlcXVpcmVfXy51KGNodW5rSWQpO1xuXHRcdFx0XHRcdC8vIGNyZWF0ZSBlcnJvciBiZWZvcmUgc3RhY2sgdW53b3VuZCB0byBnZXQgdXNlZnVsIHN0YWNrdHJhY2UgbGF0ZXJcblx0XHRcdFx0XHR2YXIgZXJyb3IgPSBuZXcgRXJyb3IoKTtcblx0XHRcdFx0XHR2YXIgbG9hZGluZ0VuZGVkID0gKGV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSkge1xuXHRcdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XG5cdFx0XHRcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSAhPT0gMCkgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgZXJyb3JUeXBlID0gZXZlbnQgJiYgKGV2ZW50LnR5cGUgPT09ICdsb2FkJyA/ICdtaXNzaW5nJyA6IGV2ZW50LnR5cGUpO1xuXHRcdFx0XHRcdFx0XHRcdHZhciByZWFsU3JjID0gZXZlbnQgJiYgZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5zcmM7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IubWVzc2FnZSA9ICdMb2FkaW5nIGNodW5rICcgKyBjaHVua0lkICsgJyBmYWlsZWQuXFxuKCcgKyBlcnJvclR5cGUgKyAnOiAnICsgcmVhbFNyYyArICcpJztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5uYW1lID0gJ0NodW5rTG9hZEVycm9yJztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci50eXBlID0gZXJyb3JUeXBlO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLnJlcXVlc3QgPSByZWFsU3JjO1xuXHRcdFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rRGF0YVsxXShlcnJvcik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubCh1cmwsIGxvYWRpbmdFbmRlZCwgXCJjaHVuay1cIiArIGNodW5rSWQsIGNodW5rSWQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxufTtcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5PLmogPSAoY2h1bmtJZCkgPT4gKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMCk7XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZSgoaWQpID0+IChpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwKSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rdXJiYW5kb2NzX3dlYmFwcFwiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt1cmJhbmRvY3Nfd2ViYXBwXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbNzYsNjcxXSwgKCkgPT4gKF9fd2VicGFja19yZXF1aXJlX18oMTkwMCkpKVxuX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcbiJdLCJuYW1lcyI6WyJkZWZlcnJlZCIsImxlYWZQcm90b3R5cGVzIiwiZ2V0UHJvdG8iLCJpblByb2dyZXNzIiwiZGF0YVdlYnBhY2tQcmVmaXgiLCJhc3luYyIsImxvYWRDaXRpZXMiLCJjaXR5U2VsZWN0IiwiZ2V0IiwiY2l0eVNwaW5uZXIiLCJzZXRMb2FkaW5nIiwiY2l0aWVzIiwibGVuZ3RoIiwic2V0Q2l0aWVzIiwibWVzc2FnZSIsImdldFN0YXRlIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0U2VsZWN0ZWREb2N1bWVudCIsImN1cnJlbnRVc2VyIiwiYXV0aCIsIm9uQXV0aFN0YXRlQ2hhbmdlIiwiZXZlbnQiLCJzZXNzaW9uIiwidXNlciIsInNldFVzZXIiLCJzZWxlY3RlZERvY3VtZW50IiwiaWQiLCJkaXNhYmxlZCIsInNvdXJjZV9wbHVfZGF0ZSIsInVwZGF0ZVVJRm9yQXV0aFN0YXRlIiwibG9nIiwicmVzZXRTZWxlY3Rpb25zIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNpdHlJZCIsInpvbmluZ1NlbGVjdCIsInpvbmVTZWxlY3QiLCJ6b25pbmdTcGlubmVyIiwic3ludGhlc2lzQnRuIiwiY2xlYXJTZWxlY3RlZERvY3VtZW50Iiwiem9uaW5ncyIsImxvYWRab25pbmdzIiwic2V0Wm9uaW5ncyIsInRhcmdldCIsInZhbHVlIiwiem9uaW5nSWQiLCJ6b25lU3Bpbm5lciIsInpvbmVzIiwibG9hZFpvbmVzIiwic2V0Wm9uZXMiLCJ6b25lSWQiLCJ0eXBvbG9naWVJZCIsImRvY3VtZW50U3Bpbm5lciIsImRvY3VtZW50IiwiZmluZERvY3VtZW50Iiwic2V0U2VsZWN0ZWREb2N1bWVudCIsIndpbmRvdyIsIm9wZW4iLCJzZXRUaW1lb3V0IiwiVUlDb21wb25lbnRzIiwic2hvd1RvYXN0IiwidHlwZSIsInN0YXRlTWFuYWdlciIsInNldFVJU3RhdGUiLCJkb21FbGVtZW50cyIsImNvbnN0cnVjdG9yIiwidGhpcyIsImVsZW1lbnRzIiwiTWFwIiwiaW5pdGlhbGl6ZUVsZW1lbnRzIiwicmVnaXN0ZXIiLCJuYW1lIiwiZWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwic2V0IiwiZXhpc3RzIiwiaGFzIiwic2hvd1N0YXR1cyIsInN0YXR1c0VsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTmFtZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsIndhcm4iLCJ0b2dnbGVTcGlubmVyIiwiZWxlbWVudE5hbWUiLCJzaG93Iiwic3Bpbm5lckVsZW1lbnQiLCJ0b2dnbGUiLCJyZXNldFNlbGVjdCIsInNlbGVjdEVsZW1lbnQiLCJkZWZhdWx0VGV4dCIsImlubmVySFRNTCIsImZvcm1hdEFwaU5hbWUiLCJyZXBsYWNlIiwiY2hhciIsInRvVXBwZXJDYXNlIiwidHJpbSIsInBvcHVsYXRlU2VsZWN0IiwiZGF0YSIsImRlZmF1bHRPcHRpb25UZXh0IiwiZW1wdHlEYXRhVGV4dCIsImRhdGFUeXBlIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiZGVmYXVsdE9wdGlvbiIsImNyZWF0ZUVsZW1lbnQiLCJzZWxlY3RlZCIsImFwcGVuZENoaWxkIiwiZm9yRWFjaCIsIml0ZW0iLCJvcHRpb24iLCJkaXNwbGF5VGV4dCIsImhhc093blByb3BlcnR5Iiwic2V0QXR0cmlidXRlIiwiYWRkIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwibSIsIk8iLCJyZXN1bHQiLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJmdWxmaWxsZWQiLCJqIiwiT2JqZWN0Iiwia2V5cyIsImV2ZXJ5Iiwia2V5Iiwic3BsaWNlIiwiciIsImdldFByb3RvdHlwZU9mIiwib2JqIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwidGhlbiIsIm5zIiwiY3JlYXRlIiwiZGVmIiwiY3VycmVudCIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZCIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZiIsImUiLCJjaHVua0lkIiwiUHJvbWlzZSIsImFsbCIsInJlZHVjZSIsInByb21pc2VzIiwidSIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJwcm9wIiwicHJvdG90eXBlIiwibCIsInVybCIsImRvbmUiLCJwdXNoIiwic2NyaXB0IiwibmVlZEF0dGFjaCIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInMiLCJnZXRBdHRyaWJ1dGUiLCJjaGFyc2V0IiwidGltZW91dCIsIm5jIiwic3JjIiwib25TY3JpcHRDb21wbGV0ZSIsInByZXYiLCJvbmVycm9yIiwib25sb2FkIiwiY2xlYXJUaW1lb3V0IiwiZG9uZUZucyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImJpbmQiLCJoZWFkIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJwIiwiaW5zdGFsbGVkQ2h1bmtzIiwiaW5zdGFsbGVkQ2h1bmtEYXRhIiwicHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJFcnJvciIsImVycm9yVHlwZSIsInJlYWxTcmMiLCJyZXF1ZXN0Iiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsIm1vcmVNb2R1bGVzIiwicnVudGltZSIsInNvbWUiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiX193ZWJwYWNrX2V4cG9ydHNfXyJdLCJzb3VyY2VSb290IjoiIn0=