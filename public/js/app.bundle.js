(()=>{"use strict";var e,n,o,t,r,i={587:(e,n,o)=>{o.d(n,{P:()=>t});const t={zone_au:"Zone AU",zone_auc1:"Zone AUC1",zone_auc2:"Zone AUC2",zone_auc3:"Zone AUC3",zone_aucru10:"Zone AUCRU10",zone_aud1:"Zone AUD1",zone_aud2:"Zone AUD2",zone_aud3:"Zone AUD3",zone_aud4:"Zone AUD4",zone_aue1:"Zone AUE1",zone_aup1r:"Zone AUP1r",zone_a:"Zone A",zone_al:"Zone AL",zone_n:"Zone N",zone_nl:"Zone NL",zone_ue1:"Zone UE1",zone_ue2:"Zone UE2",zone_ue3:"Zone UE3",zone_ue4:"Zone UE4",zone_uv:"Zone UV",zone_uz1:"Zone UZ1",zone_uz2:"Zone UZ2",zone_uz3:"Zone UZ3",zone_uz4:"Zone UZ4",zone_ua1:"Zone UA1",zone_ua2:"Zone UA2",zone_ua3:"Zone UA3",zone_ub:"Zone UB",zone_uc1:"Zone UC1",zone_uc2:"Zone UC2",zone_uc3:"Zone UC3",zone_ucru1:"Zone UCRU1",zone_ucru2:"Zone UCRU2",zone_ucru3:"Zone UCRU3",zone_ucru4:"Zone UCRU4",zone_ucru5:"Zone UCRU5",zone_ucru6:"Zone UCRU6",zone_ucru7:"Zone UCRU7",zone_ucru8:"Zone UCRU8",zone_ucru9:"Zone UCRU9",zone_ucru11:"Zone UCRU11",zone_ud1:"Zone UD1",zone_ud2:"Zone UD2",zone_ud3:"Zone UD3",zone_ud4:"Zone UD4"}},753:(e,n,o)=>{o.d(n,{N:()=>Z});const t=(0,o(303).UU)("https://ofeyssipibktmbfebibo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9mZXlzc2lwaWJrdG1iZmViaWJvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM5MjUwOTQsImV4cCI6MjA1OTUwMTA5NH0.w71CAKfolktzRl-TmLVhHYaEbhCfVk4A7YraEUCglrU");var r=o(587);const i=document.getElementById("citySelect"),a=document.getElementById("zoningSelect"),u=document.getElementById("zoneSelect"),c=(document.getElementById("typologieSelect"),document.getElementById("synthesisBtn")),l=document.getElementById("statusMessage"),s=document.getElementById("citySpinner"),d=document.getElementById("zoningSpinner"),g=document.getElementById("zoneSpinner"),m=(document.getElementById("typologieSpinner"),document.getElementById("documentSpinner"));function f(e,n="info"){l?(l.textContent=e,l.className=`status-message alert alert-${n}`,l.classList.remove("d-none")):console.warn("Status message element not found.")}function p(e,n){e&&e.classList.toggle("d-none",!n)}function h(e,n){e?(e.innerHTML=`<option value="">${n||"Sélectionnez une option"}</option>`,e.disabled=!0):console.warn("Select element not found for reset.")}function z(e){return e?e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())):""}function y(e,n,o,t,i){return e?(h(e,o),n&&0!==n.length?(n.forEach((n=>{const o=document.createElement("option");o.value=n.id;let t="";t="zone"===i&&r.P.hasOwnProperty(n.name)?r.P[n.name]:z(n.name),o.textContent=t,e.appendChild(o)})),e.disabled=!1,!0):(e.innerHTML=`<option value="">${t}</option>`,e.disabled=!0,!1)):(console.warn("Select element not found for population."),!1)}document.getElementById("userStatus"),document.getElementById("logoutBtn"),document.getElementById("loginLink"),document.getElementById("signupLink");let b=null;function v(){return b}let _=null,U=!1;function E(e){_=e,e?localStorage.setItem("currentUser",JSON.stringify(e)):localStorage.removeItem("currentUser")}async function S(e=!0){if(e&&!U&&await async function(){try{const{data:{session:e},error:n}=await t.auth.getSession();if(n||!e)return console.log("No valid session found"),E(null),U=!1,!1;const{error:o}=await t.auth.refreshSession();return o?(console.warn("Session validation failed:",o),await t.auth.signOut(),E(null),U=!1,!1):(E(e.user),U=!0,!0)}catch(e){return console.error("Session validation error:",e),E(null),U=!1,!1}}(),!e&&!_){const e=localStorage.getItem("currentUser");if(e)try{_=JSON.parse(e)}catch(e){console.error("Error retrieving user:",e),localStorage.removeItem("currentUser")}}return _}let I=null;function w(e){I=e;const n=document.getElementById("userStatus"),o=document.getElementById("loginLink"),t=document.getElementById("signupLink"),r=document.getElementById("logoutBtn");e?(n&&(n.classList.remove("hidden"),n.textContent="Votre compte"),o&&o.classList.add("hidden"),t&&t.classList.add("hidden"),r&&r.classList.remove("hidden"),console.log("Header updated: User is authenticated")):(n&&n.classList.add("hidden"),o&&o.classList.remove("hidden"),t&&t.classList.remove("hidden"),r&&r.classList.add("hidden"),console.log("Header updated: User is not authenticated"))}let Z=null;t.auth.onAuthStateChange(((e,n)=>{!function(e){if(Z=e,e){const e=v();e&&e.id?(c&&(c.disabled=!1),f(`Document trouvé (Source: ${z(e.source_plu_date)||"Non spécifiée"}). Prêt à consulter.`,"success")):c&&(c.disabled=!0)}else c&&(c.disabled=!0)}(n?.user||null),"SIGNED_OUT"===e?console.log("App: User signed out"):"SIGNED_IN"===e?console.log("App: User signed in"):"INITIAL_SESSION"===e?console.log("App: Initial session loaded"):"TOKEN_REFRESHED"===e&&console.log("App: Token refreshed")})),i.addEventListener("change",(e=>{!async function(e){if(h(a,"Sélectionnez d'abord une city"),h(u,"Sélectionnez d'abord un zoning"),c.disabled=!0,b=null,e){p(d,!0),f("Chargement des zonings...","info"),a.disabled=!0;try{const{data:n,error:o}=await t.from("zonings").select("id, name").eq("city_id",e).order("name");if(o)throw o;y(a,n.map((e=>({id:e.id,name:e.name}))),"Sélectionnez un zoning","Aucun zonage disponible","zoning")?f(`Zonages chargés : ${n.length}`,"info"):f("Aucun zonage trouvé pour cette city.","warning")}catch(e){console.error("Erreur lors du chargement des zonings:",e),h(a,"Erreur chargement")}finally{p(d,!1)}}else f("Veuillez sélectionner une city.","info")}(e.target.value)})),a.addEventListener("change",(e=>{!async function(e){if(h(u,"Sélectionnez d'abord un zoning"),c.disabled=!0,b=null,e){p(g,!0),f("Chargement des zones...","info"),u.disabled=!0;try{const{data:n,error:o}=await t.from("zones").select("id, name").eq("zoning_id",e).order("name");if(o)throw o;y(u,n.map((e=>({id:e.id,name:e.name}))),"Sélectionnez une zone","Aucune zone disponible","zone")?f(`Zones chargées : ${n.length}`,"info"):f("Aucune zone trouvée pour ce zoning.","warning")}catch(e){console.error("Erreur lors du chargement des zones:",e),h(u,"Erreur chargement")}finally{p(g,!1)}}else f("Veuillez sélectionner un zoning.","info")}(e.target.value)})),u.addEventListener("change",(e=>{const n=e.target.value,o=a.value;n&&o?async function(e,n){if(c.disabled=!0,b=null,Z)if(e&&n){p(m,!0),f("Recherche du document...","info");try{const{data:o,error:r}=await t.from("documents").select("id, source_plu_date").eq("zoning_id",e).eq("zone_id",n).eq("typology_id","7c0f2830-f3fc-4c69-911c-470286f91982").single();if(r){if("PGRST116"===r.code)return void f("Aucun document trouvé pour cette zone.","warning");throw r}b=o,Z&&o?.id?(c.disabled=!1,f(`Document trouvé (Source: ${z(o.source_plu_date)||"Non spécifiée"}). Prêt à consulter.`,"success")):(b=null,f("Document trouvé mais lien manquant.","warning"))}catch(e){console.error("Erreur lors de la recherche du document:",e),b=null}finally{p(m,!1)}}else f("Sélection incomplète pour rechercher le document.","info");else f("Veuillez vous connecter pour accéder aux documents.","warning")}(o,n):f("Veuillez d'abord sélectionner un zoning.","warning")})),c.addEventListener("click",(function(){if(!I)return f("Authentification requise pour télécharger.","warning"),void(c.disabled=!0);const e=v();e&&e.id?(f("Ouverture du document...","info"),window.open(`/plu-summary?id=${e.id}`,"_blank"),setTimeout((()=>{c.disabled||f(`Document trouvé (Source: ${z(e.source_plu_date)||"Non spécifiée"}). Prêt à consulter.`,"success")}),1500)):(f("Lien du document non disponible.","warning"),c.disabled=!0)})),document.addEventListener("DOMContentLoaded",(async()=>{console.log("Initializing header authentication..."),function(){const e=document.getElementById("logoutBtn");e&&(e.replaceWith(e.cloneNode(!0)),document.getElementById("logoutBtn").addEventListener("click",(async e=>{e.preventDefault(),console.log("Logout initiated from header");try{const{error:e}=await t.auth.signOut();e?(console.error("Error logging out:",e.message),alert("Erreur lors de la déconnexion. Veuillez réessayer.")):console.log("Logout successful, redirecting to home")}catch(e){console.error("Exception during logout:",e),alert("Une erreur inattendue s'est produite lors de la déconnexion.")}})))}(),t.auth.onAuthStateChange(((e,n)=>{const o=n?.user||null;E(o),w(o),"SIGNED_OUT"===e?(console.log("Header auth: User signed out, redirecting to home"),setTimeout((()=>{window.location.href="/"}),100)):"SIGNED_IN"===e?console.log("Header auth: User signed in"):"INITIAL_SESSION"===e?console.log("Header auth: Initial session loaded"):"TOKEN_REFRESHED"===e&&console.log("Header auth: Token refreshed")})),w(S()),console.log("Header authentication initialized"),h(i,"Chargement..."),h(a,"Sélectionnez d'abord une ville"),h(u,"Sélectionnez d'abord un zonage"),c&&(c.disabled=!0),i&&a&&u&&(f("Initialisation...","info"),await async function(){p(s,!0),f("Chargement des cities...","info"),i.disabled=!0;try{const{data:e,error:n}=await t.from("cities").select("id, name").order("name");if(n)throw n;y(i,e.map((e=>({id:e.id,name:e.name}))),"Sélectionnez une city","Aucune ville disponible","city")?f(`Villes chargées : ${e.length}`,"info"):f(null===Z?"Veuillez vous connecter pour accéder aux données.":"Aucune ville n'a été trouvée.","warning")}catch(e){console.error("Erreur lors du chargement des cities:",e),h(i,"Erreur chargement")}finally{p(s,!1)}}())}))}},a={};function u(e){var n=a[e];if(void 0!==n)return n.exports;var o=a[e]={exports:{}};return i[e].call(o.exports,o,o.exports,u),o.exports}u.m=i,e=[],u.O=(n,o,t,r)=>{if(!o){var i=1/0;for(s=0;s<e.length;s++){for(var[o,t,r]=e[s],a=!0,c=0;c<o.length;c++)(!1&r||i>=r)&&Object.keys(u.O).every((e=>u.O[e](o[c])))?o.splice(c--,1):(a=!1,r<i&&(i=r));if(a){e.splice(s--,1);var l=t();void 0!==l&&(n=l)}}return n}r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[o,t,r]},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,u.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var r=Object.create(null);u.r(r);var i={};n=n||[null,o({}),o([]),o(o)];for(var a=2&t&&e;"object"==typeof a&&!~n.indexOf(a);a=o(a))Object.getOwnPropertyNames(a).forEach((n=>i[n]=()=>e[n]));return i.default=()=>e,u.d(r,i),r},u.d=(e,n)=>{for(var o in n)u.o(n,o)&&!u.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},u.f={},u.e=e=>Promise.all(Object.keys(u.f).reduce(((n,o)=>(u.f[o](e,n),n)),[])),u.u=e=>"js/"+e+".bundle.js",u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),u.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t={},r="urbandocs_webapp:",u.l=(e,n,o,i)=>{if(t[e])t[e].push(n);else{var a,c;if(void 0!==o)for(var l=document.getElementsByTagName("script"),s=0;s<l.length;s++){var d=l[s];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+o){a=d;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,u.nc&&a.setAttribute("nonce",u.nc),a.setAttribute("data-webpack",r+o),a.src=e),t[e]=[n];var g=(n,o)=>{a.onerror=a.onload=null,clearTimeout(m);var r=t[e];if(delete t[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(o))),n)return n(o)},m=setTimeout(g.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=g.bind(null,a.onerror),a.onload=g.bind(null,a.onload),c&&document.head.appendChild(a)}},u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;u.g.importScripts&&(e=u.g.location+"");var n=u.g.document;if(!e&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(e=n.currentScript.src),!e)){var o=n.getElementsByTagName("script");if(o.length)for(var t=o.length-1;t>-1&&(!e||!/^http(s?):/.test(e));)e=o[t--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),u.p=e+"../"})(),(()=>{var e={54:0,524:0};u.f.j=(n,o)=>{var t=u.o(e,n)?e[n]:void 0;if(0!==t)if(t)o.push(t[2]);else{var r=new Promise(((o,r)=>t=e[n]=[o,r]));o.push(t[2]=r);var i=u.p+u.u(n),a=new Error;u.l(i,(o=>{if(u.o(e,n)&&(0!==(t=e[n])&&(e[n]=void 0),t)){var r=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;a.message="Loading chunk "+n+" failed.\n("+r+": "+i+")",a.name="ChunkLoadError",a.type=r,a.request=i,t[1](a)}}),"chunk-"+n,n)}},u.O.j=n=>0===e[n];var n=(n,o)=>{var t,r,[i,a,c]=o,l=0;if(i.some((n=>0!==e[n]))){for(t in a)u.o(a,t)&&(u.m[t]=a[t]);if(c)var s=c(u)}for(n&&n(o);l<i.length;l++)r=i[l],u.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return u.O(s)},o=self.webpackChunkurbandocs_webapp=self.webpackChunkurbandocs_webapp||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))})();var c=u.O(void 0,[303],(()=>u(753)));c=u.O(c)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2NyZWF0ZSBmYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvbG9hZCBzY3JpcHQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC8uL3NyYy9qcy9tYXBwaW5ncy5qcyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwLy4vc3JjL2pzL3N1cGFiYXNlLWNsaWVudC5qcyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwLy4vc3JjL2pzL3VpLmpzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvLi9zcmMvanMvYXBpLmpzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvLi9zcmMvanMvYXV0aC9hdXRoLmpzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvLi9zcmMvanMvYXV0aC9oZWFkZXItYXV0aC5qcyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwLy4vc3JjL2pzL2FwcC5qcyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2Vuc3VyZSBjaHVuayIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwidmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mID8gKG9iaikgPT4gKE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopKSA6IChvYmopID0+IChvYmouX19wcm90b19fKTtcbnZhciBsZWFmUHJvdG90eXBlcztcbi8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuLy8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4vLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbi8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuLy8gbW9kZSAmIDE2OiByZXR1cm4gdmFsdWUgd2hlbiBpdCdzIFByb21pc2UtbGlrZVxuLy8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuX193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcblx0aWYobW9kZSAmIDEpIHZhbHVlID0gdGhpcyh2YWx1ZSk7XG5cdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG5cdGlmKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUpIHtcblx0XHRpZigobW9kZSAmIDQpICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcblx0XHRpZigobW9kZSAmIDE2KSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHZhbHVlO1xuXHR9XG5cdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG5cdHZhciBkZWYgPSB7fTtcblx0bGVhZlByb3RvdHlwZXMgPSBsZWFmUHJvdG90eXBlcyB8fCBbbnVsbCwgZ2V0UHJvdG8oe30pLCBnZXRQcm90byhbXSksIGdldFByb3RvKGdldFByb3RvKV07XG5cdGZvcih2YXIgY3VycmVudCA9IG1vZGUgJiAyICYmIHZhbHVlOyB0eXBlb2YgY3VycmVudCA9PSAnb2JqZWN0JyAmJiAhfmxlYWZQcm90b3R5cGVzLmluZGV4T2YoY3VycmVudCk7IGN1cnJlbnQgPSBnZXRQcm90byhjdXJyZW50KSkge1xuXHRcdE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGN1cnJlbnQpLmZvckVhY2goKGtleSkgPT4gKGRlZltrZXldID0gKCkgPT4gKHZhbHVlW2tleV0pKSk7XG5cdH1cblx0ZGVmWydkZWZhdWx0J10gPSAoKSA9PiAodmFsdWUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGRlZik7XG5cdHJldHVybiBucztcbn07IiwidmFyIGluUHJvZ3Jlc3MgPSB7fTtcbnZhciBkYXRhV2VicGFja1ByZWZpeCA9IFwidXJiYW5kb2NzX3dlYmFwcDpcIjtcbi8vIGxvYWRTY3JpcHQgZnVuY3Rpb24gdG8gbG9hZCBhIHNjcmlwdCB2aWEgc2NyaXB0IHRhZ1xuX193ZWJwYWNrX3JlcXVpcmVfXy5sID0gKHVybCwgZG9uZSwga2V5LCBjaHVua0lkKSA9PiB7XG5cdGlmKGluUHJvZ3Jlc3NbdXJsXSkgeyBpblByb2dyZXNzW3VybF0ucHVzaChkb25lKTsgcmV0dXJuOyB9XG5cdHZhciBzY3JpcHQsIG5lZWRBdHRhY2g7XG5cdGlmKGtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2NyaXB0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIHMgPSBzY3JpcHRzW2ldO1xuXHRcdFx0aWYocy5nZXRBdHRyaWJ1dGUoXCJzcmNcIikgPT0gdXJsIHx8IHMuZ2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIpID09IGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KSB7IHNjcmlwdCA9IHM7IGJyZWFrOyB9XG5cdFx0fVxuXHR9XG5cdGlmKCFzY3JpcHQpIHtcblx0XHRuZWVkQXR0YWNoID0gdHJ1ZTtcblx0XHRzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuXHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04Jztcblx0XHRzY3JpcHQudGltZW91dCA9IDEyMDtcblx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5uYykge1xuXHRcdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIF9fd2VicGFja19yZXF1aXJlX18ubmMpO1xuXHRcdH1cblx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIsIGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KTtcblxuXHRcdHNjcmlwdC5zcmMgPSB1cmw7XG5cdH1cblx0aW5Qcm9ncmVzc1t1cmxdID0gW2RvbmVdO1xuXHR2YXIgb25TY3JpcHRDb21wbGV0ZSA9IChwcmV2LCBldmVudCkgPT4ge1xuXHRcdC8vIGF2b2lkIG1lbSBsZWFrcyBpbiBJRS5cblx0XHRzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuXHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0XHR2YXIgZG9uZUZucyA9IGluUHJvZ3Jlc3NbdXJsXTtcblx0XHRkZWxldGUgaW5Qcm9ncmVzc1t1cmxdO1xuXHRcdHNjcmlwdC5wYXJlbnROb2RlICYmIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cdFx0ZG9uZUZucyAmJiBkb25lRm5zLmZvckVhY2goKGZuKSA9PiAoZm4oZXZlbnQpKSk7XG5cdFx0aWYocHJldikgcmV0dXJuIHByZXYoZXZlbnQpO1xuXHR9XG5cdHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgdW5kZWZpbmVkLCB7IHR5cGU6ICd0aW1lb3V0JywgdGFyZ2V0OiBzY3JpcHQgfSksIDEyMDAwMCk7XG5cdHNjcmlwdC5vbmVycm9yID0gb25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHNjcmlwdC5vbmVycm9yKTtcblx0c2NyaXB0Lm9ubG9hZCA9IG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCBzY3JpcHQub25sb2FkKTtcblx0bmVlZEF0dGFjaCAmJiBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG59OyIsIi8vIGpzL21hcHBpbmdzLmpzXG4vKipcbiAqIEZpcmViYXNlIE1hcHBpbmdzXG4gKiBAbW9kdWxlIG1hcHBpbmdzXG4gKiBAZGVzY3JpcHRpb24gVGhpcyBtb2R1bGUgY29udGFpbnMgbWFwcGluZ3MgZm9yIHpvbmUgbmFtZXMgdXNlZCBpbiB0aGUgYXBwbGljYXRpb24uXG4gKiBAdmVyc2lvbiAwLjAuMVxuICogQGF1dGhvciBHcmV5UGFuZGFcbiAqIEB0b2RvIEFkZCBtb3JlIG1hcHBpbmdzIGFzIG5lZWRlZC5cbiAqXG4gKiBAY2hhbmdlbG9nXG4gKiAtIDAuMC4xICgyMDI1LTA0LTIxKTogTWFwcGluZ3MgZm9yIEdyZW5vYmxlLlxuICovXG5cbi8vIEtleXM6IG5hbWUgaW4gdGhlIGRhdGFiYXNlIChsb3dlcmNhc2UsIHVuZGVyc2NvcmUpXG4vLyBWYWx1ZXM6IGRpc3BsYXllZCBuYW1lZCBvbiB3ZWIgYXBwIChzcGVjaWZpYyBmb3JtYXQpXG5leHBvcnQgY29uc3Qgem9uZU5hbWVNYXBwaW5ncyA9IHtcbiAgem9uZV9hdTogXCJab25lIEFVXCIsXG4gIHpvbmVfYXVjMTogXCJab25lIEFVQzFcIixcbiAgem9uZV9hdWMyOiBcIlpvbmUgQVVDMlwiLFxuICB6b25lX2F1YzM6IFwiWm9uZSBBVUMzXCIsXG4gIHpvbmVfYXVjcnUxMDogXCJab25lIEFVQ1JVMTBcIixcbiAgem9uZV9hdWQxOiBcIlpvbmUgQVVEMVwiLFxuICB6b25lX2F1ZDI6IFwiWm9uZSBBVUQyXCIsXG4gIHpvbmVfYXVkMzogXCJab25lIEFVRDNcIixcbiAgem9uZV9hdWQ0OiBcIlpvbmUgQVVENFwiLFxuICB6b25lX2F1ZTE6IFwiWm9uZSBBVUUxXCIsXG4gIHpvbmVfYXVwMXI6IFwiWm9uZSBBVVAxclwiLFxuICB6b25lX2E6IFwiWm9uZSBBXCIsXG4gIHpvbmVfYWw6IFwiWm9uZSBBTFwiLFxuICB6b25lX246IFwiWm9uZSBOXCIsXG4gIHpvbmVfbmw6IFwiWm9uZSBOTFwiLFxuICB6b25lX3VlMTogXCJab25lIFVFMVwiLFxuICB6b25lX3VlMjogXCJab25lIFVFMlwiLFxuICB6b25lX3VlMzogXCJab25lIFVFM1wiLFxuICB6b25lX3VlNDogXCJab25lIFVFNFwiLFxuICB6b25lX3V2OiBcIlpvbmUgVVZcIixcbiAgem9uZV91ejE6IFwiWm9uZSBVWjFcIixcbiAgem9uZV91ejI6IFwiWm9uZSBVWjJcIixcbiAgem9uZV91ejM6IFwiWm9uZSBVWjNcIixcbiAgem9uZV91ejQ6IFwiWm9uZSBVWjRcIixcbiAgem9uZV91YTE6IFwiWm9uZSBVQTFcIixcbiAgem9uZV91YTI6IFwiWm9uZSBVQTJcIixcbiAgem9uZV91YTM6IFwiWm9uZSBVQTNcIixcbiAgem9uZV91YjogXCJab25lIFVCXCIsXG4gIHpvbmVfdWMxOiBcIlpvbmUgVUMxXCIsXG4gIHpvbmVfdWMyOiBcIlpvbmUgVUMyXCIsXG4gIHpvbmVfdWMzOiBcIlpvbmUgVUMzXCIsXG4gIHpvbmVfdWNydTE6IFwiWm9uZSBVQ1JVMVwiLFxuICB6b25lX3VjcnUyOiBcIlpvbmUgVUNSVTJcIixcbiAgem9uZV91Y3J1MzogXCJab25lIFVDUlUzXCIsXG4gIHpvbmVfdWNydTQ6IFwiWm9uZSBVQ1JVNFwiLFxuICB6b25lX3VjcnU1OiBcIlpvbmUgVUNSVTVcIixcbiAgem9uZV91Y3J1NjogXCJab25lIFVDUlU2XCIsXG4gIHpvbmVfdWNydTc6IFwiWm9uZSBVQ1JVN1wiLFxuICB6b25lX3VjcnU4OiBcIlpvbmUgVUNSVThcIixcbiAgem9uZV91Y3J1OTogXCJab25lIFVDUlU5XCIsXG4gIHpvbmVfdWNydTExOiBcIlpvbmUgVUNSVTExXCIsXG4gIHpvbmVfdWQxOiBcIlpvbmUgVUQxXCIsXG4gIHpvbmVfdWQyOiBcIlpvbmUgVUQyXCIsXG4gIHpvbmVfdWQzOiBcIlpvbmUgVUQzXCIsXG4gIHpvbmVfdWQ0OiBcIlpvbmUgVUQ0XCIsXG59O1xuIiwiLy8gc3JjL2pzL3N1cGFiYXNlLWNsaWVudC5qc1xuLyoqXG4gKiBTdXBhYmFzZSBDbGllbnRcbiAqIEBtb2R1bGUgc3VwYWJhc2UtY2xpZW50XG4gKiBAZGVzY3JpcHRpb24gVGhpcyBtb2R1bGUgaGFuZGxlcyB0aGUgU3VwYWJhc2UgY2xpZW50IGluaXRpYWxpemF0aW9uIGFuZCBjb25maWd1cmF0aW9uLlxuICogQHZlcnNpb24gMC4wLjJcbiAqIEBhdXRob3IgR3JleVBhbmRhXG4gKlxuICogQGNoYW5nZWxvZ1xuICogLSAwLjAuMiAoMjAyNS0wNS0yNyk6IEFkZGVkIGVudmlyb25lbWVudCB2YXJpYWJsZXMgZXJyb3IgaGFuZGxpbmcgZm9yIG1pc3NpbmcuXG4gKiAtIDAuMC4xICgyMDI1LTA1LTA5KTogSW5pdGlhbCB2ZXJzaW9uIHdpdGggYmFzaWMgU3VwYWJhc2UgY2xpZW50IGluaXRpYWxpemF0aW9uLlxuICovXG5cbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gXCJAc3VwYWJhc2Uvc3VwYWJhc2UtanNcIjtcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBcImh0dHBzOi8vb2ZleXNzaXBpYmt0bWJmZWJpYm8uc3VwYWJhc2UuY29cIjtcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9XG4gIFwiZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlNJc0luSmxaaUk2SW05bVpYbHpjMmx3YVdKcmRHMWlabVZpYVdKdklpd2ljbTlzWlNJNkltRnViMjRpTENKcFlYUWlPakUzTkRNNU1qVXdPVFFzSW1WNGNDSTZNakExT1RVd01UQTVOSDAudzcxQ0FLZm9sa3R6UmwtVG1MVmhIWWFFYmhDZlZrNEE3WXJhRVVDZ2xyVVwiO1xuXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBTdXBhYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcIik7XG59XG5cbmNvbnN0IGNsaWVudCA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcblxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY2xpZW50O1xuIiwiLy8gcHVibGljL2pzL3VpLmpzXG4vKipcbiAqIEZpcmViYXNlIFVJXG4gKiBAbW9kdWxlIHVpXG4gKiBAZGVzY3JpcHRpb24gVGhpcyBtb2R1bGUgaGFuZGxlcyB0aGUgVUkgZWxlbWVudHMgYW5kIHV0aWxpdHkgZnVuY3Rpb25zIGZvciB0aGUgYXBwbGljYXRpb24uXG4gKiBAdmVyc2lvbiAwLjAuMVxuICogQGF1dGhvciBHcmV5UGFuZGFcbiAqIEB0b2RvIFJld29yayBvbiB0aGUgbWVzc2FnZXMgdG8gXCJsb2dpbiBiZWZvcmUgZG93bmxvYWRpbmdcIlxuICpcbiAqIEBjaGFuZ2Vsb2dcbiAqIC0gMC4wLjEgKDIwMjUtMDQtMjYpOiBJbml0aWFsIHZlcnNpb24gd2l0aCBiYXNpYyBVSSBmdW5jdGlvbnMgYW5kIGVsZW1lbnQgcmVmZXJlbmNlcy5cbiAqL1xuXG4vLyBJbXBvcnQgbWFwcGluZ3MgbmVlZGVkIGZvciBmb3JtYXR0aW5nXG5pbXBvcnQgeyB6b25lTmFtZU1hcHBpbmdzIH0gZnJvbSBcIi4vbWFwcGluZ3NcIjtcblxuLy8gLS0tIERPTSBFbGVtZW50IFJlZmVyZW5jZXMgLS0tXG5jb25zdCBjaXR5U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaXR5U2VsZWN0XCIpO1xuY29uc3Qgem9uaW5nU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ6b25pbmdTZWxlY3RcIik7XG5jb25zdCB6b25lU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ6b25lU2VsZWN0XCIpO1xuY29uc3QgdHlwb2xvZ2llU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0eXBvbG9naWVTZWxlY3RcIik7XG5jb25zdCBzeW50aGVzaXNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN5bnRoZXNpc0J0blwiKTtcbmNvbnN0IHN0YXR1c01lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXR1c01lc3NhZ2VcIik7XG5cbi8vIFNwaW5uZXJzIChlbnN1cmUgdGhlc2UgSURzIGV4aXN0IGluIHlvdXIgaW5kZXguaHRtbClcbmNvbnN0IGNpdHlTcGlubmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaXR5U3Bpbm5lclwiKTtcbmNvbnN0IHpvbmluZ1NwaW5uZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInpvbmluZ1NwaW5uZXJcIik7XG5jb25zdCB6b25lU3Bpbm5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiem9uZVNwaW5uZXJcIik7XG5jb25zdCB0eXBvbG9naWVTcGlubmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0eXBvbG9naWVTcGlubmVyXCIpO1xuY29uc3QgZG9jdW1lbnRTcGlubmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkb2N1bWVudFNwaW5uZXJcIik7IC8vIEZvciB0aGUgZmluYWwgc2VhcmNoL2Rvd25sb2FkIGJ1dHRvbiBhcmVhXG5cbi8vIE5ldyBlbGVtZW50cyBmb3IgQXV0aCBVSVxuY29uc3QgdXNlclN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlclN0YXR1c1wiKTtcbmNvbnN0IGxvZ291dEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9nb3V0QnRuXCIpO1xuY29uc3QgbG9naW5MaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dpbkxpbmtcIik7IC8vIFJlZmVyZW5jZSB0byB0aGUgbG9naW4gbGluay9idXR0b25cbmNvbnN0IHNpZ251cExpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNpZ251cExpbmtcIik7IC8vIFJlZmVyZW5jZSB0byB0aGUgc2lnbnVwIGxpbmsvYnV0dG9uXG4vLyAtLS0gRW5kIERPTSBFbGVtZW50IFJlZmVyZW5jZXMgLS0tXG5cbi8vIC0tLSBVSSBVdGlsaXR5IEZ1bmN0aW9ucyAtLS1cblxuLyoqXG4gKiBBZmZpY2hlIHVuIG1lc3NhZ2UgZGUgc3RhdHV0IChldCB0eXBlOiBpbmZvLCBzdWNjZXNzLCBkYW5nZXIsIHdhcm5pbmcpXG4gKi9cbmZ1bmN0aW9uIHNob3dTdGF0dXMobWVzc2FnZSwgdHlwZSA9IFwiaW5mb1wiKSB7XG4gIGlmIChzdGF0dXNNZXNzYWdlKSB7XG4gICAgc3RhdHVzTWVzc2FnZS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgLy8gRW5zdXJlIG9ubHkgb25lIGFsZXJ0IGNsYXNzIGlzIGFjdGl2ZSBhdCBhIHRpbWVcbiAgICBzdGF0dXNNZXNzYWdlLmNsYXNzTmFtZSA9IGBzdGF0dXMtbWVzc2FnZSBhbGVydCBhbGVydC0ke3R5cGV9YDtcbiAgICBzdGF0dXNNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJkLW5vbmVcIik7IC8vIE1ha2Ugc3VyZSBpdCdzIHZpc2libGVcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oXCJTdGF0dXMgbWVzc2FnZSBlbGVtZW50IG5vdCBmb3VuZC5cIik7XG4gIH1cbn1cblxuLyoqXG4gKiBBZmZpY2hlIG91IGNhY2hlIHVuIHNwaW5uZXIgQm9vdHN0cmFwXG4gKiBAcGFyYW0gc3Bpbm5lckVsZW1lbnQgTCfDqWzDqW1lbnQgU1BBTiBkdSBzcGlubmVyXG4gKiBAcGFyYW0gc2hvdyBUcnVlIHBvdXIgYWZmaWNoZXIsIGZhbHNlIHBvdXIgY2FjaGVyXG4gKi9cbmZ1bmN0aW9uIHRvZ2dsZVNwaW5uZXIoc3Bpbm5lckVsZW1lbnQsIHNob3cpIHtcbiAgaWYgKHNwaW5uZXJFbGVtZW50KSB7XG4gICAgc3Bpbm5lckVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShcImQtbm9uZVwiLCAhc2hvdyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gY29uc29sZS53YXJuKFwiU3Bpbm5lciBlbGVtZW50IG5vdCBmb3VuZCBmb3IgdG9nZ2xpbmcuXCIpOyAvLyBPcHRpb25hbDogbG9nIGlmIHNwaW5uZXIgbWlzc2luZ1xuICB9XG59XG5cbi8qKlxuICogUsOpaW5pdGlhbGlzZSB1biDDqWzDqW1lbnQgc2VsZWN0IGF2ZWMgdW5lIG9wdGlvbiBwYXIgZMOpZmF1dFxuICovXG5mdW5jdGlvbiByZXNldFNlbGVjdChzZWxlY3RFbGVtZW50LCBkZWZhdWx0VGV4dCkge1xuICBpZiAoc2VsZWN0RWxlbWVudCkge1xuICAgIHNlbGVjdEVsZW1lbnQuaW5uZXJIVE1MID0gYDxvcHRpb24gdmFsdWU9XCJcIj4ke1xuICAgICAgZGVmYXVsdFRleHQgfHwgXCJTw6lsZWN0aW9ubmV6IHVuZSBvcHRpb25cIlxuICAgIH08L29wdGlvbj5gO1xuICAgIHNlbGVjdEVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlOyAvLyBEaXNhYmxlIGJ5IGRlZmF1bHQgb24gcmVzZXRcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oXCJTZWxlY3QgZWxlbWVudCBub3QgZm91bmQgZm9yIHJlc2V0LlwiKTtcbiAgfVxufVxuXG4vKipcbiAqIEZvcm1hdGUgdW4gbmFtZSByZcOndSBkZSBsJ0FQSSAoZW5sw6h2ZSB1bmRlcnNjb3JlcywgY2FwaXRhbGlzZSlcbiAqIFV0aWxpc8OpIGNvbW1lIGZhbGxiYWNrIHNpIGxlIG1hcHBhZ2Ugc3DDqWNpZmlxdWUgbidleGlzdGUgcGFzLlxuICovXG5mdW5jdGlvbiBmb3JtYXRBcGlOYW1lKG5hbWUpIHtcbiAgaWYgKCFuYW1lKSByZXR1cm4gXCJcIjtcbiAgLy8gUmVwbGFjZSB1bmRlcnNjb3JlcyB3aXRoIHNwYWNlcywgdGhlbiBjYXBpdGFsaXplIHRoZSBmaXJzdCBsZXR0ZXIgb2YgZWFjaCB3b3JkXG4gIHJldHVybiBuYW1lLnJlcGxhY2UoL18vZywgXCIgXCIpLnJlcGxhY2UoL1xcYlxcdy9nLCAoY2hhcikgPT4gY2hhci50b1VwcGVyQ2FzZSgpKTtcbn1cblxuLyoqXG4gKiBQZXVwbGUgdW4gc8OpbGVjdGV1ciBhdmVjIGRlcyBvcHRpb25zXG4gKiBAcGFyYW0gc2VsZWN0RWxlbWVudCBMJ8OpbMOpbWVudCBzZWxlY3Qgw6AgcmVtcGxpclxuICogQHBhcmFtIGRhdGEgVGFibGVhdSBkJ29iamV0cyB7aWQsIG5hbWV9XG4gKiBAcGFyYW0gZGVmYXVsdE9wdGlvblRleHQgVGV4dGUgZGUgbGEgcHJlbWnDqHJlIG9wdGlvbiBkw6lzYWN0aXbDqWVcbiAqIEBwYXJhbSBlbXB0eURhdGFUZXh0IFRleHRlIHNpIGxlIHRhYmxlYXUgZGF0YSBlc3QgdmlkZVxuICogQHBhcmFtIGRhdGFUeXBlICdjaXR5JywgJ3pvbmluZycsICd6b25lJywgb3UgJ3R5cG9sb2d5JyBwb3VyIGxlIGZvcm1hdGFnZSBjb25kaXRpb25uZWxcbiAqL1xuZnVuY3Rpb24gcG9wdWxhdGVTZWxlY3QoXG4gIHNlbGVjdEVsZW1lbnQsXG4gIGRhdGEsXG4gIGRlZmF1bHRPcHRpb25UZXh0LFxuICBlbXB0eURhdGFUZXh0LFxuICBkYXRhVHlwZSAvLyBVc2VkIGZvciBjb25kaXRpb25hbCBmb3JtYXR0aW5nIChlLmcuLCB6b25lcylcbikge1xuICBpZiAoIXNlbGVjdEVsZW1lbnQpIHtcbiAgICBjb25zb2xlLndhcm4oXCJTZWxlY3QgZWxlbWVudCBub3QgZm91bmQgZm9yIHBvcHVsYXRpb24uXCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJlc2V0U2VsZWN0KHNlbGVjdEVsZW1lbnQsIGRlZmF1bHRPcHRpb25UZXh0KTsgLy8gUmVzZXQgZmlyc3RcblxuICBpZiAoIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICBzZWxlY3RFbGVtZW50LmlubmVySFRNTCA9IGA8b3B0aW9uIHZhbHVlPVwiXCI+JHtlbXB0eURhdGFUZXh0fTwvb3B0aW9uPmA7XG4gICAgc2VsZWN0RWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgcmV0dXJuIGZhbHNlOyAvLyBJbmRpY2F0ZSBubyBkYXRhIHdhcyBwb3B1bGF0ZWRcbiAgfVxuXG4gIGRhdGEuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgb3B0aW9uLnZhbHVlID0gaXRlbS5pZDtcblxuICAgIC8vIC0tLSBDb25kaXRpb25hbCBGb3JtYXR0aW5nIExvZ2ljIC0tLVxuICAgIGxldCBkaXNwbGF5VGV4dCA9IFwiXCI7XG4gICAgLy8gSWYgaXQncyBhICd6b25lJyBhbmQgYSBtYXBwaW5nIGV4aXN0cyBmb3IgaXRzICduYW1lJ1xuICAgIGlmIChkYXRhVHlwZSA9PT0gXCJ6b25lXCIgJiYgem9uZU5hbWVNYXBwaW5ncy5oYXNPd25Qcm9wZXJ0eShpdGVtLm5hbWUpKSB7XG4gICAgICBkaXNwbGF5VGV4dCA9IHpvbmVOYW1lTWFwcGluZ3NbaXRlbS5uYW1lXTsgLy8gVXNlIHRoZSBtYXBwZWQgbmFtZVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPdGhlcndpc2UsIHVzZSB0aGUgZ2VuZXJhbCBmb3JtYXR0aW5nIGZ1bmN0aW9uXG4gICAgICBkaXNwbGF5VGV4dCA9IGZvcm1hdEFwaU5hbWUoaXRlbS5uYW1lKTtcbiAgICB9XG4gICAgb3B0aW9uLnRleHRDb250ZW50ID0gZGlzcGxheVRleHQ7IC8vIEFwcGx5IHRoZSBjaG9zZW4gdGV4dFxuXG4gICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICB9KTtcblxuICBzZWxlY3RFbGVtZW50LmRpc2FibGVkID0gZmFsc2U7IC8vIEVuYWJsZSB0aGUgc2VsZWN0IGFzIGl0IGhhcyBvcHRpb25zXG4gIHJldHVybiB0cnVlOyAvLyBJbmRpY2F0ZSBkYXRhIHdhcyBwb3B1bGF0ZWRcbn1cblxuLy8gLS0tIEVuZCBVSSBVdGlsaXR5IEZ1bmN0aW9ucyAtLS1cblxuLy8gLS0tIEV4cG9ydCBFbGVtZW50cyBhbmQgRnVuY3Rpb25zIC0tLVxuZXhwb3J0IHtcbiAgY2l0eVNlbGVjdCxcbiAgem9uaW5nU2VsZWN0LFxuICB6b25lU2VsZWN0LFxuICB0eXBvbG9naWVTZWxlY3QsXG4gIHN5bnRoZXNpc0J0bixcbiAgc3RhdHVzTWVzc2FnZSxcbiAgY2l0eVNwaW5uZXIsXG4gIHpvbmluZ1NwaW5uZXIsXG4gIHpvbmVTcGlubmVyLFxuICB0eXBvbG9naWVTcGlubmVyLFxuICBkb2N1bWVudFNwaW5uZXIsXG4gIHNob3dTdGF0dXMsXG4gIHRvZ2dsZVNwaW5uZXIsXG4gIHJlc2V0U2VsZWN0LFxuICBmb3JtYXRBcGlOYW1lLFxuICBwb3B1bGF0ZVNlbGVjdCxcbiAgLy8gRXhwb3J0IG5ldyBhdXRoLXJlbGF0ZWQgZWxlbWVudHNcbiAgdXNlclN0YXR1cyxcbiAgbG9nb3V0QnRuLFxuICBsb2dpbkxpbmssXG4gIHNpZ251cExpbmssXG59O1xuIiwiLy8gc3JjL2pzL2FwaS5qc1xuLyoqXG4gKiBTdXBhYmFzZSBBUElcbiAqIEBtb2R1bGUgYXBpXG4gKiBAZGVzY3JpcHRpb24gVGhpcyBtb2R1bGUgaGFuZGxlcyBBUEkgY2FsbHMgdG8gZmV0Y2ggZGF0YSBmb3IgY2l0aWVzLCB6b25pbmcsIHpvbmVzLCBhbmQgdHlwb2xvZ2llcy5cbiAqIEB2ZXJzaW9uIDAuMS4wXG4gKiBAYXV0aG9yIEdyZXlQYW5kYVxuICogQHRvZG9cbiAqXG4gKiBAY2hhbmdlbG9nXG4gKiAtIDAuMS4wICgyMDI1LTA1LTE1KTogTWlncmF0aW5nIFN1cGFiYXNlIEFQSSBjYWxscyBmb3IgaW1wcm92ZWQgcGVyZm9ybWFuY2UuXG4gKiAtIDAuMC4xICgyMDI1LTA0LTI2KTogU2VwYXJhdGUgbW9kdWxlIGZvciBBUEkgY2FsbHMgdG8gaW1wcm92ZSBjb2RlIG9yZ2FuaXphdGlvbiBhbmQgbWFpbnRhaW5hYmlsaXR5LlxuICovXG5cbi8vIEltcG9ydCBVSSBmdW5jdGlvbnMgYW5kIGVsZW1lbnRzICh3aWxsIGJlIGRlZmluZWQgaW4gdWkuanMpXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gXCIuL3N1cGFiYXNlLWNsaWVudC5qc1wiO1xuaW1wb3J0IHtcbiAgdG9nZ2xlU3Bpbm5lcixcbiAgc2hvd1N0YXR1cyxcbiAgcG9wdWxhdGVTZWxlY3QsXG4gIHJlc2V0U2VsZWN0LFxuICBmb3JtYXRBcGlOYW1lLFxuICBjaXR5U2VsZWN0LFxuICB6b25pbmdTZWxlY3QsXG4gIHpvbmVTZWxlY3QsXG4gIHN5bnRoZXNpc0J0bixcbiAgY2l0eVNwaW5uZXIsXG4gIHpvbmluZ1NwaW5uZXIsXG4gIHpvbmVTcGlubmVyLFxuICBkb2N1bWVudFNwaW5uZXIsXG59IGZyb20gXCIuL3VpLmpzXCI7XG5cbmltcG9ydCB7IGN1cnJlbnRVc2VyIH0gZnJvbSBcIi4vYXBwLmpzXCI7XG5cbi8vIFZhcmlhYmxlIHRvIHN0b3JlIHRoZSBmZXRjaGVkIGRvY3VtZW50IGRldGFpbHNcbmxldCBzZWxlY3RlZERvY3VtZW50ID0gbnVsbDtcblxuLyoqXG4gKiBGZXRjaGVzIGNpdGllcyBmcm9tIFN1cGFiYXNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGxvYWRDaXRpZXMoKSB7XG4gIHRvZ2dsZVNwaW5uZXIoY2l0eVNwaW5uZXIsIHRydWUpO1xuICBzaG93U3RhdHVzKFwiQ2hhcmdlbWVudCBkZXMgY2l0aWVzLi4uXCIsIFwiaW5mb1wiKTtcbiAgY2l0eVNlbGVjdC5kaXNhYmxlZCA9IHRydWU7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjaXRpZXNcIilcbiAgICAgIC5zZWxlY3QoXCJpZCwgbmFtZVwiKVxuICAgICAgLm9yZGVyKFwibmFtZVwiKTtcblxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG5cbiAgICBjb25zdCBoYXNEYXRhID0gcG9wdWxhdGVTZWxlY3QoXG4gICAgICBjaXR5U2VsZWN0LFxuICAgICAgZGF0YS5tYXAoKGNpdHkpID0+ICh7IGlkOiBjaXR5LmlkLCBuYW1lOiBjaXR5Lm5hbWUgfSkpLFxuICAgICAgXCJTw6lsZWN0aW9ubmV6IHVuZSBjaXR5XCIsXG4gICAgICBcIkF1Y3VuZSB2aWxsZSBkaXNwb25pYmxlXCIsXG4gICAgICBcImNpdHlcIlxuICAgICk7XG5cbiAgICBpZiAoaGFzRGF0YSkge1xuICAgICAgc2hvd1N0YXR1cyhgVmlsbGVzIGNoYXJnw6llcyA6ICR7ZGF0YS5sZW5ndGh9YCwgXCJpbmZvXCIpO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudFVzZXIgPT09IG51bGwpIHtcbiAgICAgIHNob3dTdGF0dXMoXG4gICAgICAgIFwiVmV1aWxsZXogdm91cyBjb25uZWN0ZXIgcG91ciBhY2PDqWRlciBhdXggZG9ubsOpZXMuXCIsXG4gICAgICAgIFwid2FybmluZ1wiXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93U3RhdHVzKFwiQXVjdW5lIHZpbGxlIG4nYSDDqXTDqSB0cm91dsOpZS5cIiwgXCJ3YXJuaW5nXCIpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZHUgY2hhcmdlbWVudCBkZXMgY2l0aWVzOlwiLCBlcnJvcik7XG4gICAgcmVzZXRTZWxlY3QoY2l0eVNlbGVjdCwgXCJFcnJldXIgY2hhcmdlbWVudFwiKTtcbiAgfSBmaW5hbGx5IHtcbiAgICB0b2dnbGVTcGlubmVyKGNpdHlTcGlubmVyLCBmYWxzZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaGVzIHpvbmluZ3MgZm9yIGEgY2l0eSBmcm9tIFN1cGFiYXNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGxvYWRab25pbmdzKGNpdHlJZCkge1xuICByZXNldFNlbGVjdCh6b25pbmdTZWxlY3QsIFwiU8OpbGVjdGlvbm5leiBkJ2Fib3JkIHVuZSBjaXR5XCIpO1xuICByZXNldFNlbGVjdCh6b25lU2VsZWN0LCBcIlPDqWxlY3Rpb25uZXogZCdhYm9yZCB1biB6b25pbmdcIik7XG4gIHN5bnRoZXNpc0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gIHNlbGVjdGVkRG9jdW1lbnQgPSBudWxsO1xuXG4gIGlmICghY2l0eUlkKSB7XG4gICAgc2hvd1N0YXR1cyhcIlZldWlsbGV6IHPDqWxlY3Rpb25uZXIgdW5lIGNpdHkuXCIsIFwiaW5mb1wiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0b2dnbGVTcGlubmVyKHpvbmluZ1NwaW5uZXIsIHRydWUpO1xuICBzaG93U3RhdHVzKFwiQ2hhcmdlbWVudCBkZXMgem9uaW5ncy4uLlwiLCBcImluZm9cIik7XG4gIHpvbmluZ1NlbGVjdC5kaXNhYmxlZCA9IHRydWU7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJ6b25pbmdzXCIpXG4gICAgICAuc2VsZWN0KFwiaWQsIG5hbWVcIilcbiAgICAgIC5lcShcImNpdHlfaWRcIiwgY2l0eUlkKVxuICAgICAgLm9yZGVyKFwibmFtZVwiKTtcblxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG5cbiAgICBjb25zdCBoYXNEYXRhID0gcG9wdWxhdGVTZWxlY3QoXG4gICAgICB6b25pbmdTZWxlY3QsXG4gICAgICBkYXRhLm1hcCgoem9uaW5nKSA9PiAoeyBpZDogem9uaW5nLmlkLCBuYW1lOiB6b25pbmcubmFtZSB9KSksXG4gICAgICBcIlPDqWxlY3Rpb25uZXogdW4gem9uaW5nXCIsXG4gICAgICBcIkF1Y3VuIHpvbmFnZSBkaXNwb25pYmxlXCIsXG4gICAgICBcInpvbmluZ1wiXG4gICAgKTtcblxuICAgIGlmIChoYXNEYXRhKSB7XG4gICAgICBzaG93U3RhdHVzKGBab25hZ2VzIGNoYXJnw6lzIDogJHtkYXRhLmxlbmd0aH1gLCBcImluZm9cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3dTdGF0dXMoXCJBdWN1biB6b25hZ2UgdHJvdXbDqSBwb3VyIGNldHRlIGNpdHkuXCIsIFwid2FybmluZ1wiKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGR1IGNoYXJnZW1lbnQgZGVzIHpvbmluZ3M6XCIsIGVycm9yKTtcbiAgICByZXNldFNlbGVjdCh6b25pbmdTZWxlY3QsIFwiRXJyZXVyIGNoYXJnZW1lbnRcIik7XG4gIH0gZmluYWxseSB7XG4gICAgdG9nZ2xlU3Bpbm5lcih6b25pbmdTcGlubmVyLCBmYWxzZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaGVzIHpvbmVzIGZvciBhIHpvbmluZyBmcm9tIFN1cGFiYXNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGxvYWRab25lcyh6b25pbmdJZCkge1xuICByZXNldFNlbGVjdCh6b25lU2VsZWN0LCBcIlPDqWxlY3Rpb25uZXogZCdhYm9yZCB1biB6b25pbmdcIik7XG4gIHN5bnRoZXNpc0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gIHNlbGVjdGVkRG9jdW1lbnQgPSBudWxsO1xuXG4gIGlmICghem9uaW5nSWQpIHtcbiAgICBzaG93U3RhdHVzKFwiVmV1aWxsZXogc8OpbGVjdGlvbm5lciB1biB6b25pbmcuXCIsIFwiaW5mb1wiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0b2dnbGVTcGlubmVyKHpvbmVTcGlubmVyLCB0cnVlKTtcbiAgc2hvd1N0YXR1cyhcIkNoYXJnZW1lbnQgZGVzIHpvbmVzLi4uXCIsIFwiaW5mb1wiKTtcbiAgem9uZVNlbGVjdC5kaXNhYmxlZCA9IHRydWU7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJ6b25lc1wiKVxuICAgICAgLnNlbGVjdChcImlkLCBuYW1lXCIpXG4gICAgICAuZXEoXCJ6b25pbmdfaWRcIiwgem9uaW5nSWQpXG4gICAgICAub3JkZXIoXCJuYW1lXCIpO1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcblxuICAgIGNvbnN0IGhhc0RhdGEgPSBwb3B1bGF0ZVNlbGVjdChcbiAgICAgIHpvbmVTZWxlY3QsXG4gICAgICBkYXRhLm1hcCgoem9uZSkgPT4gKHsgaWQ6IHpvbmUuaWQsIG5hbWU6IHpvbmUubmFtZSB9KSksXG4gICAgICBcIlPDqWxlY3Rpb25uZXogdW5lIHpvbmVcIixcbiAgICAgIFwiQXVjdW5lIHpvbmUgZGlzcG9uaWJsZVwiLFxuICAgICAgXCJ6b25lXCJcbiAgICApO1xuXG4gICAgaWYgKGhhc0RhdGEpIHtcbiAgICAgIHNob3dTdGF0dXMoYFpvbmVzIGNoYXJnw6llcyA6ICR7ZGF0YS5sZW5ndGh9YCwgXCJpbmZvXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93U3RhdHVzKFwiQXVjdW5lIHpvbmUgdHJvdXbDqWUgcG91ciBjZSB6b25pbmcuXCIsIFwid2FybmluZ1wiKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGR1IGNoYXJnZW1lbnQgZGVzIHpvbmVzOlwiLCBlcnJvcik7XG4gICAgcmVzZXRTZWxlY3Qoem9uZVNlbGVjdCwgXCJFcnJldXIgY2hhcmdlbWVudFwiKTtcbiAgfSBmaW5hbGx5IHtcbiAgICB0b2dnbGVTcGlubmVyKHpvbmVTcGlubmVyLCBmYWxzZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaGVzIGRvY3VtZW50IGZvciBhIHpvbmUgZnJvbSBTdXBhYmFzZVxuICovXG5hc3luYyBmdW5jdGlvbiBmaW5kRG9jdW1lbnQoem9uaW5nSWQsIHpvbmVJZCwgdHlwb2xvZ2llSWQpIHtcbiAgc3ludGhlc2lzQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgc2VsZWN0ZWREb2N1bWVudCA9IG51bGw7XG5cbiAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgIHNob3dTdGF0dXMoXG4gICAgICBcIlZldWlsbGV6IHZvdXMgY29ubmVjdGVyIHBvdXIgYWNjw6lkZXIgYXV4IGRvY3VtZW50cy5cIixcbiAgICAgIFwid2FybmluZ1wiXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIXpvbmluZ0lkIHx8ICF6b25lSWQpIHtcbiAgICBzaG93U3RhdHVzKFwiU8OpbGVjdGlvbiBpbmNvbXBsw6h0ZSBwb3VyIHJlY2hlcmNoZXIgbGUgZG9jdW1lbnQuXCIsIFwiaW5mb1wiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0b2dnbGVTcGlubmVyKGRvY3VtZW50U3Bpbm5lciwgdHJ1ZSk7XG4gIHNob3dTdGF0dXMoXCJSZWNoZXJjaGUgZHUgZG9jdW1lbnQuLi5cIiwgXCJpbmZvXCIpO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiZG9jdW1lbnRzXCIpXG4gICAgICAuc2VsZWN0KFwiaWQsIHNvdXJjZV9wbHVfZGF0ZVwiKVxuICAgICAgLmVxKFwiem9uaW5nX2lkXCIsIHpvbmluZ0lkKVxuICAgICAgLmVxKFwiem9uZV9pZFwiLCB6b25lSWQpXG4gICAgICAuZXEoXCJ0eXBvbG9neV9pZFwiLCB0eXBvbG9naWVJZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yLmNvZGUgPT09IFwiUEdSU1QxMTZcIikge1xuICAgICAgICBzaG93U3RhdHVzKFwiQXVjdW4gZG9jdW1lbnQgdHJvdXbDqSBwb3VyIGNldHRlIHpvbmUuXCIsIFwid2FybmluZ1wiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgc2VsZWN0ZWREb2N1bWVudCA9IGRhdGE7XG5cbiAgICBpZiAoY3VycmVudFVzZXIgJiYgZGF0YT8uaWQpIHtcbiAgICAgIHN5bnRoZXNpc0J0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgc2hvd1N0YXR1cyhcbiAgICAgICAgYERvY3VtZW50IHRyb3V2w6kgKFNvdXJjZTogJHtcbiAgICAgICAgICBmb3JtYXRBcGlOYW1lKGRhdGEuc291cmNlX3BsdV9kYXRlKSB8fCBcIk5vbiBzcMOpY2lmacOpZVwiXG4gICAgICAgIH0pLiBQcsOqdCDDoCBjb25zdWx0ZXIuYCxcbiAgICAgICAgXCJzdWNjZXNzXCJcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGVjdGVkRG9jdW1lbnQgPSBudWxsO1xuICAgICAgc2hvd1N0YXR1cyhcIkRvY3VtZW50IHRyb3V2w6kgbWFpcyBsaWVuIG1hbnF1YW50LlwiLCBcIndhcm5pbmdcIik7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByZWNoZXJjaGUgZHUgZG9jdW1lbnQ6XCIsIGVycm9yKTtcbiAgICBzZWxlY3RlZERvY3VtZW50ID0gbnVsbDtcbiAgfSBmaW5hbGx5IHtcbiAgICB0b2dnbGVTcGlubmVyKGRvY3VtZW50U3Bpbm5lciwgZmFsc2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFNlbGVjdGVkRG9jdW1lbnQoKSB7XG4gIHJldHVybiBzZWxlY3RlZERvY3VtZW50O1xufVxuXG5leHBvcnQge1xuICBsb2FkQ2l0aWVzLFxuICBsb2FkWm9uaW5ncyxcbiAgbG9hZFpvbmVzLFxuICBmaW5kRG9jdW1lbnQsXG4gIGdldFNlbGVjdGVkRG9jdW1lbnQsXG59O1xuIiwiLy8gc3JjL2F1dGgvYXV0aC5qc1xuLyoqXG4gKiBBdXRoZW50aWNhdGlvbiBNb2R1bGUgLSBCYXNlXG4gKiBAbW9kdWxlIGF1dGhcbiAqIEBkZXNjcmlwdGlvbiBCYXNlIG1vZHVsZSBmb3IgYXV0aGVudGljYXRpb24gd2l0aCBjb21tb24gZnVuY3Rpb25zIGFuZCBjb25maWd1cmF0aW9uXG4gKiBAdmVyc2lvbiAwLjAuNVxuICpcbiAqIEBjaGFuZ2Vsb2dcbiAqIC0gMC4wLjUgKDIwMjUtMDUtMTUpOiBBZGRlZCBzZXNzaW9uIHZhbGlkYXRpb24gYW5kIHByb3RlY3Rpb24gYWdhaW5zdCBzdGFsZSBzZXNzaW9ucy5cbiAqIC0gMC4wLjQgKDIwMjUtMDUtMTUpOiBSZW1vdmFsIG9mIEZpcmViYXNlIENsb3VkIEZ1bmN0aW9ucyBjb25zdGFudHMuXG4gKiAtIDAuMC4zICgyMDI1LTA1LTEzKTogTW9kaWZpZWQgdGhlIGF1dGhlbnRpY2F0aW9uIHN0YXRlIG1hbmFnZW1lbnQgdG8gdXNlIFN1cGFiYXNlIEF1dGggc3lzdGVtLlxuICogLSAwLjAuMiAoMjAyNS0wNS0xMyk6IFJlb3JnYW5pemF0aW9uIGludG8gc2VwYXJhdGUgbW9kdWxlc1xuICogLSAwLjAuMSAoMjAyNS0wNS0wMyk6IEluaXRpYWwgY3JlYXRpb25cbiAqL1xuXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gXCIuLi9zdXBhYmFzZS1jbGllbnQuanNcIjtcblxuLy8gR2xvYmFsIGF1dGhlbnRpY2F0aW9uIHN0YXRlXG5sZXQgY3VycmVudFVzZXIgPSBudWxsO1xubGV0IHNlc3Npb25WYWxpZGF0ZWQgPSBmYWxzZTtcblxuLyoqXG4gKiBTZXRzIHRoZSBjdXJyZW50IHVzZXJcbiAqIEBwYXJhbSB7T2JqZWN0fSB1c2VyIC0gVXNlciBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50VXNlcih1c2VyKSB7XG4gIGN1cnJlbnRVc2VyID0gdXNlcjtcbiAgLy8gUG9zc2libGUgc3RvcmFnZSBpbiBsb2NhbFN0b3JhZ2Uvc2Vzc2lvblN0b3JhZ2VcbiAgaWYgKHVzZXIpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRVc2VyXCIsIEpTT04uc3RyaW5naWZ5KHVzZXIpKTtcbiAgfSBlbHNlIHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImN1cnJlbnRVc2VyXCIpO1xuICB9XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIGlmIHRoZSBjdXJyZW50IHNlc3Npb24gaXMgYWN0aXZlIHdpdGggU3VwYWJhc2VcbiAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSBUcnVlIGlmIHNlc3Npb24gaXMgdmFsaWQsIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVTZXNzaW9uKCkge1xuICB0cnkge1xuICAgIC8vIEdldCBjdXJyZW50IHNlc3Npb24gZnJvbSBTdXBhYmFzZVxuICAgIGNvbnN0IHtcbiAgICAgIGRhdGE6IHsgc2Vzc2lvbiB9LFxuICAgICAgZXJyb3I6IHNlc3Npb25FcnJvcixcbiAgICB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XG5cbiAgICAvLyBObyBzZXNzaW9uIG9yIGVycm9yIHJldHJpZXZpbmcgc2Vzc2lvblxuICAgIGlmIChzZXNzaW9uRXJyb3IgfHwgIXNlc3Npb24pIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTm8gdmFsaWQgc2Vzc2lvbiBmb3VuZFwiKTtcbiAgICAgIHNldEN1cnJlbnRVc2VyKG51bGwpO1xuICAgICAgc2Vzc2lvblZhbGlkYXRlZCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFRyeSB0byByZWZyZXNoIHRoZSB0b2tlbiB0byB2YWxpZGF0ZSBpdCB3aXRoIHRoZSBzZXJ2ZXJcbiAgICBjb25zdCB7IGVycm9yOiByZWZyZXNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGgucmVmcmVzaFNlc3Npb24oKTtcblxuICAgIGlmIChyZWZyZXNoRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIlNlc3Npb24gdmFsaWRhdGlvbiBmYWlsZWQ6XCIsIHJlZnJlc2hFcnJvcik7XG4gICAgICAvLyBGb3JjZSBjbGVhciB0aGUgaW52YWxpZCBzZXNzaW9uXG4gICAgICBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25PdXQoKTtcbiAgICAgIHNldEN1cnJlbnRVc2VyKG51bGwpO1xuICAgICAgc2Vzc2lvblZhbGlkYXRlZCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFNlc3Npb24gaXMgdmFsaWQsIHVwZGF0ZSB0aGUgY3VycmVudCB1c2VyXG4gICAgc2V0Q3VycmVudFVzZXIoc2Vzc2lvbi51c2VyKTtcbiAgICBzZXNzaW9uVmFsaWRhdGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJTZXNzaW9uIHZhbGlkYXRpb24gZXJyb3I6XCIsIGUpO1xuICAgIHNldEN1cnJlbnRVc2VyKG51bGwpO1xuICAgIHNlc3Npb25WYWxpZGF0ZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIGN1cnJlbnQgdXNlclxuICogQHBhcmFtIHtib29sZWFufSB2YWxpZGF0ZSAtIFdoZXRoZXIgdG8gdmFsaWRhdGUgdGhlIHNlc3Npb24gd2l0aCBTdXBhYmFzZVxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0fG51bGw+fSBUaGUgY3VycmVudCB1c2VyIG9yIG51bGxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKHZhbGlkYXRlID0gdHJ1ZSkge1xuICAvLyBJZiB3ZSBuZWVkIHRvIHZhbGlkYXRlIGFuZCBoYXZlbid0IGRvbmUgc28geWV0XG4gIGlmICh2YWxpZGF0ZSAmJiAhc2Vzc2lvblZhbGlkYXRlZCkge1xuICAgIGF3YWl0IHZhbGlkYXRlU2Vzc2lvbigpO1xuICB9XG5cbiAgLy8gSWYgbm8gdmFsaWRhdGlvbiBuZWVkZWQgb3IgYWxyZWFkeSB2YWxpZGF0ZWRcbiAgaWYgKCF2YWxpZGF0ZSAmJiAhY3VycmVudFVzZXIpIHtcbiAgICAvLyBUcnkgdG8gcmV0cmlldmUgZnJvbSBzdG9yYWdlIGlmIG5vdCBpbiBtZW1vcnlcbiAgICBjb25zdCBzdG9yZWRVc2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50VXNlclwiKTtcbiAgICBpZiAoc3RvcmVkVXNlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY3VycmVudFVzZXIgPSBKU09OLnBhcnNlKHN0b3JlZFVzZXIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmV0cmlldmluZyB1c2VyOlwiLCBlKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJjdXJyZW50VXNlclwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gY3VycmVudFVzZXI7XG59XG5cbi8qKlxuICogU3luY2hyb25vdXMgdmVyc2lvbiBvZiBnZXRDdXJyZW50VXNlciBmb3Igbm9uLWFzeW5jIGNvbnRleHRzXG4gKiBXQVJOSU5HOiBUaGlzIG1heSByZXR1cm4gc3RhbGUgZGF0YSBpZiBzZXNzaW9uIGlzIGludmFsaWRcbiAqIEByZXR1cm5zIHtPYmplY3R8bnVsbH0gVGhlIGN1cnJlbnQgdXNlciBvciBudWxsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50VXNlclN5bmMoKSB7XG4gIGlmICghY3VycmVudFVzZXIpIHtcbiAgICBjb25zdCBzdG9yZWRVc2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50VXNlclwiKTtcbiAgICBpZiAoc3RvcmVkVXNlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY3VycmVudFVzZXIgPSBKU09OLnBhcnNlKHN0b3JlZFVzZXIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmV0cmlldmluZyB1c2VyOlwiLCBlKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJjdXJyZW50VXNlclwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gY3VycmVudFVzZXI7XG59XG5cbi8qKlxuICogTG9ncyBvdXQgdGhlIHVzZXJcbiAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0KCkge1xuICB0cnkge1xuICAgIC8vIFNpZ24gb3V0IGZyb20gU3VwYWJhc2VcbiAgICBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25PdXQoKTtcblxuICAgIC8vIENsZWFyIGxvY2FsIHN0YXRlXG4gICAgY3VycmVudFVzZXIgPSBudWxsO1xuICAgIHNlc3Npb25WYWxpZGF0ZWQgPSBmYWxzZTtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImN1cnJlbnRVc2VyXCIpO1xuXG4gICAgLy8gUmVkaXJlY3QgdG8gdGhlIGhvbWUgcGFnZSBhZnRlciBsb2dvdXRcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL1wiO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkdXJpbmcgbG9nb3V0OlwiLCBlcnJvcik7XG4gICAgLy8gU3RpbGwgY2xlYXIgbG9jYWwgc3RhdGUgZXZlbiBpZiBTdXBhYmFzZSBzaWduT3V0IGZhaWxzXG4gICAgY3VycmVudFVzZXIgPSBudWxsO1xuICAgIHNlc3Npb25WYWxpZGF0ZWQgPSBmYWxzZTtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImN1cnJlbnRVc2VyXCIpO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvXCI7XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHVzZXIgaXMgbG9nZ2VkIGluIHdpdGggdmFsaWQgc2Vzc2lvblxuICogQHBhcmFtIHtib29sZWFufSB2YWxpZGF0ZSAtIFdoZXRoZXIgdG8gdmFsaWRhdGUgd2l0aCBTdXBhYmFzZSBmaXJzdFxuICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IFRydWUgaWYgdGhlIHVzZXIgaXMgbG9nZ2VkIGluIHdpdGggdmFsaWQgc2Vzc2lvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNMb2dnZWRJbih2YWxpZGF0ZSA9IHRydWUpIHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKHZhbGlkYXRlKTtcbiAgcmV0dXJuIHVzZXIgIT09IG51bGw7XG59XG5cbi8qKlxuICogU3luY2hyb25vdXMgdmVyc2lvbiBvZiBpc0xvZ2dlZEluXG4gKiBXQVJOSU5HOiBUaGlzIG1heSByZXR1cm4gaW5jb3JyZWN0IHJlc3VsdHMgaWYgc2Vzc2lvbiBpcyBpbnZhbGlkXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB1c2VyIGFwcGVhcnMgdG8gYmUgbG9nZ2VkIGluIGxvY2FsbHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTG9nZ2VkSW5TeW5jKCkge1xuICByZXR1cm4gZ2V0Q3VycmVudFVzZXJTeW5jKCkgIT09IG51bGw7XG59XG5cbi8qKlxuICogUHJvdGVjdHMgYSBwYWdlIHRoYXQgcmVxdWlyZXMgYXV0aGVudGljYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSByZWRpcmVjdFVybCAtIFVSTCB0byByZWRpcmVjdCBpZiBub3QgYXV0aGVudGljYXRlZFxuICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IFRydWUgaWYgYXV0aGVudGljYXRlZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm90ZWN0UGFnZShyZWRpcmVjdFVybCA9IFwiL2xvZ2luXCIpIHtcbiAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IHZhbGlkYXRlU2Vzc2lvbigpO1xuXG4gIGlmICghaXNWYWxpZCkge1xuICAgIC8vIFJlZGlyZWN0IHRvIGxvZ2luIHBhZ2VcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlZGlyZWN0VXJsO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGF1dGggb24gcGFnZSBsb2FkXG4gKiBDYWxsIHRoaXMgYXQgdGhlIGJlZ2lubmluZyBvZiB5b3VyIGFwcCBpbml0aWFsaXphdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdEF1dGgoKSB7XG4gIC8vIFZhbGlkYXRlIHNlc3Npb24gb24gcGFnZSBsb2FkXG4gIGF3YWl0IHZhbGlkYXRlU2Vzc2lvbigpO1xuXG4gIC8vIFNldCB1cCBhdXRoIHN0YXRlIGNoYW5nZSBsaXN0ZW5lclxuICBzdXBhYmFzZS5hdXRoLm9uQXV0aFN0YXRlQ2hhbmdlKGFzeW5jIChldmVudCwgc2Vzc2lvbikgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiQXV0aCBzdGF0ZSBjaGFuZ2VkOlwiLCBldmVudCk7XG5cbiAgICBpZiAoZXZlbnQgPT09IFwiU0lHTkVEX0lOXCIgJiYgc2Vzc2lvbikge1xuICAgICAgc2V0Q3VycmVudFVzZXIoc2Vzc2lvbi51c2VyKTtcbiAgICAgIHNlc3Npb25WYWxpZGF0ZWQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQgPT09IFwiU0lHTkVEX09VVFwiKSB7XG4gICAgICBzZXRDdXJyZW50VXNlcihudWxsKTtcbiAgICAgIHNlc3Npb25WYWxpZGF0ZWQgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50ID09PSBcIlRPS0VOX1JFRlJFU0hFRFwiKSB7XG4gICAgICBzZXRDdXJyZW50VXNlcihzZXNzaW9uLnVzZXIpO1xuICAgICAgc2Vzc2lvblZhbGlkYXRlZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChldmVudCA9PT0gXCJVU0VSX1VQREFURURcIikge1xuICAgICAgc2V0Q3VycmVudFVzZXIoc2Vzc2lvbi51c2VyKTtcbiAgICAgIHNlc3Npb25WYWxpZGF0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogRGlzcGxheXMgYW4gZXJyb3IgbWVzc2FnZVxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBFcnJvciBtZXNzYWdlIHRvIGRpc3BsYXlcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50SWQgLSBJRCBvZiB0aGUgZWxlbWVudCB3aGVyZSB0byBkaXNwbGF5IHRoZSBlcnJvclxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hvd0Vycm9yKG1lc3NhZ2UsIGVsZW1lbnRJZCA9IFwiZXJyb3JNZXNzYWdlXCIpIHtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcbiAgaWYgKGVycm9yRWxlbWVudCkge1xuICAgIGVycm9yRWxlbWVudC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbGVtZW50IG5vdCBmb3VuZDpcIiwgZWxlbWVudElkKTtcbiAgfVxufVxuXG4vKipcbiAqIERpc3BsYXlzIGEgc3RhdHVzIG1lc3NhZ2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gTWVzc2FnZSB0byBkaXNwbGF5XG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIE1lc3NhZ2UgdHlwZSAoc3VjY2VzcywgaW5mbywgd2FybmluZywgZGFuZ2VyKVxuICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnRJZCAtIElEIG9mIHRoZSBlbGVtZW50IHdoZXJlIHRvIGRpc3BsYXkgdGhlIG1lc3NhZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dTdGF0dXMoXG4gIG1lc3NhZ2UsXG4gIHR5cGUgPSBcImluZm9cIixcbiAgZWxlbWVudElkID0gXCJzdGF0dXNNZXNzYWdlXCJcbikge1xuICBjb25zdCBzdGF0dXNFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcbiAgaWYgKHN0YXR1c0VsZW1lbnQpIHtcbiAgICBzdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gbWVzc2FnZTtcblxuICAgIC8vIFJlbW92ZSBhbGwgYWxlcnQtKiBjbGFzc2VzXG4gICAgc3RhdHVzRWxlbWVudC5jbGFzc0xpc3QuZm9yRWFjaCgoY2xhc3NOYW1lKSA9PiB7XG4gICAgICBpZiAoY2xhc3NOYW1lLnN0YXJ0c1dpdGgoXCJhbGVydC1cIikpIHtcbiAgICAgICAgc3RhdHVzRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgdGhlIGNsYXNzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHR5cGVcbiAgICBzdGF0dXNFbGVtZW50LmNsYXNzTGlzdC5hZGQoYGFsZXJ0LSR7dHlwZX1gKTtcbiAgICBzdGF0dXNFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5lcnJvcihcIlN0YXR1cyBlbGVtZW50IG5vdCBmb3VuZDpcIiwgZWxlbWVudElkKTtcbiAgfVxufVxuXG4vKipcbiAqIEhpZGVzIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50SWQgLSBJRCBvZiB0aGUgZWxlbWVudCB0byBoaWRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoaWRlRWxlbWVudChlbGVtZW50SWQpIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG4gIGlmIChlbGVtZW50KSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICB9XG59XG5cbi8qKlxuICogU2hvd3MgYW4gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnRJZCAtIElEIG9mIHRoZSBlbGVtZW50IHRvIHNob3dcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dFbGVtZW50KGVsZW1lbnRJZCkge1xuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcbiAgaWYgKGVsZW1lbnQpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gIH1cbn1cblxuLyoqXG4gKiBTaG93cyB0aGUgbG9hZGluZyBpbmRpY2F0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBidXR0b25JZCAtIElEIG9mIHRoZSBidXR0b25cbiAqIEBwYXJhbSB7c3RyaW5nfSBzcGlubmVySWQgLSBJRCBvZiB0aGUgc3Bpbm5lclxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hvd0xvYWRpbmcoYnV0dG9uSWQsIHNwaW5uZXJJZCkge1xuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25JZCk7XG4gIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzcGlubmVySWQpO1xuXG4gIGlmIChidXR0b24pIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIGlmIChzcGlubmVyKSBzcGlubmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG59XG5cbi8qKlxuICogSGlkZXMgdGhlIGxvYWRpbmcgaW5kaWNhdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gYnV0dG9uSWQgLSBJRCBvZiB0aGUgYnV0dG9uXG4gKiBAcGFyYW0ge3N0cmluZ30gc3Bpbm5lcklkIC0gSUQgb2YgdGhlIHNwaW5uZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhpZGVMb2FkaW5nKGJ1dHRvbklkLCBzcGlubmVySWQpIHtcbiAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0dG9uSWQpO1xuICBjb25zdCBzcGlubmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3Bpbm5lcklkKTtcblxuICBpZiAoYnV0dG9uKSBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgaWYgKHNwaW5uZXIpIHNwaW5uZXIuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbn1cblxuLy8gRXhwb3J0IHRoZSBuZWNlc3NhcnkgZnVuY3Rpb25zIGFuZCB2YXJpYWJsZXNcbmV4cG9ydCBkZWZhdWx0IHtcbiAgZ2V0Q3VycmVudFVzZXIsXG4gIGdldEN1cnJlbnRVc2VyU3luYyxcbiAgc2V0Q3VycmVudFVzZXIsXG4gIGxvZ291dCxcbiAgaXNMb2dnZWRJbixcbiAgaXNMb2dnZWRJblN5bmMsXG4gIHZhbGlkYXRlU2Vzc2lvbixcbiAgcHJvdGVjdFBhZ2UsXG4gIGluaXRBdXRoLFxuICBzaG93RXJyb3IsXG4gIHNob3dTdGF0dXMsXG4gIGhpZGVFbGVtZW50LFxuICBzaG93RWxlbWVudCxcbiAgc2hvd0xvYWRpbmcsXG4gIGhpZGVMb2FkaW5nLFxufTtcbiIsIi8qKlxuICogSGVhZGVyIEF1dGhlbnRpY2F0aW9uIE1vZHVsZVxuICogQG1vZHVsZSBoZWFkZXItYXV0aFxuICogQGRlc2NyaXB0aW9uIEhhbmRsZXMgZHluYW1pYyBoZWFkZXIgdXBkYXRlcyBiYXNlZCBvbiBhdXRoZW50aWNhdGlvbiBzdGF0ZSBhY3Jvc3MgYWxsIHBhZ2VzXG4gKiBAdmVyc2lvbiAxLjAuMFxuICogQGF1dGhvciBHcmV5UGFuZGFcbiAqXG4gKiBAY2hhbmdlbG9nXG4gKiAtIDEuMC4wICgyMDI1LTAxLVhYKTogSW5pdGlhbCB2ZXJzaW9uIC0gdW5pZmllZCBoZWFkZXIgYXV0aCBtYW5hZ2VtZW50IGZvciBhbGwgcGFnZXNcbiAqL1xuXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gXCIuLi9zdXBhYmFzZS1jbGllbnQuanNcIjtcbmltcG9ydCAqIGFzIGF1dGhNb2R1bGUgZnJvbSBcIi4vYXV0aC5qc1wiO1xuXG5sZXQgY3VycmVudFVzZXIgPSBudWxsO1xuXG4vKipcbiAqIFVwZGF0ZSBoZWFkZXIgVUkgYmFzZWQgb24gYXV0aGVudGljYXRpb24gc3RhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fG51bGx9IHVzZXIgLSBUaGUgYXV0aGVudGljYXRlZCB1c2VyIG9iamVjdCBvciBudWxsXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZUhlYWRlckZvckF1dGhTdGF0ZSh1c2VyKSB7XG4gIGN1cnJlbnRVc2VyID0gdXNlcjtcblxuICAvLyBHZXQgaGVhZGVyIGVsZW1lbnRzICh0aGV5IG1pZ2h0IG5vdCBleGlzdCBvbiBhbGwgcGFnZXMpXG4gIGNvbnN0IHVzZXJTdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJTdGF0dXNcIik7XG4gIGNvbnN0IGxvZ2luTGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9naW5MaW5rXCIpO1xuICBjb25zdCBzaWdudXBMaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWdudXBMaW5rXCIpO1xuICBjb25zdCBsb2dvdXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ291dEJ0blwiKTtcblxuICBpZiAodXNlcikge1xuICAgIC8vIFVzZXIgaXMgc2lnbmVkIGluIC0gc2hvdyBhdXRoZW50aWNhdGVkIHN0YXRlXG4gICAgaWYgKHVzZXJTdGF0dXMpIHtcbiAgICAgIHVzZXJTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcbiAgICAgIHVzZXJTdGF0dXMudGV4dENvbnRlbnQgPSBcIlZvdHJlIGNvbXB0ZVwiO1xuICAgIH1cbiAgICBpZiAobG9naW5MaW5rKSBsb2dpbkxpbmsuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbiAgICBpZiAoc2lnbnVwTGluaykgc2lnbnVwTGluay5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgIGlmIChsb2dvdXRCdG4pIGxvZ291dEJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xuXG4gICAgY29uc29sZS5sb2coXCJIZWFkZXIgdXBkYXRlZDogVXNlciBpcyBhdXRoZW50aWNhdGVkXCIpO1xuICB9IGVsc2Uge1xuICAgIC8vIFVzZXIgaXMgc2lnbmVkIG91dCAtIHNob3cgZ3Vlc3Qgc3RhdGVcbiAgICBpZiAodXNlclN0YXR1cykgdXNlclN0YXR1cy5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgIGlmIChsb2dpbkxpbmspIGxvZ2luTGluay5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xuICAgIGlmIChzaWdudXBMaW5rKSBzaWdudXBMaW5rLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gICAgaWYgKGxvZ291dEJ0bikgbG9nb3V0QnRuLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG5cbiAgICBjb25zb2xlLmxvZyhcIkhlYWRlciB1cGRhdGVkOiBVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXCIpO1xuICB9XG59XG5cbi8qKlxuICogU2V0dXAgbG9nb3V0IGZ1bmN0aW9uYWxpdHkgZm9yIHRoZSBjdXJyZW50IHBhZ2VcbiAqL1xuZnVuY3Rpb24gc2V0dXBMb2dvdXRIYW5kbGVyKCkge1xuICBjb25zdCBsb2dvdXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ291dEJ0blwiKTtcbiAgaWYgKGxvZ291dEJ0bikge1xuICAgIC8vIFJlbW92ZSBhbnkgZXhpc3RpbmcgbGlzdGVuZXJzIHRvIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICBsb2dvdXRCdG4ucmVwbGFjZVdpdGgobG9nb3V0QnRuLmNsb25lTm9kZSh0cnVlKSk7XG5cbiAgICAvLyBHZXQgdGhlIG5ldyBlbGVtZW50IGFuZCBhZGQgZXZlbnQgbGlzdGVuZXJcbiAgICBjb25zdCBuZXdMb2dvdXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ291dEJ0blwiKTtcbiAgICBuZXdMb2dvdXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiTG9nb3V0IGluaXRpYXRlZCBmcm9tIGhlYWRlclwiKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduT3V0KCk7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2dnaW5nIG91dDpcIiwgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgYWxlcnQoXCJFcnJldXIgbG9ycyBkZSBsYSBkw6ljb25uZXhpb24uIFZldWlsbGV6IHLDqWVzc2F5ZXIuXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiTG9nb3V0IHN1Y2Nlc3NmdWwsIHJlZGlyZWN0aW5nIHRvIGhvbWVcIik7XG4gICAgICAgICAgLy8gVGhlIG9uQXV0aFN0YXRlQ2hhbmdlIHdpbGwgaGFuZGxlIHRoZSByZWRpcmVjdCBhbmQgVUkgdXBkYXRlc1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXhjZXB0aW9uIGR1cmluZyBsb2dvdXQ6XCIsIGVycm9yKTtcbiAgICAgICAgYWxlcnQoXCJVbmUgZXJyZXVyIGluYXR0ZW5kdWUgcydlc3QgcHJvZHVpdGUgbG9ycyBkZSBsYSBkw6ljb25uZXhpb24uXCIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBoZWFkZXIgYXV0aGVudGljYXRpb24gZm9yIHRoZSBjdXJyZW50IHBhZ2VcbiAqIENhbGwgdGhpcyBmdW5jdGlvbiBvbiBldmVyeSBwYWdlIHRoYXQgaGFzIGEgaGVhZGVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0SGVhZGVyQXV0aCgpIHtcbiAgY29uc29sZS5sb2coXCJJbml0aWFsaXppbmcgaGVhZGVyIGF1dGhlbnRpY2F0aW9uLi4uXCIpO1xuXG4gIC8vIFNldHVwIGxvZ291dCBoYW5kbGVyXG4gIHNldHVwTG9nb3V0SGFuZGxlcigpO1xuXG4gIC8vIExpc3RlbiBmb3IgYXV0aCBzdGF0ZSBjaGFuZ2VzXG4gIHN1cGFiYXNlLmF1dGgub25BdXRoU3RhdGVDaGFuZ2UoKGV2ZW50LCBzZXNzaW9uKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IHNlc3Npb24/LnVzZXIgfHwgbnVsbDtcblxuICAgIC8vIFVwZGF0ZSBhdXRoIG1vZHVsZVxuICAgIGF1dGhNb2R1bGUuc2V0Q3VycmVudFVzZXIodXNlcik7XG5cbiAgICAvLyBVcGRhdGUgaGVhZGVyIFVJXG4gICAgdXBkYXRlSGVhZGVyRm9yQXV0aFN0YXRlKHVzZXIpO1xuXG4gICAgLy8gSGFuZGxlIHNwZWNpZmljIGV2ZW50c1xuICAgIGlmIChldmVudCA9PT0gXCJTSUdORURfT1VUXCIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiSGVhZGVyIGF1dGg6IFVzZXIgc2lnbmVkIG91dCwgcmVkaXJlY3RpbmcgdG8gaG9tZVwiKTtcbiAgICAgIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBsb2dvdXQgY29tcGxldGVzIHByb3Blcmx5XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9cIjtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSBlbHNlIGlmIChldmVudCA9PT0gXCJTSUdORURfSU5cIikge1xuICAgICAgY29uc29sZS5sb2coXCJIZWFkZXIgYXV0aDogVXNlciBzaWduZWQgaW5cIik7XG4gICAgfSBlbHNlIGlmIChldmVudCA9PT0gXCJJTklUSUFMX1NFU1NJT05cIikge1xuICAgICAgY29uc29sZS5sb2coXCJIZWFkZXIgYXV0aDogSW5pdGlhbCBzZXNzaW9uIGxvYWRlZFwiKTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50ID09PSBcIlRPS0VOX1JFRlJFU0hFRFwiKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkhlYWRlciBhdXRoOiBUb2tlbiByZWZyZXNoZWRcIik7XG4gICAgfVxuICB9KTtcblxuICAvLyBTZXQgaW5pdGlhbCBzdGF0ZSBiYXNlZCBvbiBzdG9yZWQgdXNlciBkYXRhXG4gIGNvbnN0IGluaXRpYWxVc2VyID0gYXV0aE1vZHVsZS5nZXRDdXJyZW50VXNlcigpO1xuICB1cGRhdGVIZWFkZXJGb3JBdXRoU3RhdGUoaW5pdGlhbFVzZXIpO1xuXG4gIGNvbnNvbGUubG9nKFwiSGVhZGVyIGF1dGhlbnRpY2F0aW9uIGluaXRpYWxpemVkXCIpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBhdXRoZW50aWNhdGVkIHVzZXJcbiAqIEByZXR1cm5zIHtPYmplY3R8bnVsbH0gQ3VycmVudCB1c2VyIG9iamVjdCBvciBudWxsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcigpIHtcbiAgcmV0dXJuIGN1cnJlbnRVc2VyO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHVzZXIgaXMgYXV0aGVudGljYXRlZFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdXNlciBpcyBhdXRoZW50aWNhdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gIHJldHVybiBjdXJyZW50VXNlciAhPT0gbnVsbDtcbn1cblxuLyoqXG4gKiBNYW51YWxseSB1cGRhdGUgaGVhZGVyIHN0YXRlICh1c2VmdWwgZm9yIHRlc3Rpbmcgb3Igc3BlY2lhbCBjYXNlcylcbiAqIEBwYXJhbSB7T2JqZWN0fG51bGx9IHVzZXIgLSBVc2VyIG9iamVjdCBvciBudWxsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVIZWFkZXIodXNlcikge1xuICB1cGRhdGVIZWFkZXJGb3JBdXRoU3RhdGUodXNlcik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaW5pdEhlYWRlckF1dGgsXG4gIGdldEN1cnJlbnRVc2VyLFxuICBpc0F1dGhlbnRpY2F0ZWQsXG4gIHVwZGF0ZUhlYWRlcixcbn07XG4iLCIvLyBwdWJsaWMvanMvYXBwLmpzIC0gTWFpbiBhcHBsaWNhdGlvbiBsb2dpY1xuLyoqXG4gKiBGaXJlYmFzZSBBcHBcbiAqIEBtb2R1bGUgYXBwXG4gKiBAZGVzY3JpcHRpb24gVGhpcyBtb2R1bGUgaGFuZGxlcyB0aGUgbWFpbiBhcHBsaWNhdGlvbiBsb2dpYy5cbiAqIEB2ZXJzaW9uIDAuMC42XG4gKiBAYXV0aG9yIEdyZXlQYW5kYVxuICpcbiAqIEBjaGFuZ2Vsb2dcbiAqIC0gMC4wLjYgKDIwMjUtMDEtWFgpOiBSZWZhY3RvcmVkIHRvIHVzZSBzaGFyZWQgaGVhZGVyIGF1dGhlbnRpY2F0aW9uIG1vZHVsZVxuICogLSAwLjAuNSAoMjAyNS0wNS0xMyk6IEFkZGluZyBhY2NvdW50IGJ1dHRvbiB0byB0aGUgcHJvZmlsZSBwYWdlLCBjb3JyZWN0aW5nIHRoZSBsb2dpbiBwcm9tcHQuXG4gKiAtIDAuMC40ICgyMDI1LTA1LTA5KTogTW9kaWZpZWQgdGhlIGF1dGhlbnRpY2F0aW9uIHN0YXRlIG1hbmFnZW1lbnQgdG8gdXNlIFN1cGFiYXNlIEF1dGggc3lzdGVtLlxuICogLSAwLjAuMyAoMjAyNS0wNS0wOCk6IE1vdmVkIEZpcmViYXNlIGNvbmZpZ3VyYXRpb24gaW50byBhIHNlcGFyYXRlIGZpbGUuXG4gKiAtIDAuMC4yICgyMDI1LTA0LTI3KTogQWRkZWQgYXV0aGVudGljYXRpb24gc3RhdGUgbWFuYWdlbWVudCBhbmQgZG9jdW1lbnQgZG93bmxvYWQgZnVuY3Rpb25hbGl0eSB3aXRoIEZpcmViYXNlIEF1dGguXG4gKiAtIDAuMC4xICgyMDI1LTA0LTIxKTogSW5pdGlhbCB2ZXJzaW9uIHdpdGggYmFzaWMgZG9jdW1lbnQgZG93bmxvYWQgZnVuY3Rpb25hbGl0eS5cbiAqL1xuXG4vLyBJbXBvcnQgU3VwYWJhc2UgQ2xpZW50XG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gXCIuL3N1cGFiYXNlLWNsaWVudC5qc1wiO1xuXG4vLyBJbXBvcnQgQVBJIGZ1bmN0aW9uc1xuaW1wb3J0IHtcbiAgbG9hZENpdGllcyxcbiAgbG9hZFpvbmluZ3MsXG4gIGxvYWRab25lcyxcbiAgZmluZERvY3VtZW50LFxuICBnZXRTZWxlY3RlZERvY3VtZW50LCAvLyBGdW5jdGlvbiB0byBnZXQgdGhlIGRvY3VtZW50IGRldGFpbHMgZnJvbSBhcGkuanNcbn0gZnJvbSBcIi4vYXBpLmpzXCI7XG5cbi8vIEltcG9ydCBVSSBlbGVtZW50cyBhbmQgZnVuY3Rpb25zXG5pbXBvcnQge1xuICBjaXR5U2VsZWN0LFxuICB6b25pbmdTZWxlY3QsXG4gIHpvbmVTZWxlY3QsXG4gIHN5bnRoZXNpc0J0bixcbiAgc2hvd1N0YXR1cyxcbiAgcmVzZXRTZWxlY3QsXG4gIGZvcm1hdEFwaU5hbWUsXG4gIC8vIFJlZmVyZW5jZXMgdG8gVUkgZWxlbWVudHMgZnJvbSB1aS5qc1xuICB1c2VyU3RhdHVzLFxuICBsb2dvdXRCdG4sXG4gIGxvZ2luTGluayxcbiAgc2lnbnVwTGluayxcbn0gZnJvbSBcIi4vdWkuanNcIjtcblxuaW1wb3J0ICogYXMgYXV0aE1vZHVsZSBmcm9tIFwiLi9hdXRoL2F1dGguanNcIjtcbmltcG9ydCB7XG4gIGluaXRIZWFkZXJBdXRoLFxuICBnZXRDdXJyZW50VXNlciBhcyBnZXRIZWFkZXJDdXJyZW50VXNlcixcbn0gZnJvbSBcIi4vYXV0aC9oZWFkZXItYXV0aC5qc1wiO1xuXG5sZXQgY3VycmVudFVzZXIgPSBudWxsOyAvLyBWYXJpYWJsZSB0byBob2xkIHRoZSBjdXJyZW50IHVzZXIgc3RhdGVcblxuLy8gLS0tIEF1dGhlbnRpY2F0aW9uIFN0YXRlIE1hbmFnZW1lbnQgLS0tXG5mdW5jdGlvbiB1cGRhdGVVSUZvckF1dGhTdGF0ZSh1c2VyKSB7XG4gIGN1cnJlbnRVc2VyID0gdXNlcjsgLy8gVXBkYXRlIGdsb2JhbCB1c2VyIHN0YXRlXG4gIGlmICh1c2VyKSB7XG4gICAgLy8gVXNlciBpcyBzaWduZWQgaW4gLSB1cGRhdGUgc3ludGhlc2lzIGJ1dHRvbiBzdGF0ZVxuICAgIGNvbnN0IHNlbGVjdGVkRG9jdW1lbnQgPSBnZXRTZWxlY3RlZERvY3VtZW50KCk7XG4gICAgaWYgKHNlbGVjdGVkRG9jdW1lbnQgJiYgc2VsZWN0ZWREb2N1bWVudC5pZCkge1xuICAgICAgaWYgKHN5bnRoZXNpc0J0bikgc3ludGhlc2lzQnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICBzaG93U3RhdHVzKFxuICAgICAgICBgRG9jdW1lbnQgdHJvdXbDqSAoU291cmNlOiAke1xuICAgICAgICAgIGZvcm1hdEFwaU5hbWUoc2VsZWN0ZWREb2N1bWVudC5zb3VyY2VfcGx1X2RhdGUpIHx8IFwiTm9uIHNww6ljaWZpw6llXCJcbiAgICAgICAgfSkuIFByw6p0IMOgIGNvbnN1bHRlci5gLFxuICAgICAgICBcInN1Y2Nlc3NcIlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHN5bnRoZXNpc0J0bikgc3ludGhlc2lzQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gVXNlciBpcyBzaWduZWQgb3V0IC0gZGlzYWJsZSBzeW50aGVzaXMgYnV0dG9uXG4gICAgaWYgKHN5bnRoZXNpc0J0bikgc3ludGhlc2lzQnRuLmRpc2FibGVkID0gdHJ1ZTsgLy8gQWx3YXlzIGRpc2FibGUgZG93bmxvYWQgaWYgbG9nZ2VkIG91dFxuICB9XG59XG5cbi8vIEN1c3RvbSBhdXRoIHN0YXRlIGNoYW5nZSBsaXN0ZW5lciBmb3IgYXBwLXNwZWNpZmljIGZ1bmN0aW9uYWxpdHlcbnN1cGFiYXNlLmF1dGgub25BdXRoU3RhdGVDaGFuZ2UoKGV2ZW50LCBzZXNzaW9uKSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBzZXNzaW9uPy51c2VyIHx8IG51bGw7XG5cbiAgLy8gVXBkYXRlIGFwcC1zcGVjaWZpYyBVSSBzdGF0ZSAoc3ludGhlc2lzIGJ1dHRvbiwgZXRjLilcbiAgdXBkYXRlVUlGb3JBdXRoU3RhdGUodXNlcik7XG5cbiAgaWYgKGV2ZW50ID09PSBcIlNJR05FRF9PVVRcIikge1xuICAgIGNvbnNvbGUubG9nKFwiQXBwOiBVc2VyIHNpZ25lZCBvdXRcIik7XG4gIH0gZWxzZSBpZiAoZXZlbnQgPT09IFwiU0lHTkVEX0lOXCIpIHtcbiAgICBjb25zb2xlLmxvZyhcIkFwcDogVXNlciBzaWduZWQgaW5cIik7XG4gIH0gZWxzZSBpZiAoZXZlbnQgPT09IFwiSU5JVElBTF9TRVNTSU9OXCIpIHtcbiAgICBjb25zb2xlLmxvZyhcIkFwcDogSW5pdGlhbCBzZXNzaW9uIGxvYWRlZFwiKTtcbiAgfSBlbHNlIGlmIChldmVudCA9PT0gXCJUT0tFTl9SRUZSRVNIRURcIikge1xuICAgIGNvbnNvbGUubG9nKFwiQXBwOiBUb2tlbiByZWZyZXNoZWRcIik7XG4gIH1cbn0pO1xuXG4vLyAtLS0gRG9jdW1lbnQgRG93bmxvYWQgTG9naWMgLS0tXG5mdW5jdGlvbiBkb3dubG9hZERvY3VtZW50KCkge1xuICBjb25zdCB1c2VyID0gZ2V0SGVhZGVyQ3VycmVudFVzZXIoKTsgLy8gR2V0IHVzZXIgZnJvbSBoZWFkZXIgYXV0aCBtb2R1bGVcbiAgaWYgKCF1c2VyKSB7XG4gICAgc2hvd1N0YXR1cyhcIkF1dGhlbnRpZmljYXRpb24gcmVxdWlzZSBwb3VyIHTDqWzDqWNoYXJnZXIuXCIsIFwid2FybmluZ1wiKTtcbiAgICBzeW50aGVzaXNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIHJldHVybjsgLy8gRXhpdCBpZiBub3QgYXV0aGVudGljYXRlZFxuICB9XG5cbiAgY29uc3Qgc2VsZWN0ZWREb2N1bWVudCA9IGdldFNlbGVjdGVkRG9jdW1lbnQoKTsgLy8gR2V0IGZyb20gYXBpLmpzXG4gIGlmIChzZWxlY3RlZERvY3VtZW50ICYmIHNlbGVjdGVkRG9jdW1lbnQuaWQpIHtcbiAgICBzaG93U3RhdHVzKFwiT3V2ZXJ0dXJlIGR1IGRvY3VtZW50Li4uXCIsIFwiaW5mb1wiKTtcbiAgICB3aW5kb3cub3BlbihgL3BsdS1zdW1tYXJ5P2lkPSR7c2VsZWN0ZWREb2N1bWVudC5pZH1gLCBcIl9ibGFua1wiKTtcbiAgICAvLyBSZS1kaXNwbGF5IHN1Y2Nlc3MgbWVzc2FnZSBhZnRlciBhIGRlbGF5XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBidXR0b24gaXMgc3RpbGwgZW5hYmxlZCAoaS5lLiwgZG9jdW1lbnQgaXMgc3RpbGwgY29uc2lkZXJlZCB2YWxpZClcbiAgICAgIGlmICghc3ludGhlc2lzQnRuLmRpc2FibGVkKSB7XG4gICAgICAgIHNob3dTdGF0dXMoXG4gICAgICAgICAgYERvY3VtZW50IHRyb3V2w6kgKFNvdXJjZTogJHtcbiAgICAgICAgICAgIGZvcm1hdEFwaU5hbWUoc2VsZWN0ZWREb2N1bWVudC5zb3VyY2VfcGx1X2RhdGUpIHx8IFwiTm9uIHNww6ljaWZpw6llXCJcbiAgICAgICAgICB9KS4gUHLDqnQgw6AgY29uc3VsdGVyLmAsXG4gICAgICAgICAgXCJzdWNjZXNzXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9LCAxNTAwKTtcbiAgfSBlbHNlIHtcbiAgICBzaG93U3RhdHVzKFwiTGllbiBkdSBkb2N1bWVudCBub24gZGlzcG9uaWJsZS5cIiwgXCJ3YXJuaW5nXCIpO1xuICAgIHN5bnRoZXNpc0J0bi5kaXNhYmxlZCA9IHRydWU7IC8vIEVuc3VyZSBidXR0b24gaXMgZGlzYWJsZWQgaWYgbm8gVVJMXG4gIH1cbn1cblxuLy8gPT09IEV2ZW50IGxpc3RlbmVycyA9PT1cbmNpdHlTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZXZlbnQpID0+IHtcbiAgY29uc3QgY2l0eUlkID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICBsb2FkWm9uaW5ncyhjaXR5SWQpOyAvLyBDYWxsIEFQSSBmdW5jdGlvblxufSk7XG5cbnpvbmluZ1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChldmVudCkgPT4ge1xuICBjb25zdCB6b25pbmdJZCA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgbG9hZFpvbmVzKHpvbmluZ0lkKTsgLy8gQ2FsbCBBUEkgZnVuY3Rpb25cbn0pO1xuXG56b25lU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGV2ZW50KSA9PiB7XG4gIGNvbnN0IHpvbmVJZCA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgY29uc3Qgem9uaW5nSWQgPSB6b25pbmdTZWxlY3QudmFsdWU7IC8vIEdldCBjdXJyZW50IHpvbmluZyBzZWxlY3Rpb25cbiAgLy8gVE9ETyA6IHR5cG9sb2dpZVNlbGVjdCBsb2dpY1xuICBpZiAoem9uZUlkICYmIHpvbmluZ0lkKSB7XG4gICAgZmluZERvY3VtZW50KHpvbmluZ0lkLCB6b25lSWQsIFwiN2MwZjI4MzAtZjNmYy00YzY5LTkxMWMtNDcwMjg2ZjkxOTgyXCIpOyAvLyBDYWxsIEFQSSBmdW5jdGlvblxuICB9IGVsc2Uge1xuICAgIHNob3dTdGF0dXMoXCJWZXVpbGxleiBkJ2Fib3JkIHPDqWxlY3Rpb25uZXIgdW4gem9uaW5nLlwiLCBcIndhcm5pbmdcIik7XG4gIH1cbiAgLy8gaWYgKHpvbmluZ0lkKSB7XG4gIC8vICAgbG9hZFR5cG9sb2dpZXMoem9uZUlkLCB6b25pbmdJZCk7IC8vIENhbGwgQVBJIGZ1bmN0aW9uXG4gIC8vIH0gZWxzZSB7XG4gIC8vICAgc2hvd1N0YXR1cyhcIlZldWlsbGV6IGQnYWJvcmQgc8OpbGVjdGlvbm5lciB1biB6b25pbmcuXCIsIFwid2FybmluZ1wiKTtcbiAgLy8gfVxufSk7XG5cbi8vIHR5cG9sb2dpZVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChldmVudCkgPT4ge1xuLy8gICBjb25zdCB0eXBvbG9naWVJZCA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbi8vICAgY29uc3Qgem9uZUlkID0gem9uZVNlbGVjdC52YWx1ZTtcbi8vICAgY29uc3Qgem9uaW5nSWQgPSB6b25pbmdTZWxlY3QudmFsdWU7XG4vLyAgIGlmICh6b25lSWQgJiYgem9uaW5nSWQpIHtcbi8vICAgICBmaW5kRG9jdW1lbnQoem9uaW5nSWQsIHpvbmVJZCwgdHlwb2xvZ2llSWQpOyAvLyBDYWxsIEFQSSBmdW5jdGlvblxuLy8gICB9IGVsc2Uge1xuLy8gICAgIHNob3dTdGF0dXMoXG4vLyAgICAgICBcIlZldWlsbGV6IGQnYWJvcmQgc8OpbGVjdGlvbm5lciB1biB6b25pbmcgZXQgdW5lIHpvbmUuXCIsXG4vLyAgICAgICBcIndhcm5pbmdcIlxuLy8gICAgICk7XG4vLyAgIH1cbi8vIH0pO1xuXG5zeW50aGVzaXNCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRvd25sb2FkRG9jdW1lbnQpO1xuXG4vLyA9PT0gSW5pdGlhbGlzYXRpb24gPT09XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBhc3luYyAoKSA9PiB7XG4gIC8vIEluaXRpYWxpemUgaGVhZGVyIGF1dGhlbnRpY2F0aW9uIGZpcnN0XG4gIGluaXRIZWFkZXJBdXRoKCk7XG5cbiAgLy8gSW5pdGlhbGl6ZSBVSSBzdGF0ZVxuICByZXNldFNlbGVjdChjaXR5U2VsZWN0LCBcIkNoYXJnZW1lbnQuLi5cIik7XG4gIHJlc2V0U2VsZWN0KHpvbmluZ1NlbGVjdCwgXCJTw6lsZWN0aW9ubmV6IGQnYWJvcmQgdW5lIHZpbGxlXCIpO1xuICByZXNldFNlbGVjdCh6b25lU2VsZWN0LCBcIlPDqWxlY3Rpb25uZXogZCdhYm9yZCB1biB6b25hZ2VcIik7XG4gIC8vIHJlc2V0U2VsZWN0KHR5cG9sb2dpZVNlbGVjdCwgXCJTw6lsZWN0aW9ubmV6IGQnYWJvcmQgdW5lIHpvbmVcIik7XG4gIGlmIChzeW50aGVzaXNCdG4pIHN5bnRoZXNpc0J0bi5kaXNhYmxlZCA9IHRydWU7XG5cbiAgLy8gTG9hZCBpbml0aWFsIGRhdGEgaWYgb24gdGhlIG1haW4gcGFnZVxuICBpZiAoY2l0eVNlbGVjdCAmJiB6b25pbmdTZWxlY3QgJiYgem9uZVNlbGVjdCkge1xuICAgIHNob3dTdGF0dXMoXCJJbml0aWFsaXNhdGlvbi4uLlwiLCBcImluZm9cIik7IC8vIFNob3cgdGhpcyBvbmx5IHdoZW4gcmVsZXZhbnQgc2VsZWN0b3JzIGFyZSBwcmVzZW50XG4gICAgYXdhaXQgbG9hZENpdGllcygpOyAvLyBTdGFydCBsb2FkaW5nIGNpdGllc1xuICB9XG59KTtcblxuLy8gRXhwb3J0IGN1cnJlbnRVc2VyIGZvciB1c2UgaW4gYXBpLmpzXG5leHBvcnQgeyBjdXJyZW50VXNlciB9O1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmYgPSB7fTtcbi8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbi8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5lID0gKGNodW5rSWQpID0+IHtcblx0cmV0dXJuIFByb21pc2UuYWxsKE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uZikucmVkdWNlKChwcm9taXNlcywga2V5KSA9PiB7XG5cdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5mW2tleV0oY2h1bmtJZCwgcHJvbWlzZXMpO1xuXHRcdHJldHVybiBwcm9taXNlcztcblx0fSwgW10pKTtcbn07IiwiLy8gVGhpcyBmdW5jdGlvbiBhbGxvdyB0byByZWZlcmVuY2UgYXN5bmMgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnUgPSAoY2h1bmtJZCkgPT4ge1xuXHQvLyByZXR1cm4gdXJsIGZvciBmaWxlbmFtZXMgYmFzZWQgb24gdGVtcGxhdGVcblx0cmV0dXJuIFwianMvXCIgKyBjaHVua0lkICsgXCIuYnVuZGxlLmpzXCI7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdCAmJiBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnRhZ05hbWUudG9VcHBlckNhc2UoKSA9PT0gJ1NDUklQVCcpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7XG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkge1xuXHRcdFx0dmFyIGkgPSBzY3JpcHRzLmxlbmd0aCAtIDE7XG5cdFx0XHR3aGlsZSAoaSA+IC0xICYmICghc2NyaXB0VXJsIHx8ICEvXmh0dHAocz8pOi8udGVzdChzY3JpcHRVcmwpKSkgc2NyaXB0VXJsID0gc2NyaXB0c1tpLS1dLnNyYztcblx0XHR9XG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvXmJsb2I6LywgXCJcIikucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsICsgXCIuLi9cIjsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0NTQ6IDAsXG5cdDUyNDogMFxufTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5mLmogPSAoY2h1bmtJZCwgcHJvbWlzZXMpID0+IHtcblx0XHQvLyBKU09OUCBjaHVuayBsb2FkaW5nIGZvciBqYXZhc2NyaXB0XG5cdFx0dmFyIGluc3RhbGxlZENodW5rRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpID8gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdIDogdW5kZWZpbmVkO1xuXHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSAhPT0gMCkgeyAvLyAwIG1lYW5zIFwiYWxyZWFkeSBpbnN0YWxsZWRcIi5cblxuXHRcdFx0Ly8gYSBQcm9taXNlIG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cblx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuXHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZih0cnVlKSB7IC8vIGFsbCBjaHVua3MgaGF2ZSBKU1xuXHRcdFx0XHRcdC8vIHNldHVwIFByb21pc2UgaW4gY2h1bmsgY2FjaGVcblx0XHRcdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IChpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbcmVzb2x2ZSwgcmVqZWN0XSkpO1xuXHRcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdID0gcHJvbWlzZSk7XG5cblx0XHRcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG5cdFx0XHRcdFx0dmFyIHVybCA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIF9fd2VicGFja19yZXF1aXJlX18udShjaHVua0lkKTtcblx0XHRcdFx0XHQvLyBjcmVhdGUgZXJyb3IgYmVmb3JlIHN0YWNrIHVud291bmQgdG8gZ2V0IHVzZWZ1bCBzdGFja3RyYWNlIGxhdGVyXG5cdFx0XHRcdFx0dmFyIGVycm9yID0gbmV3IEVycm9yKCk7XG5cdFx0XHRcdFx0dmFyIGxvYWRpbmdFbmRlZCA9IChldmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkpIHtcblx0XHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuXHRcdFx0XHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yVHlwZSA9IGV2ZW50ICYmIChldmVudC50eXBlID09PSAnbG9hZCcgPyAnbWlzc2luZycgOiBldmVudC50eXBlKTtcblx0XHRcdFx0XHRcdFx0XHR2YXIgcmVhbFNyYyA9IGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuc3JjO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLm1lc3NhZ2UgPSAnTG9hZGluZyBjaHVuayAnICsgY2h1bmtJZCArICcgZmFpbGVkLlxcbignICsgZXJyb3JUeXBlICsgJzogJyArIHJlYWxTcmMgKyAnKSc7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IubmFtZSA9ICdDaHVua0xvYWRFcnJvcic7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IudHlwZSA9IGVycm9yVHlwZTtcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5yZXF1ZXN0ID0gcmVhbFNyYztcblx0XHRcdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGFbMV0oZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmwodXJsLCBsb2FkaW5nRW5kZWQsIFwiY2h1bmstXCIgKyBjaHVua0lkLCBjaHVua0lkKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cbn07XG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua3VyYmFuZG9jc193ZWJhcHBcIl0gPSBzZWxmW1wid2VicGFja0NodW5rdXJiYW5kb2NzX3dlYmFwcFwiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzMwM10sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKDc1MykpKVxuX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcbiJdLCJuYW1lcyI6WyJkZWZlcnJlZCIsImxlYWZQcm90b3R5cGVzIiwiZ2V0UHJvdG8iLCJpblByb2dyZXNzIiwiZGF0YVdlYnBhY2tQcmVmaXgiLCJ6b25lTmFtZU1hcHBpbmdzIiwiem9uZV9hdSIsInpvbmVfYXVjMSIsInpvbmVfYXVjMiIsInpvbmVfYXVjMyIsInpvbmVfYXVjcnUxMCIsInpvbmVfYXVkMSIsInpvbmVfYXVkMiIsInpvbmVfYXVkMyIsInpvbmVfYXVkNCIsInpvbmVfYXVlMSIsInpvbmVfYXVwMXIiLCJ6b25lX2EiLCJ6b25lX2FsIiwiem9uZV9uIiwiem9uZV9ubCIsInpvbmVfdWUxIiwiem9uZV91ZTIiLCJ6b25lX3VlMyIsInpvbmVfdWU0Iiwiem9uZV91diIsInpvbmVfdXoxIiwiem9uZV91ejIiLCJ6b25lX3V6MyIsInpvbmVfdXo0Iiwiem9uZV91YTEiLCJ6b25lX3VhMiIsInpvbmVfdWEzIiwiem9uZV91YiIsInpvbmVfdWMxIiwiem9uZV91YzIiLCJ6b25lX3VjMyIsInpvbmVfdWNydTEiLCJ6b25lX3VjcnUyIiwiem9uZV91Y3J1MyIsInpvbmVfdWNydTQiLCJ6b25lX3VjcnU1Iiwiem9uZV91Y3J1NiIsInpvbmVfdWNydTciLCJ6b25lX3VjcnU4Iiwiem9uZV91Y3J1OSIsInpvbmVfdWNydTExIiwiem9uZV91ZDEiLCJ6b25lX3VkMiIsInpvbmVfdWQzIiwiem9uZV91ZDQiLCJzdXBhYmFzZSIsImNpdHlTZWxlY3QiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiem9uaW5nU2VsZWN0Iiwiem9uZVNlbGVjdCIsInN5bnRoZXNpc0J0biIsInN0YXR1c01lc3NhZ2UiLCJjaXR5U3Bpbm5lciIsInpvbmluZ1NwaW5uZXIiLCJ6b25lU3Bpbm5lciIsImRvY3VtZW50U3Bpbm5lciIsInNob3dTdGF0dXMiLCJtZXNzYWdlIiwidHlwZSIsInRleHRDb250ZW50IiwiY2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiY29uc29sZSIsIndhcm4iLCJ0b2dnbGVTcGlubmVyIiwic3Bpbm5lckVsZW1lbnQiLCJzaG93IiwidG9nZ2xlIiwicmVzZXRTZWxlY3QiLCJzZWxlY3RFbGVtZW50IiwiZGVmYXVsdFRleHQiLCJpbm5lckhUTUwiLCJkaXNhYmxlZCIsImZvcm1hdEFwaU5hbWUiLCJuYW1lIiwicmVwbGFjZSIsImNoYXIiLCJ0b1VwcGVyQ2FzZSIsInBvcHVsYXRlU2VsZWN0IiwiZGF0YSIsImRlZmF1bHRPcHRpb25UZXh0IiwiZW1wdHlEYXRhVGV4dCIsImRhdGFUeXBlIiwibGVuZ3RoIiwiZm9yRWFjaCIsIml0ZW0iLCJvcHRpb24iLCJjcmVhdGVFbGVtZW50IiwidmFsdWUiLCJpZCIsImRpc3BsYXlUZXh0IiwiaGFzT3duUHJvcGVydHkiLCJhcHBlbmRDaGlsZCIsInNlbGVjdGVkRG9jdW1lbnQiLCJnZXRTZWxlY3RlZERvY3VtZW50IiwiY3VycmVudFVzZXIiLCJzZXNzaW9uVmFsaWRhdGVkIiwic2V0Q3VycmVudFVzZXIiLCJ1c2VyIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZW1vdmVJdGVtIiwiYXN5bmMiLCJnZXRDdXJyZW50VXNlciIsInZhbGlkYXRlIiwic2Vzc2lvbiIsImVycm9yIiwic2Vzc2lvbkVycm9yIiwiYXV0aCIsImdldFNlc3Npb24iLCJsb2ciLCJyZWZyZXNoRXJyb3IiLCJyZWZyZXNoU2Vzc2lvbiIsInNpZ25PdXQiLCJlIiwidmFsaWRhdGVTZXNzaW9uIiwic3RvcmVkVXNlciIsImdldEl0ZW0iLCJwYXJzZSIsInVwZGF0ZUhlYWRlckZvckF1dGhTdGF0ZSIsInVzZXJTdGF0dXMiLCJsb2dpbkxpbmsiLCJzaWdudXBMaW5rIiwibG9nb3V0QnRuIiwiYWRkIiwib25BdXRoU3RhdGVDaGFuZ2UiLCJldmVudCIsInNvdXJjZV9wbHVfZGF0ZSIsInVwZGF0ZVVJRm9yQXV0aFN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNpdHlJZCIsImZyb20iLCJzZWxlY3QiLCJlcSIsIm9yZGVyIiwibWFwIiwiem9uaW5nIiwibG9hZFpvbmluZ3MiLCJ0YXJnZXQiLCJ6b25pbmdJZCIsInpvbmUiLCJsb2FkWm9uZXMiLCJ6b25lSWQiLCJzaW5nbGUiLCJjb2RlIiwiZmluZERvY3VtZW50Iiwid2luZG93Iiwib3BlbiIsInNldFRpbWVvdXQiLCJyZXBsYWNlV2l0aCIsImNsb25lTm9kZSIsInByZXZlbnREZWZhdWx0IiwiYWxlcnQiLCJzZXR1cExvZ291dEhhbmRsZXIiLCJsb2NhdGlvbiIsImhyZWYiLCJjaXR5IiwibG9hZENpdGllcyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCIsIm0iLCJPIiwicmVzdWx0IiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJpIiwiZnVsZmlsbGVkIiwiaiIsIk9iamVjdCIsImtleXMiLCJldmVyeSIsImtleSIsInNwbGljZSIsInIiLCJnZXRQcm90b3R5cGVPZiIsIm9iaiIsInQiLCJtb2RlIiwidGhpcyIsIl9fZXNNb2R1bGUiLCJ0aGVuIiwibnMiLCJjcmVhdGUiLCJkZWYiLCJjdXJyZW50IiwiaW5kZXhPZiIsImdldE93blByb3BlcnR5TmFtZXMiLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJmIiwiY2h1bmtJZCIsIlByb21pc2UiLCJhbGwiLCJyZWR1Y2UiLCJwcm9taXNlcyIsInUiLCJnIiwiZ2xvYmFsVGhpcyIsIkZ1bmN0aW9uIiwicHJvcCIsInByb3RvdHlwZSIsImwiLCJ1cmwiLCJkb25lIiwicHVzaCIsInNjcmlwdCIsIm5lZWRBdHRhY2giLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzIiwiZ2V0QXR0cmlidXRlIiwiY2hhcnNldCIsInRpbWVvdXQiLCJuYyIsInNldEF0dHJpYnV0ZSIsInNyYyIsIm9uU2NyaXB0Q29tcGxldGUiLCJwcmV2Iiwib25lcnJvciIsIm9ubG9hZCIsImNsZWFyVGltZW91dCIsImRvbmVGbnMiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJiaW5kIiwiaGVhZCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImN1cnJlbnRTY3JpcHQiLCJ0YWdOYW1lIiwidGVzdCIsIkVycm9yIiwicCIsImluc3RhbGxlZENodW5rcyIsImluc3RhbGxlZENodW5rRGF0YSIsInByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZXJyb3JUeXBlIiwicmVhbFNyYyIsInJlcXVlc3QiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwic29tZSIsImNodW5rTG9hZGluZ0dsb2JhbCIsInNlbGYiLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==