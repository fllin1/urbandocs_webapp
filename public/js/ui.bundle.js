(()=>{"use strict";var e,t,n,r={6354:(e,t,n)=>{n(4587);const r=new class{constructor(){this.elements=new Map,this.initializeElements()}initializeElements(){this.register("citySelect","citySelect"),this.register("zoningSelect","zoningSelect"),this.register("zoneSelect","zoneSelect"),this.register("typologieSelect","typologieSelect"),this.register("synthesisBtn","synthesisBtn"),this.register("statusMessage","statusMessage"),this.register("citySpinner","citySpinner"),this.register("zoningSpinner","zoningSpinner"),this.register("zoneSpinner","zoneSpinner"),this.register("typologieSpinner","typologieSpinner"),this.register("documentSpinner","documentSpinner"),this.register("userStatus","userStatus"),this.register("logoutBtn","logoutBtn"),this.register("loginLink","loginLink"),this.register("signupLink","signupLink")}register(e,t){const n=document.getElementById(t);n&&this.elements.set(e,n)}get(e){return this.elements.get(e)||null}exists(e){return this.elements.has(e)&&null!==this.elements.get(e)}};r.get("citySelect"),r.get("zoningSelect"),r.get("zoneSelect"),r.get("typologieSelect"),r.get("synthesisBtn"),r.get("statusMessage"),r.get("citySpinner"),r.get("zoningSpinner"),r.get("zoneSpinner"),r.get("typologieSpinner"),r.get("documentSpinner"),r.get("userStatus"),r.get("logoutBtn"),r.get("loginLink"),r.get("signupLink")}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e].call(n.exports,n,n.exports,s),n.exports}s.m=r,e=[],s.O=(t,n,r,i)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,r,i]=e[c],g=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(g=!1,i<o&&(o=i));if(g){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,r,i]},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var i=Object.create(null);s.r(i);var o={};t=t||[null,n({}),n([]),n(n)];for(var g=2&r&&e;"object"==typeof g&&!~t.indexOf(g);g=n(g))Object.getOwnPropertyNames(g).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,s.d(i,o),i},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.e=()=>Promise.resolve(),s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.j=209,(()=>{var e={209:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[o,g,l]=n,u=0;if(o.some((t=>0!==e[t]))){for(r in g)s.o(g,r)&&(s.m[r]=g[r]);if(l)var c=l(s)}for(t&&t(n);u<o.length;u++)i=o[u],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(c)},n=self.webpackChunkurbandocs_webapp=self.webpackChunkurbandocs_webapp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=s.O(void 0,[76],(()=>s(6354)));o=s.O(o)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDekIwQyxFQUFVL0MsRUFBU0ssR0FDaEJoQixFQUFvQjBDLEVBQUVlLEVBQWlCQyxJQUFZRCxFQUFnQkMsSUFDckVELEVBQWdCQyxHQUFTLEtBRTFCRCxFQUFnQkMsR0FBVyxFQUU1QixPQUFPMUQsRUFBb0JTLEVBQUVDLElBRzFCdUQsRUFBcUJDLEtBQW1DLDZCQUFJQSxLQUFtQyw4QkFBSyxHQUN4R0QsRUFBbUIxQixRQUFRb0IsRUFBcUJRLEtBQUssS0FBTSxJQUMzREYsRUFBbUJHLEtBQU9ULEVBQXFCUSxLQUFLLEtBQU1GLEVBQW1CRyxLQUFLRCxLQUFLRixHLEtDN0N2RixJQUFJSSxFQUFzQnJFLEVBQW9CUyxPQUFFTixFQUFXLENBQUMsS0FBSyxJQUFPSCxFQUFvQixRQUM1RnFFLEVBQXNCckUsRUFBb0JTLEVBQUU0RCxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2NyZWF0ZSBmYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC8uL3NyYy9qcy91aS5qcyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2Vuc3VyZSBjaHVuayIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9ydW50aW1lSWQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IChyZXN1bHQsIGNodW5rSWRzLCBmbiwgcHJpb3JpdHkpID0+IHtcblx0aWYoY2h1bmtJZHMpIHtcblx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0Zm9yKHZhciBpID0gZGVmZXJyZWQubGVuZ3RoOyBpID4gMCAmJiBkZWZlcnJlZFtpIC0gMV1bMl0gPiBwcmlvcml0eTsgaS0tKSBkZWZlcnJlZFtpXSA9IGRlZmVycmVkW2kgLSAxXTtcblx0XHRkZWZlcnJlZFtpXSA9IFtjaHVua0lkcywgZm4sIHByaW9yaXR5XTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIG5vdEZ1bGZpbGxlZCA9IEluZmluaXR5O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIFtjaHVua0lkcywgZm4sIHByaW9yaXR5XSA9IGRlZmVycmVkW2ldO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeSgoa2V5KSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXy5PW2tleV0oY2h1bmtJZHNbal0pKSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJ2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgPyAob2JqKSA9PiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikpIDogKG9iaikgPT4gKG9iai5fX3Byb3RvX18pO1xudmFyIGxlYWZQcm90b3R5cGVzO1xuLy8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4vLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbi8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuLy8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4vLyBtb2RlICYgMTY6IHJldHVybiB2YWx1ZSB3aGVuIGl0J3MgUHJvbWlzZS1saWtlXG4vLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuXHRpZihtb2RlICYgMSkgdmFsdWUgPSB0aGlzKHZhbHVlKTtcblx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcblx0aWYodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSkge1xuXHRcdGlmKChtb2RlICYgNCkgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuXHRcdGlmKChtb2RlICYgMTYpICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdmFsdWU7XG5cdH1cblx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcblx0dmFyIGRlZiA9IHt9O1xuXHRsZWFmUHJvdG90eXBlcyA9IGxlYWZQcm90b3R5cGVzIHx8IFtudWxsLCBnZXRQcm90byh7fSksIGdldFByb3RvKFtdKSwgZ2V0UHJvdG8oZ2V0UHJvdG8pXTtcblx0Zm9yKHZhciBjdXJyZW50ID0gbW9kZSAmIDIgJiYgdmFsdWU7IHR5cGVvZiBjdXJyZW50ID09ICdvYmplY3QnICYmICF+bGVhZlByb3RvdHlwZXMuaW5kZXhPZihjdXJyZW50KTsgY3VycmVudCA9IGdldFByb3RvKGN1cnJlbnQpKSB7XG5cdFx0T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY3VycmVudCkuZm9yRWFjaCgoa2V5KSA9PiAoZGVmW2tleV0gPSAoKSA9PiAodmFsdWVba2V5XSkpKTtcblx0fVxuXHRkZWZbJ2RlZmF1bHQnXSA9ICgpID0+ICh2YWx1ZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChucywgZGVmKTtcblx0cmV0dXJuIG5zO1xufTsiLCIvLyBwdWJsaWMvanMvdWkuanNcclxuLyoqXHJcbiAqIFVJIE1vZHVsZVxyXG4gKiBAbW9kdWxlIHVpXHJcbiAqIEBkZXNjcmlwdGlvbiBVcGdyYWRlZCBVSSBtb2R1bGUgd2l0aCBlbmhhbmNlZCBjb21wb25lbnRzIGFuZCBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XHJcbiAqIEB2ZXJzaW9uIDAuMS4wXHJcbiAqIEBhdXRob3IgR3JleVBhbmRhXHJcbiAqXHJcbiAqIEBjaGFuZ2Vsb2dcclxuICogLSAwLjEuMCAoMjAyNS0wMS0yOSk6IE1ham9yIHJlZmFjdG9yIHdpdGggZW5oYW5jZWQgY29tcG9uZW50cyBhbmQgc3RhdGUgbWFuYWdlbWVudCBpbnRlZ3JhdGlvblxyXG4gKiAtIDAuMC4xICgyMDI1LTA0LTI2KTogSW5pdGlhbCB2ZXJzaW9uIHdpdGggYmFzaWMgVUkgZnVuY3Rpb25zIGFuZCBlbGVtZW50IHJlZmVyZW5jZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyB6b25lTmFtZU1hcHBpbmdzIH0gZnJvbSBcIi4vbWFwcGluZ3MuanNcIjtcclxuXHJcbi8vIFNpbXBsZSBmYWxsYmFja3MgZm9yIGVuaGFuY2VkIGZlYXR1cmVzXHJcbmNvbnN0IFVJQ29tcG9uZW50cyA9IHtcclxuICBzaG93VG9hc3Q6IChtZXNzYWdlLCB0eXBlKSA9PiBjb25zb2xlLmxvZyhgVG9hc3Q6ICR7bWVzc2FnZX0gKCR7dHlwZX0pYCksXHJcbn07XHJcblxyXG5jb25zdCBzdGF0ZU1hbmFnZXIgPSB7XHJcbiAgc2V0VUlTdGF0ZTogKCkgPT4ge30sXHJcbiAgc2V0TG9hZGluZzogKCkgPT4ge30sXHJcbn07XHJcblxyXG4vLyAtLS0gRW5oYW5jZWQgRE9NIEVsZW1lbnQgTWFuYWdlbWVudCAtLS1cclxuY2xhc3MgRE9NRWxlbWVudHMge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5lbGVtZW50cyA9IG5ldyBNYXAoKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZUVsZW1lbnRzKCk7XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplRWxlbWVudHMoKSB7XHJcbiAgICAvLyBGb3JtIGVsZW1lbnRzXHJcbiAgICB0aGlzLnJlZ2lzdGVyKFwiY2l0eVNlbGVjdFwiLCBcImNpdHlTZWxlY3RcIik7XHJcbiAgICB0aGlzLnJlZ2lzdGVyKFwiem9uaW5nU2VsZWN0XCIsIFwiem9uaW5nU2VsZWN0XCIpO1xyXG4gICAgdGhpcy5yZWdpc3RlcihcInpvbmVTZWxlY3RcIiwgXCJ6b25lU2VsZWN0XCIpO1xyXG4gICAgdGhpcy5yZWdpc3RlcihcInR5cG9sb2dpZVNlbGVjdFwiLCBcInR5cG9sb2dpZVNlbGVjdFwiKTtcclxuICAgIHRoaXMucmVnaXN0ZXIoXCJzeW50aGVzaXNCdG5cIiwgXCJzeW50aGVzaXNCdG5cIik7XHJcbiAgICB0aGlzLnJlZ2lzdGVyKFwic3RhdHVzTWVzc2FnZVwiLCBcInN0YXR1c01lc3NhZ2VcIik7XHJcblxyXG4gICAgLy8gU3Bpbm5lciBlbGVtZW50c1xyXG4gICAgdGhpcy5yZWdpc3RlcihcImNpdHlTcGlubmVyXCIsIFwiY2l0eVNwaW5uZXJcIik7XHJcbiAgICB0aGlzLnJlZ2lzdGVyKFwiem9uaW5nU3Bpbm5lclwiLCBcInpvbmluZ1NwaW5uZXJcIik7XHJcbiAgICB0aGlzLnJlZ2lzdGVyKFwiem9uZVNwaW5uZXJcIiwgXCJ6b25lU3Bpbm5lclwiKTtcclxuICAgIHRoaXMucmVnaXN0ZXIoXCJ0eXBvbG9naWVTcGlubmVyXCIsIFwidHlwb2xvZ2llU3Bpbm5lclwiKTtcclxuICAgIHRoaXMucmVnaXN0ZXIoXCJkb2N1bWVudFNwaW5uZXJcIiwgXCJkb2N1bWVudFNwaW5uZXJcIik7XHJcblxyXG4gICAgLy8gQXV0aCBlbGVtZW50c1xyXG4gICAgdGhpcy5yZWdpc3RlcihcInVzZXJTdGF0dXNcIiwgXCJ1c2VyU3RhdHVzXCIpO1xyXG4gICAgdGhpcy5yZWdpc3RlcihcImxvZ291dEJ0blwiLCBcImxvZ291dEJ0blwiKTtcclxuICAgIHRoaXMucmVnaXN0ZXIoXCJsb2dpbkxpbmtcIiwgXCJsb2dpbkxpbmtcIik7XHJcbiAgICB0aGlzLnJlZ2lzdGVyKFwic2lnbnVwTGlua1wiLCBcInNpZ251cExpbmtcIik7XHJcbiAgfVxyXG5cclxuICByZWdpc3RlcihuYW1lLCBpZCkge1xyXG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgIGlmIChlbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuZWxlbWVudHMuc2V0KG5hbWUsIGVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0KG5hbWUpIHtcclxuICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLmdldChuYW1lKSB8fCBudWxsO1xyXG4gIH1cclxuXHJcbiAgZXhpc3RzKG5hbWUpIHtcclxuICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLmhhcyhuYW1lKSAmJiB0aGlzLmVsZW1lbnRzLmdldChuYW1lKSAhPT0gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8vIENyZWF0ZSBzaW5nbGV0b24gaW5zdGFuY2VcclxuY29uc3QgZG9tRWxlbWVudHMgPSBuZXcgRE9NRWxlbWVudHMoKTtcclxuXHJcbi8vIC0tLSBFbmhhbmNlZCBVSSBGdW5jdGlvbnMgLS0tXHJcblxyXG4vKipcclxuICogRW5oYW5jZWQgc3RhdHVzIG1lc3NhZ2UgZGlzcGxheSB3aXRoIHRvYXN0IGludGVncmF0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBzaG93U3RhdHVzKG1lc3NhZ2UsIHR5cGUgPSBcImluZm9cIikge1xyXG4gIGNvbnN0IHN0YXR1c0VsZW1lbnQgPSBkb21FbGVtZW50cy5nZXQoXCJzdGF0dXNNZXNzYWdlXCIpO1xyXG5cclxuICBpZiAoc3RhdHVzRWxlbWVudCkge1xyXG4gICAgLy8gVXBkYXRlIHRoZSBleGlzdGluZyBzdGF0dXMgbWVzc2FnZSBlbGVtZW50XHJcbiAgICBzdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gbWVzc2FnZTtcclxuICAgIHN0YXR1c0VsZW1lbnQuY2xhc3NOYW1lID0gYHN0YXR1cy1tZXNzYWdlIGFsZXJ0IGFsZXJ0LSR7dHlwZX1gO1xyXG4gICAgc3RhdHVzRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZC1ub25lXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gQWxzbyBzaG93IGEgdG9hc3QgZm9yIGJldHRlciBVWCAob3B0aW9uYWwsIGNhbiBiZSBkaXNhYmxlZClcclxuICBpZiAodHlwZSA9PT0gXCJlcnJvclwiIHx8IHR5cGUgPT09IFwid2FybmluZ1wiKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBVSUNvbXBvbmVudHMuc2hvd1RvYXN0KG1lc3NhZ2UsIHR5cGUsIDgwMDApOyAvLyBMb25nZXIgZHVyYXRpb24gZm9yIGVycm9yc1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKFwiVG9hc3Qgbm90IGF2YWlsYWJsZTpcIiwgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHN0YXRlXHJcbiAgdHJ5IHtcclxuICAgIHN0YXRlTWFuYWdlci5zZXRVSVN0YXRlKHR5cGUsIG1lc3NhZ2UpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLndhcm4oXCJTdGF0ZSBtYW5hZ2VyIG5vdCBhdmFpbGFibGU6XCIsIGVycm9yKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFbmhhbmNlZCBzcGlubmVyIG1hbmFnZW1lbnQgd2l0aCBmYWxsYmFja1xyXG4gKi9cclxuZnVuY3Rpb24gdG9nZ2xlU3Bpbm5lcihlbGVtZW50TmFtZSwgc2hvdykge1xyXG4gIGNvbnN0IHNwaW5uZXJFbGVtZW50ID1cclxuICAgIHR5cGVvZiBlbGVtZW50TmFtZSA9PT0gXCJzdHJpbmdcIlxyXG4gICAgICA/IGRvbUVsZW1lbnRzLmdldChlbGVtZW50TmFtZSlcclxuICAgICAgOiBlbGVtZW50TmFtZTtcclxuXHJcbiAgaWYgKHNwaW5uZXJFbGVtZW50KSB7XHJcbiAgICBzcGlubmVyRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiZC1ub25lXCIsICFzaG93KTtcclxuICAgIHNwaW5uZXJFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIiwgIXNob3cpO1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIGdsb2JhbCBsb2FkaW5nIHN0YXRlXHJcbiAgdHJ5IHtcclxuICAgIHN0YXRlTWFuYWdlci5zZXRMb2FkaW5nKHNob3cpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLndhcm4oXCJTdGF0ZSBtYW5hZ2VyIG5vdCBhdmFpbGFibGU6XCIsIGVycm9yKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFbmhhbmNlZCBzZWxlY3QgcmVzZXQgd2l0aCBiZXR0ZXIgVVhcclxuICovXHJcbmZ1bmN0aW9uIHJlc2V0U2VsZWN0KHNlbGVjdEVsZW1lbnQsIGRlZmF1bHRUZXh0KSB7XHJcbiAgY29uc3QgZWxlbWVudCA9XHJcbiAgICB0eXBlb2Ygc2VsZWN0RWxlbWVudCA9PT0gXCJzdHJpbmdcIlxyXG4gICAgICA/IGRvbUVsZW1lbnRzLmdldChzZWxlY3RFbGVtZW50KVxyXG4gICAgICA6IHNlbGVjdEVsZW1lbnQ7XHJcblxyXG4gIGlmIChlbGVtZW50KSB7XHJcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IGA8b3B0aW9uIHZhbHVlPVwiXCI+JHtcclxuICAgICAgZGVmYXVsdFRleHQgfHwgXCJTw6lsZWN0aW9ubmV6IHVuZSBvcHRpb25cIlxyXG4gICAgfTwvb3B0aW9uPmA7XHJcbiAgICBlbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImVycm9yXCIpOyAvLyBSZW1vdmUgYW55IGVycm9yIHN0YXRlXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogRW5oYW5jZWQgbmFtZSBmb3JtYXR0aW5nIHdpdGggYmV0dGVyIFVuaWNvZGUgc3VwcG9ydFxyXG4gKi9cclxuZnVuY3Rpb24gZm9ybWF0QXBpTmFtZShuYW1lKSB7XHJcbiAgaWYgKCFuYW1lKSByZXR1cm4gXCJcIjtcclxuXHJcbiAgcmV0dXJuIG5hbWVcclxuICAgIC5yZXBsYWNlKC9fL2csIFwiIFwiKVxyXG4gICAgLnJlcGxhY2UoL1xcYlxcdy9nLCAoY2hhcikgPT4gY2hhci50b1VwcGVyQ2FzZSgpKVxyXG4gICAgLnRyaW0oKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEVuaGFuY2VkIHNlbGVjdCBwb3B1bGF0aW9uIHdpdGggZXJyb3IgaGFuZGxpbmcgYW5kIGFuaW1hdGlvbnNcclxuICovXHJcbmZ1bmN0aW9uIHBvcHVsYXRlU2VsZWN0KFxyXG4gIHNlbGVjdEVsZW1lbnQsXHJcbiAgZGF0YSxcclxuICBkZWZhdWx0T3B0aW9uVGV4dCxcclxuICBlbXB0eURhdGFUZXh0LFxyXG4gIGRhdGFUeXBlXHJcbikge1xyXG4gIGNvbnN0IGVsZW1lbnQgPVxyXG4gICAgdHlwZW9mIHNlbGVjdEVsZW1lbnQgPT09IFwic3RyaW5nXCJcclxuICAgICAgPyBkb21FbGVtZW50cy5nZXQoc2VsZWN0RWxlbWVudClcclxuICAgICAgOiBzZWxlY3RFbGVtZW50O1xyXG5cclxuICBpZiAoIWVsZW1lbnQpIHtcclxuICAgIGNvbnNvbGUud2FybihgU2VsZWN0IGVsZW1lbnQgbm90IGZvdW5kOiAke3NlbGVjdEVsZW1lbnR9YCk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvLyBSZXNldCBmaXJzdFxyXG4gIHJlc2V0U2VsZWN0KGVsZW1lbnQsIGRlZmF1bHRPcHRpb25UZXh0KTtcclxuXHJcbiAgaWYgKCFkYXRhIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IGA8b3B0aW9uIHZhbHVlPVwiXCI+JHtlbXB0eURhdGFUZXh0fTwvb3B0aW9uPmA7XHJcbiAgICBlbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIENyZWF0ZSBkb2N1bWVudCBmcmFnbWVudCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXHJcbiAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gIC8vIEFkZCBkZWZhdWx0IG9wdGlvblxyXG4gIGNvbnN0IGRlZmF1bHRPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gIGRlZmF1bHRPcHRpb24udmFsdWUgPSBcIlwiO1xyXG4gIGRlZmF1bHRPcHRpb24udGV4dENvbnRlbnQgPSBkZWZhdWx0T3B0aW9uVGV4dDtcclxuICBkZWZhdWx0T3B0aW9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICBkZWZhdWx0T3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcclxuICBmcmFnbWVudC5hcHBlbmRDaGlsZChkZWZhdWx0T3B0aW9uKTtcclxuXHJcbiAgLy8gQWRkIGRhdGEgb3B0aW9uc1xyXG4gIGRhdGEuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgIG9wdGlvbi52YWx1ZSA9IGl0ZW0uaWQ7XHJcblxyXG4gICAgLy8gRW5oYW5jZWQgZm9ybWF0dGluZyBsb2dpY1xyXG4gICAgbGV0IGRpc3BsYXlUZXh0ID0gXCJcIjtcclxuICAgIGlmIChkYXRhVHlwZSA9PT0gXCJ6b25lXCIgJiYgem9uZU5hbWVNYXBwaW5ncy5oYXNPd25Qcm9wZXJ0eShpdGVtLm5hbWUpKSB7XHJcbiAgICAgIGRpc3BsYXlUZXh0ID0gem9uZU5hbWVNYXBwaW5nc1tpdGVtLm5hbWVdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZGlzcGxheVRleHQgPSBmb3JtYXRBcGlOYW1lKGl0ZW0ubmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb3B0aW9uLnRleHRDb250ZW50ID0gZGlzcGxheVRleHQ7XHJcbiAgICBvcHRpb24uc2V0QXR0cmlidXRlKFwiZGF0YS1yYXctbmFtZVwiLCBpdGVtLm5hbWUpOyAvLyBTdG9yZSBvcmlnaW5hbCBuYW1lXHJcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gIH0pO1xyXG5cclxuICAvLyBVcGRhdGUgRE9NIGluIG9uZSBvcGVyYXRpb25cclxuICBlbGVtZW50LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgZWxlbWVudC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XHJcbiAgZWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuICAvLyBBZGQgZmFkZS1pbiBhbmltYXRpb25cclxuICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmYWRlLWluXCIpO1xyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLy8gLS0tIEVuaGFuY2VkIEhlbHBlciBGdW5jdGlvbnMgLS0tXHJcblxyXG4vKipcclxuICogQ3JlYXRlIGVuaGFuY2VkIGZvcm0gZmllbGQgd2l0aCB2YWxpZGF0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVFbmhhbmNlZEZpZWxkKGNvbmZpZykge1xyXG4gIGNvbnNvbGUud2FybihcIkVuaGFuY2VkIGZpZWxkIGNyZWF0aW9uIG5vdCBhdmFpbGFibGUgaW4gZmFsbGJhY2sgbW9kZVwiKTtcclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJhdGNoIHVwZGF0ZSBtdWx0aXBsZSBzZWxlY3RzIGVmZmljaWVudGx5XHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVTZWxlY3RTdGF0ZXModXBkYXRlcykge1xyXG4gIHVwZGF0ZXMuZm9yRWFjaCgoeyBlbGVtZW50LCBkYXRhLCBjb25maWcgfSkgPT4ge1xyXG4gICAgcG9wdWxhdGVTZWxlY3QoXHJcbiAgICAgIGVsZW1lbnQsXHJcbiAgICAgIGRhdGEsXHJcbiAgICAgIGNvbmZpZy5kZWZhdWx0VGV4dCxcclxuICAgICAgY29uZmlnLmVtcHR5VGV4dCxcclxuICAgICAgY29uZmlnLmRhdGFUeXBlXHJcbiAgICApO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogRW5oYW5jZWQgZXJyb3IgZGlzcGxheSB3aXRoIGJldHRlciBVWFxyXG4gKi9cclxuZnVuY3Rpb24gc2hvd0ZpZWxkRXJyb3IoZmllbGROYW1lLCBlcnJvcikge1xyXG4gIGNvbnN0IGZpZWxkID0gZG9tRWxlbWVudHMuZ2V0KGZpZWxkTmFtZSk7XHJcbiAgaWYgKGZpZWxkKSB7XHJcbiAgICBmaWVsZC5jbGFzc0xpc3QuYWRkKFwiZXJyb3JcIik7XHJcblxyXG4gICAgLy8gU2hvdyBlcnJvciBtZXNzYWdlXHJcbiAgICBsZXQgZXJyb3JFbGVtZW50ID0gZmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKFwiLmZpZWxkLWVycm9yXCIpO1xyXG4gICAgaWYgKCFlcnJvckVsZW1lbnQpIHtcclxuICAgICAgZXJyb3JFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTmFtZSA9IFwiZmllbGQtZXJyb3JcIjtcclxuICAgICAgZmllbGQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlcnJvckVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ2xlYXIgZmllbGQgZXJyb3Igc3RhdGVcclxuICovXHJcbmZ1bmN0aW9uIGNsZWFyRmllbGRFcnJvcihmaWVsZE5hbWUpIHtcclxuICBjb25zdCBmaWVsZCA9IGRvbUVsZW1lbnRzLmdldChmaWVsZE5hbWUpO1xyXG4gIGlmIChmaWVsZCkge1xyXG4gICAgZmllbGQuY2xhc3NMaXN0LnJlbW92ZShcImVycm9yXCIpO1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKFwiLmZpZWxkLWVycm9yXCIpO1xyXG4gICAgaWYgKGVycm9yRWxlbWVudCkge1xyXG4gICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIC0tLSBCYWNrd2FyZCBDb21wYXRpYmlsaXR5IExheWVyIC0tLVxyXG4vLyBFeHBvcnQgaW5kaXZpZHVhbCBlbGVtZW50cyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxyXG5jb25zdCBjaXR5U2VsZWN0ID0gZG9tRWxlbWVudHMuZ2V0KFwiY2l0eVNlbGVjdFwiKTtcclxuY29uc3Qgem9uaW5nU2VsZWN0ID0gZG9tRWxlbWVudHMuZ2V0KFwiem9uaW5nU2VsZWN0XCIpO1xyXG5jb25zdCB6b25lU2VsZWN0ID0gZG9tRWxlbWVudHMuZ2V0KFwiem9uZVNlbGVjdFwiKTtcclxuY29uc3QgdHlwb2xvZ2llU2VsZWN0ID0gZG9tRWxlbWVudHMuZ2V0KFwidHlwb2xvZ2llU2VsZWN0XCIpO1xyXG5jb25zdCBzeW50aGVzaXNCdG4gPSBkb21FbGVtZW50cy5nZXQoXCJzeW50aGVzaXNCdG5cIik7XHJcbmNvbnN0IHN0YXR1c01lc3NhZ2UgPSBkb21FbGVtZW50cy5nZXQoXCJzdGF0dXNNZXNzYWdlXCIpO1xyXG5cclxuY29uc3QgY2l0eVNwaW5uZXIgPSBkb21FbGVtZW50cy5nZXQoXCJjaXR5U3Bpbm5lclwiKTtcclxuY29uc3Qgem9uaW5nU3Bpbm5lciA9IGRvbUVsZW1lbnRzLmdldChcInpvbmluZ1NwaW5uZXJcIik7XHJcbmNvbnN0IHpvbmVTcGlubmVyID0gZG9tRWxlbWVudHMuZ2V0KFwiem9uZVNwaW5uZXJcIik7XHJcbmNvbnN0IHR5cG9sb2dpZVNwaW5uZXIgPSBkb21FbGVtZW50cy5nZXQoXCJ0eXBvbG9naWVTcGlubmVyXCIpO1xyXG5jb25zdCBkb2N1bWVudFNwaW5uZXIgPSBkb21FbGVtZW50cy5nZXQoXCJkb2N1bWVudFNwaW5uZXJcIik7XHJcblxyXG5jb25zdCB1c2VyU3RhdHVzID0gZG9tRWxlbWVudHMuZ2V0KFwidXNlclN0YXR1c1wiKTtcclxuY29uc3QgbG9nb3V0QnRuID0gZG9tRWxlbWVudHMuZ2V0KFwibG9nb3V0QnRuXCIpO1xyXG5jb25zdCBsb2dpbkxpbmsgPSBkb21FbGVtZW50cy5nZXQoXCJsb2dpbkxpbmtcIik7XHJcbmNvbnN0IHNpZ251cExpbmsgPSBkb21FbGVtZW50cy5nZXQoXCJzaWdudXBMaW5rXCIpO1xyXG5cclxuLy8gLS0tIEVuaGFuY2VkIEV4cG9ydHMgLS0tXHJcbmV4cG9ydCB7XHJcbiAgLy8gQmFja3dhcmQgY29tcGF0aWJpbGl0eSAtIGluZGl2aWR1YWwgZWxlbWVudHNcclxuICBjaXR5U2VsZWN0LFxyXG4gIHpvbmluZ1NlbGVjdCxcclxuICB6b25lU2VsZWN0LFxyXG4gIHR5cG9sb2dpZVNlbGVjdCxcclxuICBzeW50aGVzaXNCdG4sXHJcbiAgc3RhdHVzTWVzc2FnZSxcclxuICBjaXR5U3Bpbm5lcixcclxuICB6b25pbmdTcGlubmVyLFxyXG4gIHpvbmVTcGlubmVyLFxyXG4gIHR5cG9sb2dpZVNwaW5uZXIsXHJcbiAgZG9jdW1lbnRTcGlubmVyLFxyXG4gIHVzZXJTdGF0dXMsXHJcbiAgbG9nb3V0QnRuLFxyXG4gIGxvZ2luTGluayxcclxuICBzaWdudXBMaW5rLFxyXG5cclxuICAvLyBFbmhhbmNlZCBmdW5jdGlvbnNcclxuICBzaG93U3RhdHVzLFxyXG4gIHRvZ2dsZVNwaW5uZXIsXHJcbiAgcmVzZXRTZWxlY3QsXHJcbiAgZm9ybWF0QXBpTmFtZSxcclxuICBwb3B1bGF0ZVNlbGVjdCxcclxuXHJcbiAgLy8gTmV3IGVuaGFuY2VkIGZ1bmN0aW9uc1xyXG4gIGNyZWF0ZUVuaGFuY2VkRmllbGQsXHJcbiAgdXBkYXRlU2VsZWN0U3RhdGVzLFxyXG4gIHNob3dGaWVsZEVycm9yLFxyXG4gIGNsZWFyRmllbGRFcnJvcixcclxuXHJcbiAgLy8gRW5oYW5jZWQgZWxlbWVudHMgbWFuYWdlclxyXG4gIGRvbUVsZW1lbnRzLFxyXG5cclxuICAvLyBSZS1leHBvcnQgVUkgY29tcG9uZW50cyBmb3IgY29udmVuaWVuY2VcclxuICBVSUNvbXBvbmVudHMsXHJcbn07XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiLy8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG4vLyBTaW5jZSBhbGwgcmVmZXJlbmNlZCBjaHVua3MgYXJlIGFscmVhZHkgaW5jbHVkZWRcbi8vIGluIHRoaXMgZmlsZSwgdGhpcyBmdW5jdGlvbiBpcyBlbXB0eSBoZXJlLlxuX193ZWJwYWNrX3JlcXVpcmVfXy5lID0gKCkgPT4gKFByb21pc2UucmVzb2x2ZSgpKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmogPSAyMDk7IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDIwOTogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5PLmogPSAoY2h1bmtJZCkgPT4gKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMCk7XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZSgoaWQpID0+IChpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwKSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rdXJiYW5kb2NzX3dlYmFwcFwiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt1cmJhbmRvY3Nfd2ViYXBwXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbNzZdLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXyg2MzU0KSkpXG5fX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuIl0sIm5hbWVzIjpbImRlZmVycmVkIiwibGVhZlByb3RvdHlwZXMiLCJnZXRQcm90byIsImRvbUVsZW1lbnRzIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwiZWxlbWVudHMiLCJNYXAiLCJpbml0aWFsaXplRWxlbWVudHMiLCJyZWdpc3RlciIsIm5hbWUiLCJpZCIsImVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic2V0IiwiZ2V0IiwiZXhpc3RzIiwiaGFzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwibSIsIk8iLCJyZXN1bHQiLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJsZW5ndGgiLCJmdWxmaWxsZWQiLCJqIiwiT2JqZWN0Iiwia2V5cyIsImV2ZXJ5Iiwia2V5Iiwic3BsaWNlIiwiciIsImdldFByb3RvdHlwZU9mIiwib2JqIiwidCIsInZhbHVlIiwibW9kZSIsIl9fZXNNb2R1bGUiLCJ0aGVuIiwibnMiLCJjcmVhdGUiLCJkZWYiLCJjdXJyZW50IiwiaW5kZXhPZiIsImdldE93blByb3BlcnR5TmFtZXMiLCJmb3JFYWNoIiwiZCIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsIndpbmRvdyIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiaW5zdGFsbGVkQ2h1bmtzIiwiY2h1bmtJZCIsIndlYnBhY2tKc29ucENhbGxiYWNrIiwicGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24iLCJkYXRhIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwic29tZSIsImNodW5rTG9hZGluZ0dsb2JhbCIsInNlbGYiLCJiaW5kIiwicHVzaCIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9