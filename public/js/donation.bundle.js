(()=>{"use strict";var e,t,o,r,n,i={9080:(e,t,o)=>{var r=o(9251);const n={5:"https://buy.stripe.com/fZu6oJ2R9fAp6GN0ms9Zm07",10:"https://buy.stripe.com/4gM28t4Zhcod5CJ2uA9Zm06",15:"https://buy.stripe.com/8x2fZj0J14VLe9fc5a9Zm03",20:"https://buy.stripe.com/bJe9AV77pcod6GN3yE9Zm05",30:"https://buy.stripe.com/7sY9AV9fx9c10ip1qw9Zm02",50:"https://buy.stripe.com/6oU7sN0J1fAp7KR0ms9Zm04",100:"https://buy.stripe.com/aFa7sN77p0Fv7KR2uA9Zm01"};function i(e){const t=document.getElementById("donateBtn");t&&e>0?(t.disabled=!1,t.innerHTML=`Faire un don de&nbsp;<span id="selectedAmount">${e}</span>€`):t&&(t.disabled=!0,t.innerHTML='Faire un don de&nbsp;<span id="selectedAmount">0</span>€')}function s(e,t="info"){document.querySelectorAll(".notification").forEach((e=>e.remove()));const o=document.createElement("div");return o.className=`notification notification-${t}`,o.textContent=e,Object.assign(o.style,{position:"fixed",top:"20px",right:"20px",padding:"15px 20px",borderRadius:"8px",color:"white",fontWeight:"500",zIndex:"10000",maxWidth:"400px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",backgroundColor:"success"===t?"#10b981":"error"===t?"#ef4444":"warning"===t?"#f59e0b":"#3b82f6"}),document.body.appendChild(o),setTimeout((()=>{o.parentNode&&o.remove()}),5e3),o}document.addEventListener("DOMContentLoaded",(()=>{try{(0,r.Mt)(),!function(){try{if(!function(){const e=document.querySelectorAll(".amount-btn"),t=document.getElementById("customAmount"),o=document.getElementById("donateBtn");if(!e.length||!t||!o)return console.error("Required donation form elements not found"),!1;let r=5;return i(r),e.forEach((o=>{o.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("selected"))),o.classList.add("selected"),r=parseInt(o.dataset.amount),i(r),t.value=""}))})),t.addEventListener("input",(t=>{const o=parseInt(t.target.value);if(o&&o>0)e.forEach((e=>e.classList.remove("selected"))),r=o,i(r);else if(!t.target.value){const e=document.querySelector('.amount-btn[data-amount="5"]');e&&(e.classList.add("selected"),r=5,i(r))}})),o.addEventListener("click",(()=>{r>0&&function(e){const t=document.getElementById("donateBtn"),o=t.innerHTML;t.disabled=!0,t.innerHTML="Ouverture du paiement...";try{if(n[e]){const r=window.open(n[e],"stripe-checkout","width=600,height=600,scrollbars=yes,resizable=yes");return setTimeout((()=>{t.disabled=!1,t.innerHTML=o}),1e3),void(r&&r.focus())}const r=window.open("https://buy.stripe.com/6oUfZj77pgEtfdjb169Zm00","stripe-checkout","width=600,height=600,scrollbars=yes,resizable=yes");setTimeout((()=>{t.disabled=!1,t.innerHTML=o}),1e3),r&&r.focus(),s(`Vous pourrez ajuster le montant (${e}€) sur la page de paiement Stripe.`,"info")}catch(e){console.error("Error processing donation:",e),s("Erreur lors du traitement du don.","error"),t.disabled=!1,t.innerHTML=o}}(r)})),console.log("Donation system setup complete"),!0}())throw new Error("Failed to setup donation system");return console.log("Donation system initialized successfully"),s("Stripe initialisé","success"),!0}catch(e){return console.error("Error initializing donation system:",e),s("Erreur d'initialisation du système de paiement","error"),!1}}()?console.error("Failed to initialize donation system"):console.log("Donation page initialized successfully")}catch(e){console.error("Error initializing donation page:",e)}}))}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var o=s[e]={exports:{}};return i[e].call(o.exports,o,o.exports,a),o.exports}a.m=i,e=[],a.O=(t,o,r,n)=>{if(!o){var i=1/0;for(u=0;u<e.length;u++){for(var[o,r,n]=e[u],s=!0,c=0;c<o.length;c++)(!1&n||i>=n)&&Object.keys(a.O).every((e=>a.O[e](o[c])))?o.splice(c--,1):(s=!1,n<i&&(i=n));if(s){e.splice(u--,1);var d=r();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,r,n]},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);a.r(n);var i={};t=t||[null,o({}),o([]),o(o)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=o(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,a.d(n,i),n},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,o)=>(a.f[o](e,t),t)),[])),a.u=e=>"js/"+e+".chunk.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},n="urbandocs_webapp:",a.l=(e,t,o,i)=>{if(r[e])r[e].push(t);else{var s,c;if(void 0!==o)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var l=d[u];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==n+o){s=l;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",n+o),s.src=e),r[e]=[t];var p=(t,o)=>{s.onerror=s.onload=null,clearTimeout(f);var n=r[e];if(delete r[e],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((e=>e(o))),t)return t(o)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=357,a.p="/",(()=>{var e={357:0};a.f.j=(t,o)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var n=new Promise(((o,n)=>r=e[t]=[o,n]));o.push(r[2]=n);var i=a.p+a.u(t),s=new Error;a.l(i,(o=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var n=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",s.name="ChunkLoadError",s.type=n,s.request=i,r[1](s)}}),"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,o)=>{var r,n,[i,s,c]=o,d=0;if(i.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var u=c(a)}for(t&&t(o);d<i.length;d++)n=i[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},o=self.webpackChunkurbandocs_webapp=self.webpackChunkurbandocs_webapp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var c=a.O(void 0,[76],(()=>a(9080)));c=a.O(c)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0NsRnZGLElBQUlFLEVBQXNCdEcsRUFBb0JTLE9BQUVOLEVBQVcsQ0FBQyxLQUFLLElBQU9ILEVBQW9CLFFBQzVGc0csRUFBc0J0RyxFQUFvQlMsRUFBRTZGLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvY3JlYXRlIGZha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9sb2FkIHNjcmlwdCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwLy4vc3JjL2pzL21vZHVsZXMvZG9uYXRpb24tc3lzdGVtLmpzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvLi9zcmMvanMvZW50cmllcy9kb25hdGlvbi5qcyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2Vuc3VyZSBjaHVuayIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9ydW50aW1lSWQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkgPT4ge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldID0gZGVmZXJyZWRbaV07XG5cdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjaHVua0lkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKChwcmlvcml0eSAmIDEgPT09IDAgfHwgbm90RnVsZmlsbGVkID49IHByaW9yaXR5KSAmJiBPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLk8pLmV2ZXJ5KChrZXkpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSkpKSkge1xuXHRcdFx0XHRjaHVua0lkcy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihwcmlvcml0eSA8IG5vdEZ1bGZpbGxlZCkgbm90RnVsZmlsbGVkID0gcHJpb3JpdHk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWQuc3BsaWNlKGktLSwgMSlcblx0XHRcdHZhciByID0gZm4oKTtcblx0XHRcdGlmIChyICE9PSB1bmRlZmluZWQpIHJlc3VsdCA9IHI7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59OyIsInZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiA/IChvYmopID0+IChPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSkgOiAob2JqKSA9PiAob2JqLl9fcHJvdG9fXyk7XG52YXIgbGVhZlByb3RvdHlwZXM7XG4vLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3Rcbi8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuLy8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4vLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3Rcbi8vIG1vZGUgJiAxNjogcmV0dXJuIHZhbHVlIHdoZW4gaXQncyBQcm9taXNlLWxpa2Vcbi8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbl9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG5cdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IHRoaXModmFsdWUpO1xuXHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuXHRpZih0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlKSB7XG5cdFx0aWYoKG1vZGUgJiA0KSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG5cdFx0aWYoKG1vZGUgJiAxNikgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbicpIHJldHVybiB2YWx1ZTtcblx0fVxuXHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuXHR2YXIgZGVmID0ge307XG5cdGxlYWZQcm90b3R5cGVzID0gbGVhZlByb3RvdHlwZXMgfHwgW251bGwsIGdldFByb3RvKHt9KSwgZ2V0UHJvdG8oW10pLCBnZXRQcm90byhnZXRQcm90byldO1xuXHRmb3IodmFyIGN1cnJlbnQgPSBtb2RlICYgMiAmJiB2YWx1ZTsgdHlwZW9mIGN1cnJlbnQgPT0gJ29iamVjdCcgJiYgIX5sZWFmUHJvdG90eXBlcy5pbmRleE9mKGN1cnJlbnQpOyBjdXJyZW50ID0gZ2V0UHJvdG8oY3VycmVudCkpIHtcblx0XHRPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjdXJyZW50KS5mb3JFYWNoKChrZXkpID0+IChkZWZba2V5XSA9ICgpID0+ICh2YWx1ZVtrZXldKSkpO1xuXHR9XG5cdGRlZlsnZGVmYXVsdCddID0gKCkgPT4gKHZhbHVlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBkZWYpO1xuXHRyZXR1cm4gbnM7XG59OyIsInZhciBpblByb2dyZXNzID0ge307XG52YXIgZGF0YVdlYnBhY2tQcmVmaXggPSBcInVyYmFuZG9jc193ZWJhcHA6XCI7XG4vLyBsb2FkU2NyaXB0IGZ1bmN0aW9uIHRvIGxvYWQgYSBzY3JpcHQgdmlhIHNjcmlwdCB0YWdcbl9fd2VicGFja19yZXF1aXJlX18ubCA9ICh1cmwsIGRvbmUsIGtleSwgY2h1bmtJZCkgPT4ge1xuXHRpZihpblByb2dyZXNzW3VybF0pIHsgaW5Qcm9ncmVzc1t1cmxdLnB1c2goZG9uZSk7IHJldHVybjsgfVxuXHR2YXIgc2NyaXB0LCBuZWVkQXR0YWNoO1xuXHRpZihrZXkgIT09IHVuZGVmaW5lZCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHNjcmlwdHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBzID0gc2NyaXB0c1tpXTtcblx0XHRcdGlmKHMuZ2V0QXR0cmlidXRlKFwic3JjXCIpID09IHVybCB8fCBzLmdldEF0dHJpYnV0ZShcImRhdGEtd2VicGFja1wiKSA9PSBkYXRhV2VicGFja1ByZWZpeCArIGtleSkgeyBzY3JpcHQgPSBzOyBicmVhazsgfVxuXHRcdH1cblx0fVxuXHRpZighc2NyaXB0KSB7XG5cdFx0bmVlZEF0dGFjaCA9IHRydWU7XG5cdFx0c2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cblx0XHRzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XG5cdFx0c2NyaXB0LnRpbWVvdXQgPSAxMjA7XG5cdFx0aWYgKF9fd2VicGFja19yZXF1aXJlX18ubmMpIHtcblx0XHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKTtcblx0XHR9XG5cdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcImRhdGEtd2VicGFja1wiLCBkYXRhV2VicGFja1ByZWZpeCArIGtleSk7XG5cblx0XHRzY3JpcHQuc3JjID0gdXJsO1xuXHR9XG5cdGluUHJvZ3Jlc3NbdXJsXSA9IFtkb25lXTtcblx0dmFyIG9uU2NyaXB0Q29tcGxldGUgPSAocHJldiwgZXZlbnQpID0+IHtcblx0XHQvLyBhdm9pZCBtZW0gbGVha3MgaW4gSUUuXG5cdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcblx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0dmFyIGRvbmVGbnMgPSBpblByb2dyZXNzW3VybF07XG5cdFx0ZGVsZXRlIGluUHJvZ3Jlc3NbdXJsXTtcblx0XHRzY3JpcHQucGFyZW50Tm9kZSAmJiBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHRcdGRvbmVGbnMgJiYgZG9uZUZucy5mb3JFYWNoKChmbikgPT4gKGZuKGV2ZW50KSkpO1xuXHRcdGlmKHByZXYpIHJldHVybiBwcmV2KGV2ZW50KTtcblx0fVxuXHR2YXIgdGltZW91dCA9IHNldFRpbWVvdXQob25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHVuZGVmaW5lZCwgeyB0eXBlOiAndGltZW91dCcsIHRhcmdldDogc2NyaXB0IH0pLCAxMjAwMDApO1xuXHRzY3JpcHQub25lcnJvciA9IG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCBzY3JpcHQub25lcnJvcik7XG5cdHNjcmlwdC5vbmxvYWQgPSBvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgc2NyaXB0Lm9ubG9hZCk7XG5cdG5lZWRBdHRhY2ggJiYgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xufTsiLCIvLyBzcmMvanMvbW9kdWxlcy9kb25hdGlvbi1zeXN0ZW0uanMgLSBTaW1wbGlmaWVkIGRvbmF0aW9uIHN5c3RlbSB1c2luZyBTdHJpcGUgcGF5bWVudCBsaW5rc1xuXG4vLyBTdHJpcGUgcGF5bWVudCBsaW5rcyBmb3IgZGlmZmVyZW50IGRvbmF0aW9uIGFtb3VudHNcbmNvbnN0IERPTkFUSU9OX0xJTktTID0ge1xuICA1OiBcImh0dHBzOi8vYnV5LnN0cmlwZS5jb20vZlp1Nm9KMlI5ZkFwNkdOMG1zOVptMDdcIixcbiAgMTA6IFwiaHR0cHM6Ly9idXkuc3RyaXBlLmNvbS80Z00yOHQ0Wmhjb2Q1Q0oydUE5Wm0wNlwiLFxuICAxNTogXCJodHRwczovL2J1eS5zdHJpcGUuY29tLzh4MmZaajBKMTRWTGU5ZmM1YTlabTAzXCIsXG4gIDIwOiBcImh0dHBzOi8vYnV5LnN0cmlwZS5jb20vYkplOUFWNzdwY29kNkdOM3lFOVptMDVcIixcbiAgMzA6IFwiaHR0cHM6Ly9idXkuc3RyaXBlLmNvbS83c1k5QVY5Zng5YzEwaXAxcXc5Wm0wMlwiLFxuICA1MDogXCJodHRwczovL2J1eS5zdHJpcGUuY29tLzZvVTdzTjBKMWZBcDdLUjBtczlabTA0XCIsXG4gIDEwMDogXCJodHRwczovL2J1eS5zdHJpcGUuY29tL2FGYTdzTjc3cDBGdjdLUjJ1QTlabTAxXCIsXG59O1xuXG4vLyBDdXN0b20gYW1vdW50IHBheW1lbnQgbGluayAocGF5LXdoYXQteW91LXdhbnQpXG5jb25zdCBDVVNUT01fQU1PVU5UX0xJTksgPSBcImh0dHBzOi8vYnV5LnN0cmlwZS5jb20vNm9VZlpqNzdwZ0V0ZmRqYjE2OVptMDBcIjtcblxuLy8gSGFuZGxlIGRvbmF0aW9uIGFtb3VudCBzZWxlY3Rpb24gYW5kIHJlZGlyZWN0IHRvIFN0cmlwZVxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwRG9uYXRpb25TeXN0ZW0oKSB7XG4gIGNvbnN0IGFtb3VudEJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFtb3VudC1idG5cIik7XG4gIGNvbnN0IGN1c3RvbUFtb3VudElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjdXN0b21BbW91bnRcIik7XG4gIGNvbnN0IGRvbmF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZG9uYXRlQnRuXCIpO1xuXG4gIGlmICghYW1vdW50QnRucy5sZW5ndGggfHwgIWN1c3RvbUFtb3VudElucHV0IHx8ICFkb25hdGVCdG4pIHtcbiAgICBjb25zb2xlLmVycm9yKFwiUmVxdWlyZWQgZG9uYXRpb24gZm9ybSBlbGVtZW50cyBub3QgZm91bmRcIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgbGV0IHNlbGVjdGVkQW1vdW50ID0gNTsgLy8gRGVmYXVsdCBhbW91bnRcblxuICAvLyBJbml0aWFsaXplIHRoZSBidXR0b24gd2l0aCBkZWZhdWx0IGFtb3VudFxuICB1cGRhdGVEb25hdGVCdXR0b24oc2VsZWN0ZWRBbW91bnQpO1xuXG4gIC8vIEhhbmRsZSBwcmVzZXQgYW1vdW50IGJ1dHRvbnNcbiAgYW1vdW50QnRucy5mb3JFYWNoKChidG4pID0+IHtcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIC8vIFJlbW92ZSBzZWxlY3RlZCBjbGFzcyBmcm9tIGFsbCBidXR0b25zXG4gICAgICBhbW91bnRCdG5zLmZvckVhY2goKGIpID0+IGIuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpKTtcblxuICAgICAgLy8gQWRkIHNlbGVjdGVkIGNsYXNzIHRvIGNsaWNrZWQgYnV0dG9uXG4gICAgICBidG4uY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuXG4gICAgICAvLyBVcGRhdGUgc2VsZWN0ZWQgYW1vdW50XG4gICAgICBzZWxlY3RlZEFtb3VudCA9IHBhcnNlSW50KGJ0bi5kYXRhc2V0LmFtb3VudCk7XG4gICAgICB1cGRhdGVEb25hdGVCdXR0b24oc2VsZWN0ZWRBbW91bnQpO1xuXG4gICAgICAvLyBDbGVhciBjdXN0b20gYW1vdW50IGlucHV0XG4gICAgICBjdXN0b21BbW91bnRJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIEhhbmRsZSBjdXN0b20gYW1vdW50IGlucHV0XG4gIGN1c3RvbUFtb3VudElucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgIGNvbnN0IGN1c3RvbUFtb3VudCA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKTtcblxuICAgIGlmIChjdXN0b21BbW91bnQgJiYgY3VzdG9tQW1vdW50ID4gMCkge1xuICAgICAgLy8gUmVtb3ZlIHNlbGVjdGVkIGNsYXNzIGZyb20gYWxsIHByZXNldCBidXR0b25zXG4gICAgICBhbW91bnRCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKSk7XG5cbiAgICAgIC8vIFVwZGF0ZSBzZWxlY3RlZCBhbW91bnRcbiAgICAgIHNlbGVjdGVkQW1vdW50ID0gY3VzdG9tQW1vdW50O1xuICAgICAgdXBkYXRlRG9uYXRlQnV0dG9uKHNlbGVjdGVkQW1vdW50KTtcbiAgICB9IGVsc2UgaWYgKCFlLnRhcmdldC52YWx1ZSkge1xuICAgICAgLy8gSWYgY3VzdG9tIGlucHV0IGlzIGVtcHR5LCBzZWxlY3QgZGVmYXVsdCBhbW91bnRcbiAgICAgIGNvbnN0IGRlZmF1bHRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYW1vdW50LWJ0bltkYXRhLWFtb3VudD1cIjVcIl0nKTtcbiAgICAgIGlmIChkZWZhdWx0QnRuKSB7XG4gICAgICAgIGRlZmF1bHRCdG4uY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuICAgICAgICBzZWxlY3RlZEFtb3VudCA9IDU7XG4gICAgICAgIHVwZGF0ZURvbmF0ZUJ1dHRvbihzZWxlY3RlZEFtb3VudCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBIYW5kbGUgZG9uYXRlIGJ1dHRvbiBjbGlja1xuICBkb25hdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBpZiAoc2VsZWN0ZWRBbW91bnQgPiAwKSB7XG4gICAgICBwcm9jZXNzRG9uYXRpb24oc2VsZWN0ZWRBbW91bnQpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc29sZS5sb2coXCJEb25hdGlvbiBzeXN0ZW0gc2V0dXAgY29tcGxldGVcIik7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBVcGRhdGUgZG9uYXRlIGJ1dHRvbiBzdGF0ZSBhbmQgdGV4dFxuZnVuY3Rpb24gdXBkYXRlRG9uYXRlQnV0dG9uKGFtb3VudCkge1xuICBjb25zdCBkb25hdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRvbmF0ZUJ0blwiKTtcblxuICBpZiAoZG9uYXRlQnRuICYmIGFtb3VudCA+IDApIHtcbiAgICBkb25hdGVCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBkb25hdGVCdG4uaW5uZXJIVE1MID0gYEZhaXJlIHVuIGRvbiBkZSZuYnNwOzxzcGFuIGlkPVwic2VsZWN0ZWRBbW91bnRcIj4ke2Ftb3VudH08L3NwYW4+4oKsYDtcbiAgfSBlbHNlIGlmIChkb25hdGVCdG4pIHtcbiAgICBkb25hdGVCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIGRvbmF0ZUJ0bi5pbm5lckhUTUwgPSBgRmFpcmUgdW4gZG9uIGRlJm5ic3A7PHNwYW4gaWQ9XCJzZWxlY3RlZEFtb3VudFwiPjA8L3NwYW4+4oKsYDtcbiAgfVxufVxuXG4vLyBQcm9jZXNzIGRvbmF0aW9uIGJ5IG9wZW5pbmcgU3RyaXBlIGNoZWNrb3V0IGluIG5ldyB3aW5kb3dcbmZ1bmN0aW9uIHByb2Nlc3NEb25hdGlvbihhbW91bnQpIHtcbiAgY29uc3QgZG9uYXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkb25hdGVCdG5cIik7XG4gIGNvbnN0IG9yaWdpbmFsSFRNTCA9IGRvbmF0ZUJ0bi5pbm5lckhUTUw7XG5cbiAgLy8gU2hvdyBsb2FkaW5nIHN0YXRlXG4gIGRvbmF0ZUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gIGRvbmF0ZUJ0bi5pbm5lckhUTUwgPSBcIk91dmVydHVyZSBkdSBwYWllbWVudC4uLlwiO1xuXG4gIHRyeSB7XG4gICAgLy8gVXNlIHByZS1idWlsdCBwYXltZW50IGxpbmsgZm9yIHN0YW5kYXJkIGFtb3VudHNcbiAgICBpZiAoRE9OQVRJT05fTElOS1NbYW1vdW50XSkge1xuICAgICAgLy8gT3BlbiBTdHJpcGUgY2hlY2tvdXQgaW4gbmV3IHdpbmRvdy90YWJcbiAgICAgIGNvbnN0IHN0cmlwZVdpbmRvdyA9IHdpbmRvdy5vcGVuKFxuICAgICAgICBET05BVElPTl9MSU5LU1thbW91bnRdLFxuICAgICAgICBcInN0cmlwZS1jaGVja291dFwiLFxuICAgICAgICBcIndpZHRoPTYwMCxoZWlnaHQ9NjAwLHNjcm9sbGJhcnM9eWVzLHJlc2l6YWJsZT15ZXNcIlxuICAgICAgKTtcblxuICAgICAgLy8gUmVzdG9yZSBidXR0b24gc3RhdGUgYWZ0ZXIgb3BlbmluZ1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRvbmF0ZUJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBkb25hdGVCdG4uaW5uZXJIVE1MID0gb3JpZ2luYWxIVE1MO1xuICAgICAgfSwgMTAwMCk7XG5cbiAgICAgIC8vIE9wdGlvbmFsOiBGb2N1cyB0aGUgbmV3IHdpbmRvd1xuICAgICAgaWYgKHN0cmlwZVdpbmRvdykge1xuICAgICAgICBzdHJpcGVXaW5kb3cuZm9jdXMoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZvciBjdXN0b20gYW1vdW50cywgdXNlIHRoZSBwYXktd2hhdC15b3Utd2FudCBwYXltZW50IGxpbmtcbiAgICAvLyBUaGUgdXNlciB3aWxsIGJlIGFibGUgdG8gYWRqdXN0IHRoZSBhbW91bnQgb24gdGhlIFN0cmlwZSBwYWdlXG4gICAgY29uc3Qgc3RyaXBlV2luZG93ID0gd2luZG93Lm9wZW4oXG4gICAgICBDVVNUT01fQU1PVU5UX0xJTkssXG4gICAgICBcInN0cmlwZS1jaGVja291dFwiLFxuICAgICAgXCJ3aWR0aD02MDAsaGVpZ2h0PTYwMCxzY3JvbGxiYXJzPXllcyxyZXNpemFibGU9eWVzXCJcbiAgICApO1xuXG4gICAgLy8gUmVzdG9yZSBidXR0b24gc3RhdGUgYWZ0ZXIgb3BlbmluZ1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9uYXRlQnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICBkb25hdGVCdG4uaW5uZXJIVE1MID0gb3JpZ2luYWxIVE1MO1xuICAgIH0sIDEwMDApO1xuXG4gICAgLy8gT3B0aW9uYWw6IEZvY3VzIHRoZSBuZXcgd2luZG93XG4gICAgaWYgKHN0cmlwZVdpbmRvdykge1xuICAgICAgc3RyaXBlV2luZG93LmZvY3VzKCk7XG4gICAgfVxuXG4gICAgLy8gU2hvdyBoZWxwZnVsIG1lc3NhZ2UgZm9yIGN1c3RvbSBhbW91bnRzXG4gICAgc2hvd05vdGlmaWNhdGlvbihcbiAgICAgIGBWb3VzIHBvdXJyZXogYWp1c3RlciBsZSBtb250YW50ICgke2Ftb3VudH3igqwpIHN1ciBsYSBwYWdlIGRlIHBhaWVtZW50IFN0cmlwZS5gLFxuICAgICAgXCJpbmZvXCJcbiAgICApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwcm9jZXNzaW5nIGRvbmF0aW9uOlwiLCBlcnJvcik7XG4gICAgc2hvd05vdGlmaWNhdGlvbihcIkVycmV1ciBsb3JzIGR1IHRyYWl0ZW1lbnQgZHUgZG9uLlwiLCBcImVycm9yXCIpO1xuXG4gICAgLy8gUmVzdG9yZSBidXR0b24gc3RhdGVcbiAgICBkb25hdGVCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBkb25hdGVCdG4uaW5uZXJIVE1MID0gb3JpZ2luYWxIVE1MO1xuICB9XG59XG5cbi8vIFNpbXBsZSBub3RpZmljYXRpb24gc3lzdGVtXG5leHBvcnQgZnVuY3Rpb24gc2hvd05vdGlmaWNhdGlvbihtZXNzYWdlLCB0eXBlID0gXCJpbmZvXCIpIHtcbiAgLy8gUmVtb3ZlIGV4aXN0aW5nIG5vdGlmaWNhdGlvbnNcbiAgY29uc3QgZXhpc3RpbmdOb3RpZmljYXRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ub3RpZmljYXRpb25cIik7XG4gIGV4aXN0aW5nTm90aWZpY2F0aW9ucy5mb3JFYWNoKChub3RpZikgPT4gbm90aWYucmVtb3ZlKCkpO1xuXG4gIC8vIENyZWF0ZSBub3RpZmljYXRpb24gZWxlbWVudFxuICBjb25zdCBub3RpZmljYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBub3RpZmljYXRpb24uY2xhc3NOYW1lID0gYG5vdGlmaWNhdGlvbiBub3RpZmljYXRpb24tJHt0eXBlfWA7XG4gIG5vdGlmaWNhdGlvbi50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG5cbiAgLy8gQWRkIHN0eWxlc1xuICBPYmplY3QuYXNzaWduKG5vdGlmaWNhdGlvbi5zdHlsZSwge1xuICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXG4gICAgdG9wOiBcIjIwcHhcIixcbiAgICByaWdodDogXCIyMHB4XCIsXG4gICAgcGFkZGluZzogXCIxNXB4IDIwcHhcIixcbiAgICBib3JkZXJSYWRpdXM6IFwiOHB4XCIsXG4gICAgY29sb3I6IFwid2hpdGVcIixcbiAgICBmb250V2VpZ2h0OiBcIjUwMFwiLFxuICAgIHpJbmRleDogXCIxMDAwMFwiLFxuICAgIG1heFdpZHRoOiBcIjQwMHB4XCIsXG4gICAgYm94U2hhZG93OiBcIjAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAwLjE1KVwiLFxuICAgIGJhY2tncm91bmRDb2xvcjpcbiAgICAgIHR5cGUgPT09IFwic3VjY2Vzc1wiXG4gICAgICAgID8gXCIjMTBiOTgxXCJcbiAgICAgICAgOiB0eXBlID09PSBcImVycm9yXCJcbiAgICAgICAgPyBcIiNlZjQ0NDRcIlxuICAgICAgICA6IHR5cGUgPT09IFwid2FybmluZ1wiXG4gICAgICAgID8gXCIjZjU5ZTBiXCJcbiAgICAgICAgOiBcIiMzYjgyZjZcIixcbiAgfSk7XG5cbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub3RpZmljYXRpb24pO1xuXG4gIC8vIEF1dG8gcmVtb3ZlIGFmdGVyIDUgc2Vjb25kc1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBpZiAobm90aWZpY2F0aW9uLnBhcmVudE5vZGUpIHtcbiAgICAgIG5vdGlmaWNhdGlvbi5yZW1vdmUoKTtcbiAgICB9XG4gIH0sIDUwMDApO1xuXG4gIHJldHVybiBub3RpZmljYXRpb247XG59XG5cbi8vIEluaXRpYWxpemUgZG9uYXRpb24gc3lzdGVtXG5leHBvcnQgZnVuY3Rpb24gaW5pdERvbmF0aW9uU3lzdGVtKCkge1xuICB0cnkge1xuICAgIGNvbnN0IHN5c3RlbVNldHVwID0gc2V0dXBEb25hdGlvblN5c3RlbSgpO1xuICAgIGlmICghc3lzdGVtU2V0dXApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBzZXR1cCBkb25hdGlvbiBzeXN0ZW1cIik7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJEb25hdGlvbiBzeXN0ZW0gaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgIHNob3dOb3RpZmljYXRpb24oXCJTdHJpcGUgaW5pdGlhbGlzw6lcIiwgXCJzdWNjZXNzXCIpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbml0aWFsaXppbmcgZG9uYXRpb24gc3lzdGVtOlwiLCBlcnJvcik7XG4gICAgc2hvd05vdGlmaWNhdGlvbihcIkVycmV1ciBkJ2luaXRpYWxpc2F0aW9uIGR1IHN5c3TDqG1lIGRlIHBhaWVtZW50XCIsIFwiZXJyb3JcIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCIvLyBzcmMvanMvZW50cmllcy9kb25hdGlvbi5qcyAtIERvbmF0aW9uIHBhZ2UgZW50cnkgcG9pbnRcbmltcG9ydCB7IGluaXRIZWFkZXJBdXRoIH0gZnJvbSBcIi4uL2F1dGgvaGVhZGVyLWF1dGguanNcIjtcbmltcG9ydCB7IGluaXREb25hdGlvblN5c3RlbSB9IGZyb20gXCIuLi9tb2R1bGVzL2RvbmF0aW9uLXN5c3RlbS5qc1wiO1xuXG4vLyBJbml0aWFsaXplIGhlYWRlciBhdXRoZW50aWNhdGlvbiBhbmQgZG9uYXRpb24gc3lzdGVtIHdoZW4gRE9NIGlzIGxvYWRlZFxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICB0cnkge1xuICAgIC8vIEluaXRpYWxpemUgaGVhZGVyIGF1dGhlbnRpY2F0aW9uXG4gICAgaW5pdEhlYWRlckF1dGgoKTtcblxuICAgIC8vIEluaXRpYWxpemUgZG9uYXRpb24gc3lzdGVtIChubyBsb25nZXIgYXN5bmMpXG4gICAgY29uc3QgZG9uYXRpb25TeXN0ZW1Jbml0aWFsaXplZCA9IGluaXREb25hdGlvblN5c3RlbSgpO1xuXG4gICAgaWYgKGRvbmF0aW9uU3lzdGVtSW5pdGlhbGl6ZWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRG9uYXRpb24gcGFnZSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBkb25hdGlvbiBzeXN0ZW1cIik7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbml0aWFsaXppbmcgZG9uYXRpb24gcGFnZTpcIiwgZXJyb3IpO1xuICB9XG59KTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5mID0ge307XG4vLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4vLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3Ncbl9fd2VicGFja19yZXF1aXJlX18uZSA9IChjaHVua0lkKSA9PiB7XG5cdHJldHVybiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLmYpLnJlZHVjZSgocHJvbWlzZXMsIGtleSkgPT4ge1xuXHRcdF9fd2VicGFja19yZXF1aXJlX18uZltrZXldKGNodW5rSWQsIHByb21pc2VzKTtcblx0XHRyZXR1cm4gcHJvbWlzZXM7XG5cdH0sIFtdKSk7XG59OyIsIi8vIFRoaXMgZnVuY3Rpb24gYWxsb3cgdG8gcmVmZXJlbmNlIGFzeW5jIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy51ID0gKGNodW5rSWQpID0+IHtcblx0Ly8gcmV0dXJuIHVybCBmb3IgZmlsZW5hbWVzIGJhc2VkIG9uIHRlbXBsYXRlXG5cdHJldHVybiBcImpzL1wiICsgY2h1bmtJZCArIFwiLmNodW5rLmpzXCI7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uaiA9IDM1NzsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MzU3OiAwXG59O1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmYuaiA9IChjaHVua0lkLCBwcm9taXNlcykgPT4ge1xuXHRcdC8vIEpTT05QIGNodW5rIGxvYWRpbmcgZm9yIGphdmFzY3JpcHRcblx0XHR2YXIgaW5zdGFsbGVkQ2h1bmtEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgPyBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gOiB1bmRlZmluZWQ7XG5cdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhICE9PSAwKSB7IC8vIDAgbWVhbnMgXCJhbHJlYWR5IGluc3RhbGxlZFwiLlxuXG5cdFx0XHQvLyBhIFByb21pc2UgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiLlxuXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhKSB7XG5cdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmKHRydWUpIHsgLy8gYWxsIGNodW5rcyBoYXZlIEpTXG5cdFx0XHRcdFx0Ly8gc2V0dXAgUHJvbWlzZSBpbiBjaHVuayBjYWNoZVxuXHRcdFx0XHRcdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gKGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IFtyZXNvbHZlLCByZWplY3RdKSk7XG5cdFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0gPSBwcm9taXNlKTtcblxuXHRcdFx0XHRcdC8vIHN0YXJ0IGNodW5rIGxvYWRpbmdcblx0XHRcdFx0XHR2YXIgdXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgX193ZWJwYWNrX3JlcXVpcmVfXy51KGNodW5rSWQpO1xuXHRcdFx0XHRcdC8vIGNyZWF0ZSBlcnJvciBiZWZvcmUgc3RhY2sgdW53b3VuZCB0byBnZXQgdXNlZnVsIHN0YWNrdHJhY2UgbGF0ZXJcblx0XHRcdFx0XHR2YXIgZXJyb3IgPSBuZXcgRXJyb3IoKTtcblx0XHRcdFx0XHR2YXIgbG9hZGluZ0VuZGVkID0gKGV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSkge1xuXHRcdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XG5cdFx0XHRcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSAhPT0gMCkgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgZXJyb3JUeXBlID0gZXZlbnQgJiYgKGV2ZW50LnR5cGUgPT09ICdsb2FkJyA/ICdtaXNzaW5nJyA6IGV2ZW50LnR5cGUpO1xuXHRcdFx0XHRcdFx0XHRcdHZhciByZWFsU3JjID0gZXZlbnQgJiYgZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5zcmM7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IubWVzc2FnZSA9ICdMb2FkaW5nIGNodW5rICcgKyBjaHVua0lkICsgJyBmYWlsZWQuXFxuKCcgKyBlcnJvclR5cGUgKyAnOiAnICsgcmVhbFNyYyArICcpJztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5uYW1lID0gJ0NodW5rTG9hZEVycm9yJztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci50eXBlID0gZXJyb3JUeXBlO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLnJlcXVlc3QgPSByZWFsU3JjO1xuXHRcdFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rRGF0YVsxXShlcnJvcik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubCh1cmwsIGxvYWRpbmdFbmRlZCwgXCJjaHVuay1cIiArIGNodW5rSWQsIGNodW5rSWQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxufTtcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5PLmogPSAoY2h1bmtJZCkgPT4gKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMCk7XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZSgoaWQpID0+IChpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwKSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rdXJiYW5kb2NzX3dlYmFwcFwiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt1cmJhbmRvY3Nfd2ViYXBwXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbNzZdLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXyg5MDgwKSkpXG5fX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuIl0sIm5hbWVzIjpbImRlZmVycmVkIiwibGVhZlByb3RvdHlwZXMiLCJnZXRQcm90byIsImluUHJvZ3Jlc3MiLCJkYXRhV2VicGFja1ByZWZpeCIsIkRPTkFUSU9OX0xJTktTIiwidXBkYXRlRG9uYXRlQnV0dG9uIiwiYW1vdW50IiwiZG9uYXRlQnRuIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImRpc2FibGVkIiwiaW5uZXJIVE1MIiwic2hvd05vdGlmaWNhdGlvbiIsIm1lc3NhZ2UiLCJ0eXBlIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJub3RpZiIsInJlbW92ZSIsIm5vdGlmaWNhdGlvbiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJ0ZXh0Q29udGVudCIsIk9iamVjdCIsImFzc2lnbiIsInN0eWxlIiwicG9zaXRpb24iLCJ0b3AiLCJyaWdodCIsInBhZGRpbmciLCJib3JkZXJSYWRpdXMiLCJjb2xvciIsImZvbnRXZWlnaHQiLCJ6SW5kZXgiLCJtYXhXaWR0aCIsImJveFNoYWRvdyIsImJhY2tncm91bmRDb2xvciIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInNldFRpbWVvdXQiLCJwYXJlbnROb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFtb3VudEJ0bnMiLCJjdXN0b21BbW91bnRJbnB1dCIsImxlbmd0aCIsImNvbnNvbGUiLCJlcnJvciIsInNlbGVjdGVkQW1vdW50IiwiYnRuIiwiYiIsImNsYXNzTGlzdCIsImFkZCIsInBhcnNlSW50IiwiZGF0YXNldCIsInZhbHVlIiwiZSIsImN1c3RvbUFtb3VudCIsInRhcmdldCIsImRlZmF1bHRCdG4iLCJxdWVyeVNlbGVjdG9yIiwib3JpZ2luYWxIVE1MIiwic3RyaXBlV2luZG93Iiwid2luZG93Iiwib3BlbiIsImZvY3VzIiwicHJvY2Vzc0RvbmF0aW9uIiwibG9nIiwic2V0dXBEb25hdGlvblN5c3RlbSIsIkVycm9yIiwiaW5pdERvbmF0aW9uU3lzdGVtIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwibSIsIk8iLCJyZXN1bHQiLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJmdWxmaWxsZWQiLCJqIiwia2V5cyIsImV2ZXJ5Iiwia2V5Iiwic3BsaWNlIiwiciIsImdldFByb3RvdHlwZU9mIiwib2JqIiwidCIsIm1vZGUiLCJ0aGlzIiwiX19lc01vZHVsZSIsInRoZW4iLCJucyIsImNyZWF0ZSIsImRlZiIsImN1cnJlbnQiLCJpbmRleE9mIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImQiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImYiLCJjaHVua0lkIiwiUHJvbWlzZSIsImFsbCIsInJlZHVjZSIsInByb21pc2VzIiwidSIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJsIiwidXJsIiwiZG9uZSIsInB1c2giLCJzY3JpcHQiLCJuZWVkQXR0YWNoIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicyIsImdldEF0dHJpYnV0ZSIsImNoYXJzZXQiLCJ0aW1lb3V0IiwibmMiLCJzZXRBdHRyaWJ1dGUiLCJzcmMiLCJvblNjcmlwdENvbXBsZXRlIiwicHJldiIsImV2ZW50Iiwib25lcnJvciIsIm9ubG9hZCIsImNsZWFyVGltZW91dCIsImRvbmVGbnMiLCJyZW1vdmVDaGlsZCIsImJpbmQiLCJoZWFkIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJwIiwiaW5zdGFsbGVkQ2h1bmtzIiwiaW5zdGFsbGVkQ2h1bmtEYXRhIiwicHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJlcnJvclR5cGUiLCJyZWFsU3JjIiwibmFtZSIsInJlcXVlc3QiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwiZGF0YSIsIm1vcmVNb2R1bGVzIiwicnVudGltZSIsInNvbWUiLCJpZCIsImNodW5rTG9hZGluZ0dsb2JhbCIsInNlbGYiLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==