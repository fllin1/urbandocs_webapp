(()=>{"use strict";var e,t,o,r,n,i={9080:(e,t,o)=>{var r=o(9251);const n={5:"https://buy.stripe.com/fZu6oJ2R9fAp6GN0ms9Zm07",10:"https://buy.stripe.com/4gM28t4Zhcod5CJ2uA9Zm06",15:"https://buy.stripe.com/8x2fZj0J14VLe9fc5a9Zm03",20:"https://buy.stripe.com/bJe9AV77pcod6GN3yE9Zm05",30:"https://buy.stripe.com/7sY9AV9fx9c10ip1qw9Zm02",50:"https://buy.stripe.com/6oU7sN0J1fAp7KR0ms9Zm04",100:"https://buy.stripe.com/aFa7sN77p0Fv7KR2uA9Zm01"};function i(e){const t=document.getElementById("donateBtn");t&&e>0?(t.disabled=!1,t.innerHTML=`Faire un don de&nbsp;<span id="selectedAmount">${e}</span>€`):t&&(t.disabled=!0,t.innerHTML='Faire un don de&nbsp;<span id="selectedAmount">0</span>€')}function s(e,t="info"){document.querySelectorAll(".notification").forEach((e=>e.remove()));const o=document.createElement("div");return o.className=`notification notification-${t}`,o.textContent=e,Object.assign(o.style,{position:"fixed",top:"20px",right:"20px",padding:"15px 20px",borderRadius:"8px",color:"white",fontWeight:"500",zIndex:"10000",maxWidth:"400px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",backgroundColor:"success"===t?"#10b981":"error"===t?"#ef4444":"warning"===t?"#f59e0b":"#3b82f6"}),document.body.appendChild(o),setTimeout((()=>{o.parentNode&&o.remove()}),5e3),o}document.addEventListener("DOMContentLoaded",(()=>{try{(0,r.Mt)(),!function(){try{if(!function(){const e=document.querySelectorAll(".amount-btn"),t=document.getElementById("customAmount"),o=document.getElementById("donateBtn");if(!e.length||!t||!o)return console.error("Required donation form elements not found"),!1;let r=5;return i(r),e.forEach((o=>{o.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("selected"))),o.classList.add("selected"),r=parseInt(o.dataset.amount),i(r),t.value=""}))})),t.addEventListener("input",(t=>{const o=parseInt(t.target.value);if(o&&o>0)e.forEach((e=>e.classList.remove("selected"))),r=o,i(r);else if(!t.target.value){const e=document.querySelector('.amount-btn[data-amount="5"]');e&&(e.classList.add("selected"),r=5,i(r))}})),o.addEventListener("click",(()=>{r>0&&function(e){const t=document.getElementById("donateBtn"),o=t.innerHTML;t.disabled=!0,t.innerHTML="Ouverture du paiement...";try{if(n[e]){const r=window.open(n[e],"stripe-checkout","width=600,height=600,scrollbars=yes,resizable=yes");return setTimeout((()=>{t.disabled=!1,t.innerHTML=o}),1e3),void(r&&r.focus())}const r=window.open("https://buy.stripe.com/6oUfZj77pgEtfdjb169Zm00","stripe-checkout","width=600,height=600,scrollbars=yes,resizable=yes");setTimeout((()=>{t.disabled=!1,t.innerHTML=o}),1e3),r&&r.focus(),s(`Vous pourrez ajuster le montant (${e}€) sur la page de paiement Stripe.`,"info")}catch(e){console.error("Error processing donation:",e),s("Erreur lors du traitement du don.","error"),t.disabled=!1,t.innerHTML=o}}(r)})),console.log("Donation system setup complete"),!0}())throw new Error("Failed to setup donation system");return console.log("Donation system initialized successfully"),s("Stripe initialisé","success"),!0}catch(e){return console.error("Error initializing donation system:",e),s("Erreur d'initialisation du système de paiement","error"),!1}}()?console.error("Failed to initialize donation system"):console.log("Donation page initialized successfully")}catch(e){console.error("Error initializing donation page:",e)}}))}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var o=s[e]={exports:{}};return i[e].call(o.exports,o,o.exports,a),o.exports}a.m=i,e=[],a.O=(t,o,r,n)=>{if(!o){var i=1/0;for(u=0;u<e.length;u++){for(var[o,r,n]=e[u],s=!0,c=0;c<o.length;c++)(!1&n||i>=n)&&Object.keys(a.O).every((e=>a.O[e](o[c])))?o.splice(c--,1):(s=!1,n<i&&(i=n));if(s){e.splice(u--,1);var d=r();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,r,n]},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);a.r(n);var i={};t=t||[null,o({}),o([]),o(o)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=o(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,a.d(n,i),n},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,o)=>(a.f[o](e,t),t)),[])),a.u=e=>"js/"+e+".chunk.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},n="urbandocs_webapp:",a.l=(e,t,o,i)=>{if(r[e])r[e].push(t);else{var s,c;if(void 0!==o)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var l=d[u];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==n+o){s=l;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",n+o),s.src=e),r[e]=[t];var p=(t,o)=>{s.onerror=s.onload=null,clearTimeout(f);var n=r[e];if(delete r[e],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((e=>e(o))),t)return t(o)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=357,a.p="/",(()=>{var e={357:0};a.f.j=(t,o)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var n=new Promise(((o,n)=>r=e[t]=[o,n]));o.push(r[2]=n);var i=a.p+a.u(t),s=new Error;a.l(i,(o=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var n=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",s.name="ChunkLoadError",s.type=n,s.request=i,r[1](s)}}),"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,o)=>{var r,n,[i,s,c]=o,d=0;if(i.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var u=c(a)}for(t&&t(o);d<i.length;d++)n=i[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},o=self.webpackChunkurbandocs_webapp=self.webpackChunkurbandocs_webapp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var c=a.O(void 0,[76],(()=>a(9080)));c=a.O(c)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0NsRnZGLElBQUlFLEVBQXNCdEcsRUFBb0JTLE9BQUVOLEVBQVcsQ0FBQyxLQUFLLElBQU9ILEVBQW9CLFFBQzVGc0csRUFBc0J0RyxFQUFvQlMsRUFBRTZGLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvY3JlYXRlIGZha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9sb2FkIHNjcmlwdCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwLy4vc3JjL2pzL21vZHVsZXMvZG9uYXRpb24tc3lzdGVtLmpzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvLi9zcmMvanMvZW50cmllcy9kb25hdGlvbi5qcyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2Vuc3VyZSBjaHVuayIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9ydW50aW1lSWQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkgPT4ge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldID0gZGVmZXJyZWRbaV07XG5cdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjaHVua0lkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKChwcmlvcml0eSAmIDEgPT09IDAgfHwgbm90RnVsZmlsbGVkID49IHByaW9yaXR5KSAmJiBPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLk8pLmV2ZXJ5KChrZXkpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSkpKSkge1xuXHRcdFx0XHRjaHVua0lkcy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihwcmlvcml0eSA8IG5vdEZ1bGZpbGxlZCkgbm90RnVsZmlsbGVkID0gcHJpb3JpdHk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWQuc3BsaWNlKGktLSwgMSlcblx0XHRcdHZhciByID0gZm4oKTtcblx0XHRcdGlmIChyICE9PSB1bmRlZmluZWQpIHJlc3VsdCA9IHI7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59OyIsInZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiA/IChvYmopID0+IChPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSkgOiAob2JqKSA9PiAob2JqLl9fcHJvdG9fXyk7XG52YXIgbGVhZlByb3RvdHlwZXM7XG4vLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3Rcbi8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuLy8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4vLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3Rcbi8vIG1vZGUgJiAxNjogcmV0dXJuIHZhbHVlIHdoZW4gaXQncyBQcm9taXNlLWxpa2Vcbi8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbl9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG5cdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IHRoaXModmFsdWUpO1xuXHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuXHRpZih0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlKSB7XG5cdFx0aWYoKG1vZGUgJiA0KSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG5cdFx0aWYoKG1vZGUgJiAxNikgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbicpIHJldHVybiB2YWx1ZTtcblx0fVxuXHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuXHR2YXIgZGVmID0ge307XG5cdGxlYWZQcm90b3R5cGVzID0gbGVhZlByb3RvdHlwZXMgfHwgW251bGwsIGdldFByb3RvKHt9KSwgZ2V0UHJvdG8oW10pLCBnZXRQcm90byhnZXRQcm90byldO1xuXHRmb3IodmFyIGN1cnJlbnQgPSBtb2RlICYgMiAmJiB2YWx1ZTsgdHlwZW9mIGN1cnJlbnQgPT0gJ29iamVjdCcgJiYgIX5sZWFmUHJvdG90eXBlcy5pbmRleE9mKGN1cnJlbnQpOyBjdXJyZW50ID0gZ2V0UHJvdG8oY3VycmVudCkpIHtcblx0XHRPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjdXJyZW50KS5mb3JFYWNoKChrZXkpID0+IChkZWZba2V5XSA9ICgpID0+ICh2YWx1ZVtrZXldKSkpO1xuXHR9XG5cdGRlZlsnZGVmYXVsdCddID0gKCkgPT4gKHZhbHVlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBkZWYpO1xuXHRyZXR1cm4gbnM7XG59OyIsInZhciBpblByb2dyZXNzID0ge307XG52YXIgZGF0YVdlYnBhY2tQcmVmaXggPSBcInVyYmFuZG9jc193ZWJhcHA6XCI7XG4vLyBsb2FkU2NyaXB0IGZ1bmN0aW9uIHRvIGxvYWQgYSBzY3JpcHQgdmlhIHNjcmlwdCB0YWdcbl9fd2VicGFja19yZXF1aXJlX18ubCA9ICh1cmwsIGRvbmUsIGtleSwgY2h1bmtJZCkgPT4ge1xuXHRpZihpblByb2dyZXNzW3VybF0pIHsgaW5Qcm9ncmVzc1t1cmxdLnB1c2goZG9uZSk7IHJldHVybjsgfVxuXHR2YXIgc2NyaXB0LCBuZWVkQXR0YWNoO1xuXHRpZihrZXkgIT09IHVuZGVmaW5lZCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHNjcmlwdHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBzID0gc2NyaXB0c1tpXTtcblx0XHRcdGlmKHMuZ2V0QXR0cmlidXRlKFwic3JjXCIpID09IHVybCB8fCBzLmdldEF0dHJpYnV0ZShcImRhdGEtd2VicGFja1wiKSA9PSBkYXRhV2VicGFja1ByZWZpeCArIGtleSkgeyBzY3JpcHQgPSBzOyBicmVhazsgfVxuXHRcdH1cblx0fVxuXHRpZighc2NyaXB0KSB7XG5cdFx0bmVlZEF0dGFjaCA9IHRydWU7XG5cdFx0c2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cblx0XHRzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XG5cdFx0c2NyaXB0LnRpbWVvdXQgPSAxMjA7XG5cdFx0aWYgKF9fd2VicGFja19yZXF1aXJlX18ubmMpIHtcblx0XHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKTtcblx0XHR9XG5cdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcImRhdGEtd2VicGFja1wiLCBkYXRhV2VicGFja1ByZWZpeCArIGtleSk7XG5cblx0XHRzY3JpcHQuc3JjID0gdXJsO1xuXHR9XG5cdGluUHJvZ3Jlc3NbdXJsXSA9IFtkb25lXTtcblx0dmFyIG9uU2NyaXB0Q29tcGxldGUgPSAocHJldiwgZXZlbnQpID0+IHtcblx0XHQvLyBhdm9pZCBtZW0gbGVha3MgaW4gSUUuXG5cdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcblx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0dmFyIGRvbmVGbnMgPSBpblByb2dyZXNzW3VybF07XG5cdFx0ZGVsZXRlIGluUHJvZ3Jlc3NbdXJsXTtcblx0XHRzY3JpcHQucGFyZW50Tm9kZSAmJiBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHRcdGRvbmVGbnMgJiYgZG9uZUZucy5mb3JFYWNoKChmbikgPT4gKGZuKGV2ZW50KSkpO1xuXHRcdGlmKHByZXYpIHJldHVybiBwcmV2KGV2ZW50KTtcblx0fVxuXHR2YXIgdGltZW91dCA9IHNldFRpbWVvdXQob25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHVuZGVmaW5lZCwgeyB0eXBlOiAndGltZW91dCcsIHRhcmdldDogc2NyaXB0IH0pLCAxMjAwMDApO1xuXHRzY3JpcHQub25lcnJvciA9IG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCBzY3JpcHQub25lcnJvcik7XG5cdHNjcmlwdC5vbmxvYWQgPSBvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgc2NyaXB0Lm9ubG9hZCk7XG5cdG5lZWRBdHRhY2ggJiYgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xufTsiLCIvLyBzcmMvanMvbW9kdWxlcy9kb25hdGlvbi1zeXN0ZW0uanMgLSBTaW1wbGlmaWVkIGRvbmF0aW9uIHN5c3RlbSB1c2luZyBTdHJpcGUgcGF5bWVudCBsaW5rc1xyXG5cclxuLy8gU3RyaXBlIHBheW1lbnQgbGlua3MgZm9yIGRpZmZlcmVudCBkb25hdGlvbiBhbW91bnRzXHJcbmNvbnN0IERPTkFUSU9OX0xJTktTID0ge1xyXG4gIDU6IFwiaHR0cHM6Ly9idXkuc3RyaXBlLmNvbS9mWnU2b0oyUjlmQXA2R04wbXM5Wm0wN1wiLFxyXG4gIDEwOiBcImh0dHBzOi8vYnV5LnN0cmlwZS5jb20vNGdNMjh0NFpoY29kNUNKMnVBOVptMDZcIixcclxuICAxNTogXCJodHRwczovL2J1eS5zdHJpcGUuY29tLzh4MmZaajBKMTRWTGU5ZmM1YTlabTAzXCIsXHJcbiAgMjA6IFwiaHR0cHM6Ly9idXkuc3RyaXBlLmNvbS9iSmU5QVY3N3Bjb2Q2R04zeUU5Wm0wNVwiLFxyXG4gIDMwOiBcImh0dHBzOi8vYnV5LnN0cmlwZS5jb20vN3NZOUFWOWZ4OWMxMGlwMXF3OVptMDJcIixcclxuICA1MDogXCJodHRwczovL2J1eS5zdHJpcGUuY29tLzZvVTdzTjBKMWZBcDdLUjBtczlabTA0XCIsXHJcbiAgMTAwOiBcImh0dHBzOi8vYnV5LnN0cmlwZS5jb20vYUZhN3NONzdwMEZ2N0tSMnVBOVptMDFcIixcclxufTtcclxuXHJcbi8vIEN1c3RvbSBhbW91bnQgcGF5bWVudCBsaW5rIChwYXktd2hhdC15b3Utd2FudClcclxuY29uc3QgQ1VTVE9NX0FNT1VOVF9MSU5LID0gXCJodHRwczovL2J1eS5zdHJpcGUuY29tLzZvVWZaajc3cGdFdGZkamIxNjlabTAwXCI7XHJcblxyXG4vLyBIYW5kbGUgZG9uYXRpb24gYW1vdW50IHNlbGVjdGlvbiBhbmQgcmVkaXJlY3QgdG8gU3RyaXBlXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXR1cERvbmF0aW9uU3lzdGVtKCkge1xyXG4gIGNvbnN0IGFtb3VudEJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFtb3VudC1idG5cIik7XHJcbiAgY29uc3QgY3VzdG9tQW1vdW50SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImN1c3RvbUFtb3VudFwiKTtcclxuICBjb25zdCBkb25hdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRvbmF0ZUJ0blwiKTtcclxuXHJcbiAgaWYgKCFhbW91bnRCdG5zLmxlbmd0aCB8fCAhY3VzdG9tQW1vdW50SW5wdXQgfHwgIWRvbmF0ZUJ0bikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIlJlcXVpcmVkIGRvbmF0aW9uIGZvcm0gZWxlbWVudHMgbm90IGZvdW5kXCIpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgbGV0IHNlbGVjdGVkQW1vdW50ID0gNTsgLy8gRGVmYXVsdCBhbW91bnRcclxuXHJcbiAgLy8gSW5pdGlhbGl6ZSB0aGUgYnV0dG9uIHdpdGggZGVmYXVsdCBhbW91bnRcclxuICB1cGRhdGVEb25hdGVCdXR0b24oc2VsZWN0ZWRBbW91bnQpO1xyXG5cclxuICAvLyBIYW5kbGUgcHJlc2V0IGFtb3VudCBidXR0b25zXHJcbiAgYW1vdW50QnRucy5mb3JFYWNoKChidG4pID0+IHtcclxuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAvLyBSZW1vdmUgc2VsZWN0ZWQgY2xhc3MgZnJvbSBhbGwgYnV0dG9uc1xyXG4gICAgICBhbW91bnRCdG5zLmZvckVhY2goKGIpID0+IGIuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpKTtcclxuXHJcbiAgICAgIC8vIEFkZCBzZWxlY3RlZCBjbGFzcyB0byBjbGlja2VkIGJ1dHRvblxyXG4gICAgICBidG4uY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHNlbGVjdGVkIGFtb3VudFxyXG4gICAgICBzZWxlY3RlZEFtb3VudCA9IHBhcnNlSW50KGJ0bi5kYXRhc2V0LmFtb3VudCk7XHJcbiAgICAgIHVwZGF0ZURvbmF0ZUJ1dHRvbihzZWxlY3RlZEFtb3VudCk7XHJcblxyXG4gICAgICAvLyBDbGVhciBjdXN0b20gYW1vdW50IGlucHV0XHJcbiAgICAgIGN1c3RvbUFtb3VudElucHV0LnZhbHVlID0gXCJcIjtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAvLyBIYW5kbGUgY3VzdG9tIGFtb3VudCBpbnB1dFxyXG4gIGN1c3RvbUFtb3VudElucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgY29uc3QgY3VzdG9tQW1vdW50ID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpO1xyXG5cclxuICAgIGlmIChjdXN0b21BbW91bnQgJiYgY3VzdG9tQW1vdW50ID4gMCkge1xyXG4gICAgICAvLyBSZW1vdmUgc2VsZWN0ZWQgY2xhc3MgZnJvbSBhbGwgcHJlc2V0IGJ1dHRvbnNcclxuICAgICAgYW1vdW50QnRucy5mb3JFYWNoKChidG4pID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIikpO1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHNlbGVjdGVkIGFtb3VudFxyXG4gICAgICBzZWxlY3RlZEFtb3VudCA9IGN1c3RvbUFtb3VudDtcclxuICAgICAgdXBkYXRlRG9uYXRlQnV0dG9uKHNlbGVjdGVkQW1vdW50KTtcclxuICAgIH0gZWxzZSBpZiAoIWUudGFyZ2V0LnZhbHVlKSB7XHJcbiAgICAgIC8vIElmIGN1c3RvbSBpbnB1dCBpcyBlbXB0eSwgc2VsZWN0IGRlZmF1bHQgYW1vdW50XHJcbiAgICAgIGNvbnN0IGRlZmF1bHRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYW1vdW50LWJ0bltkYXRhLWFtb3VudD1cIjVcIl0nKTtcclxuICAgICAgaWYgKGRlZmF1bHRCdG4pIHtcclxuICAgICAgICBkZWZhdWx0QnRuLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICBzZWxlY3RlZEFtb3VudCA9IDU7XHJcbiAgICAgICAgdXBkYXRlRG9uYXRlQnV0dG9uKHNlbGVjdGVkQW1vdW50KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyBIYW5kbGUgZG9uYXRlIGJ1dHRvbiBjbGlja1xyXG4gIGRvbmF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgaWYgKHNlbGVjdGVkQW1vdW50ID4gMCkge1xyXG4gICAgICBwcm9jZXNzRG9uYXRpb24oc2VsZWN0ZWRBbW91bnQpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBjb25zb2xlLmxvZyhcIkRvbmF0aW9uIHN5c3RlbSBzZXR1cCBjb21wbGV0ZVwiKTtcclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLy8gVXBkYXRlIGRvbmF0ZSBidXR0b24gc3RhdGUgYW5kIHRleHRcclxuZnVuY3Rpb24gdXBkYXRlRG9uYXRlQnV0dG9uKGFtb3VudCkge1xyXG4gIGNvbnN0IGRvbmF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZG9uYXRlQnRuXCIpO1xyXG5cclxuICBpZiAoZG9uYXRlQnRuICYmIGFtb3VudCA+IDApIHtcclxuICAgIGRvbmF0ZUJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgZG9uYXRlQnRuLmlubmVySFRNTCA9IGBGYWlyZSB1biBkb24gZGUmbmJzcDs8c3BhbiBpZD1cInNlbGVjdGVkQW1vdW50XCI+JHthbW91bnR9PC9zcGFuPuKCrGA7XHJcbiAgfSBlbHNlIGlmIChkb25hdGVCdG4pIHtcclxuICAgIGRvbmF0ZUJ0bi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICBkb25hdGVCdG4uaW5uZXJIVE1MID0gYEZhaXJlIHVuIGRvbiBkZSZuYnNwOzxzcGFuIGlkPVwic2VsZWN0ZWRBbW91bnRcIj4wPC9zcGFuPuKCrGA7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBQcm9jZXNzIGRvbmF0aW9uIGJ5IG9wZW5pbmcgU3RyaXBlIGNoZWNrb3V0IGluIG5ldyB3aW5kb3dcclxuZnVuY3Rpb24gcHJvY2Vzc0RvbmF0aW9uKGFtb3VudCkge1xyXG4gIGNvbnN0IGRvbmF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZG9uYXRlQnRuXCIpO1xyXG4gIGNvbnN0IG9yaWdpbmFsSFRNTCA9IGRvbmF0ZUJ0bi5pbm5lckhUTUw7XHJcblxyXG4gIC8vIFNob3cgbG9hZGluZyBzdGF0ZVxyXG4gIGRvbmF0ZUJ0bi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgZG9uYXRlQnRuLmlubmVySFRNTCA9IFwiT3V2ZXJ0dXJlIGR1IHBhaWVtZW50Li4uXCI7XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBVc2UgcHJlLWJ1aWx0IHBheW1lbnQgbGluayBmb3Igc3RhbmRhcmQgYW1vdW50c1xyXG4gICAgaWYgKERPTkFUSU9OX0xJTktTW2Ftb3VudF0pIHtcclxuICAgICAgLy8gT3BlbiBTdHJpcGUgY2hlY2tvdXQgaW4gbmV3IHdpbmRvdy90YWJcclxuICAgICAgY29uc3Qgc3RyaXBlV2luZG93ID0gd2luZG93Lm9wZW4oXHJcbiAgICAgICAgRE9OQVRJT05fTElOS1NbYW1vdW50XSxcclxuICAgICAgICBcInN0cmlwZS1jaGVja291dFwiLFxyXG4gICAgICAgIFwid2lkdGg9NjAwLGhlaWdodD02MDAsc2Nyb2xsYmFycz15ZXMscmVzaXphYmxlPXllc1wiXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyBSZXN0b3JlIGJ1dHRvbiBzdGF0ZSBhZnRlciBvcGVuaW5nXHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGRvbmF0ZUJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIGRvbmF0ZUJ0bi5pbm5lckhUTUwgPSBvcmlnaW5hbEhUTUw7XHJcbiAgICAgIH0sIDEwMDApO1xyXG5cclxuICAgICAgLy8gT3B0aW9uYWw6IEZvY3VzIHRoZSBuZXcgd2luZG93XHJcbiAgICAgIGlmIChzdHJpcGVXaW5kb3cpIHtcclxuICAgICAgICBzdHJpcGVXaW5kb3cuZm9jdXMoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvciBjdXN0b20gYW1vdW50cywgdXNlIHRoZSBwYXktd2hhdC15b3Utd2FudCBwYXltZW50IGxpbmtcclxuICAgIC8vIFRoZSB1c2VyIHdpbGwgYmUgYWJsZSB0byBhZGp1c3QgdGhlIGFtb3VudCBvbiB0aGUgU3RyaXBlIHBhZ2VcclxuICAgIGNvbnN0IHN0cmlwZVdpbmRvdyA9IHdpbmRvdy5vcGVuKFxyXG4gICAgICBDVVNUT01fQU1PVU5UX0xJTkssXHJcbiAgICAgIFwic3RyaXBlLWNoZWNrb3V0XCIsXHJcbiAgICAgIFwid2lkdGg9NjAwLGhlaWdodD02MDAsc2Nyb2xsYmFycz15ZXMscmVzaXphYmxlPXllc1wiXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFJlc3RvcmUgYnV0dG9uIHN0YXRlIGFmdGVyIG9wZW5pbmdcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBkb25hdGVCdG4uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgZG9uYXRlQnRuLmlubmVySFRNTCA9IG9yaWdpbmFsSFRNTDtcclxuICAgIH0sIDEwMDApO1xyXG5cclxuICAgIC8vIE9wdGlvbmFsOiBGb2N1cyB0aGUgbmV3IHdpbmRvd1xyXG4gICAgaWYgKHN0cmlwZVdpbmRvdykge1xyXG4gICAgICBzdHJpcGVXaW5kb3cuZm9jdXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTaG93IGhlbHBmdWwgbWVzc2FnZSBmb3IgY3VzdG9tIGFtb3VudHNcclxuICAgIHNob3dOb3RpZmljYXRpb24oXHJcbiAgICAgIGBWb3VzIHBvdXJyZXogYWp1c3RlciBsZSBtb250YW50ICgke2Ftb3VudH3igqwpIHN1ciBsYSBwYWdlIGRlIHBhaWVtZW50IFN0cmlwZS5gLFxyXG4gICAgICBcImluZm9cIlxyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHByb2Nlc3NpbmcgZG9uYXRpb246XCIsIGVycm9yKTtcclxuICAgIHNob3dOb3RpZmljYXRpb24oXCJFcnJldXIgbG9ycyBkdSB0cmFpdGVtZW50IGR1IGRvbi5cIiwgXCJlcnJvclwiKTtcclxuXHJcbiAgICAvLyBSZXN0b3JlIGJ1dHRvbiBzdGF0ZVxyXG4gICAgZG9uYXRlQnRuLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICBkb25hdGVCdG4uaW5uZXJIVE1MID0gb3JpZ2luYWxIVE1MO1xyXG4gIH1cclxufVxyXG5cclxuLy8gU2ltcGxlIG5vdGlmaWNhdGlvbiBzeXN0ZW1cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dOb3RpZmljYXRpb24obWVzc2FnZSwgdHlwZSA9IFwiaW5mb1wiKSB7XHJcbiAgLy8gUmVtb3ZlIGV4aXN0aW5nIG5vdGlmaWNhdGlvbnNcclxuICBjb25zdCBleGlzdGluZ05vdGlmaWNhdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5vdGlmaWNhdGlvblwiKTtcclxuICBleGlzdGluZ05vdGlmaWNhdGlvbnMuZm9yRWFjaCgobm90aWYpID0+IG5vdGlmLnJlbW92ZSgpKTtcclxuXHJcbiAgLy8gQ3JlYXRlIG5vdGlmaWNhdGlvbiBlbGVtZW50XHJcbiAgY29uc3Qgbm90aWZpY2F0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBub3RpZmljYXRpb24uY2xhc3NOYW1lID0gYG5vdGlmaWNhdGlvbiBub3RpZmljYXRpb24tJHt0eXBlfWA7XHJcbiAgbm90aWZpY2F0aW9uLnRleHRDb250ZW50ID0gbWVzc2FnZTtcclxuXHJcbiAgLy8gQWRkIHN0eWxlc1xyXG4gIE9iamVjdC5hc3NpZ24obm90aWZpY2F0aW9uLnN0eWxlLCB7XHJcbiAgICBwb3NpdGlvbjogXCJmaXhlZFwiLFxyXG4gICAgdG9wOiBcIjIwcHhcIixcclxuICAgIHJpZ2h0OiBcIjIwcHhcIixcclxuICAgIHBhZGRpbmc6IFwiMTVweCAyMHB4XCIsXHJcbiAgICBib3JkZXJSYWRpdXM6IFwiOHB4XCIsXHJcbiAgICBjb2xvcjogXCJ3aGl0ZVwiLFxyXG4gICAgZm9udFdlaWdodDogXCI1MDBcIixcclxuICAgIHpJbmRleDogXCIxMDAwMFwiLFxyXG4gICAgbWF4V2lkdGg6IFwiNDAwcHhcIixcclxuICAgIGJveFNoYWRvdzogXCIwIDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xNSlcIixcclxuICAgIGJhY2tncm91bmRDb2xvcjpcclxuICAgICAgdHlwZSA9PT0gXCJzdWNjZXNzXCJcclxuICAgICAgICA/IFwiIzEwYjk4MVwiXHJcbiAgICAgICAgOiB0eXBlID09PSBcImVycm9yXCJcclxuICAgICAgICA/IFwiI2VmNDQ0NFwiXHJcbiAgICAgICAgOiB0eXBlID09PSBcIndhcm5pbmdcIlxyXG4gICAgICAgID8gXCIjZjU5ZTBiXCJcclxuICAgICAgICA6IFwiIzNiODJmNlwiLFxyXG4gIH0pO1xyXG5cclxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vdGlmaWNhdGlvbik7XHJcblxyXG4gIC8vIEF1dG8gcmVtb3ZlIGFmdGVyIDUgc2Vjb25kc1xyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgaWYgKG5vdGlmaWNhdGlvbi5wYXJlbnROb2RlKSB7XHJcbiAgICAgIG5vdGlmaWNhdGlvbi5yZW1vdmUoKTtcclxuICAgIH1cclxuICB9LCA1MDAwKTtcclxuXHJcbiAgcmV0dXJuIG5vdGlmaWNhdGlvbjtcclxufVxyXG5cclxuLy8gSW5pdGlhbGl6ZSBkb25hdGlvbiBzeXN0ZW1cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXREb25hdGlvblN5c3RlbSgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3lzdGVtU2V0dXAgPSBzZXR1cERvbmF0aW9uU3lzdGVtKCk7XHJcbiAgICBpZiAoIXN5c3RlbVNldHVwKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBzZXR1cCBkb25hdGlvbiBzeXN0ZW1cIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJEb25hdGlvbiBzeXN0ZW0gaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gICAgc2hvd05vdGlmaWNhdGlvbihcIlN0cmlwZSBpbml0aWFsaXPDqVwiLCBcInN1Y2Nlc3NcIik7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluaXRpYWxpemluZyBkb25hdGlvbiBzeXN0ZW06XCIsIGVycm9yKTtcclxuICAgIHNob3dOb3RpZmljYXRpb24oXCJFcnJldXIgZCdpbml0aWFsaXNhdGlvbiBkdSBzeXN0w6htZSBkZSBwYWllbWVudFwiLCBcImVycm9yXCIpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG4iLCIvLyBzcmMvanMvZW50cmllcy9kb25hdGlvbi5qcyAtIERvbmF0aW9uIHBhZ2UgZW50cnkgcG9pbnRcclxuaW1wb3J0IHsgaW5pdEhlYWRlckF1dGggfSBmcm9tIFwiLi4vYXV0aC9oZWFkZXItYXV0aC5qc1wiO1xyXG5pbXBvcnQgeyBpbml0RG9uYXRpb25TeXN0ZW0gfSBmcm9tIFwiLi4vbW9kdWxlcy9kb25hdGlvbi1zeXN0ZW0uanNcIjtcclxuXHJcbi8vIEluaXRpYWxpemUgaGVhZGVyIGF1dGhlbnRpY2F0aW9uIGFuZCBkb25hdGlvbiBzeXN0ZW0gd2hlbiBET00gaXMgbG9hZGVkXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gSW5pdGlhbGl6ZSBoZWFkZXIgYXV0aGVudGljYXRpb25cclxuICAgIGluaXRIZWFkZXJBdXRoKCk7XHJcblxyXG4gICAgLy8gSW5pdGlhbGl6ZSBkb25hdGlvbiBzeXN0ZW0gKG5vIGxvbmdlciBhc3luYylcclxuICAgIGNvbnN0IGRvbmF0aW9uU3lzdGVtSW5pdGlhbGl6ZWQgPSBpbml0RG9uYXRpb25TeXN0ZW0oKTtcclxuXHJcbiAgICBpZiAoZG9uYXRpb25TeXN0ZW1Jbml0aWFsaXplZCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkRvbmF0aW9uIHBhZ2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBpbml0aWFsaXplIGRvbmF0aW9uIHN5c3RlbVwiKTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluaXRpYWxpemluZyBkb25hdGlvbiBwYWdlOlwiLCBlcnJvcik7XHJcbiAgfVxyXG59KTtcclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmYgPSB7fTtcbi8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbi8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5lID0gKGNodW5rSWQpID0+IHtcblx0cmV0dXJuIFByb21pc2UuYWxsKE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uZikucmVkdWNlKChwcm9taXNlcywga2V5KSA9PiB7XG5cdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5mW2tleV0oY2h1bmtJZCwgcHJvbWlzZXMpO1xuXHRcdHJldHVybiBwcm9taXNlcztcblx0fSwgW10pKTtcbn07IiwiLy8gVGhpcyBmdW5jdGlvbiBhbGxvdyB0byByZWZlcmVuY2UgYXN5bmMgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnUgPSAoY2h1bmtJZCkgPT4ge1xuXHQvLyByZXR1cm4gdXJsIGZvciBmaWxlbmFtZXMgYmFzZWQgb24gdGVtcGxhdGVcblx0cmV0dXJuIFwianMvXCIgKyBjaHVua0lkICsgXCIuY2h1bmsuanNcIjtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5qID0gMzU3OyIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiOyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQzNTc6IDBcbn07XG5cbl9fd2VicGFja19yZXF1aXJlX18uZi5qID0gKGNodW5rSWQsIHByb21pc2VzKSA9PiB7XG5cdFx0Ly8gSlNPTlAgY2h1bmsgbG9hZGluZyBmb3IgamF2YXNjcmlwdFxuXHRcdHZhciBpbnN0YWxsZWRDaHVua0RhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSA/IGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA6IHVuZGVmaW5lZDtcblx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIHsgLy8gMCBtZWFucyBcImFscmVhZHkgaW5zdGFsbGVkXCIuXG5cblx0XHRcdC8vIGEgUHJvbWlzZSBtZWFucyBcImN1cnJlbnRseSBsb2FkaW5nXCIuXG5cdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEpIHtcblx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYodHJ1ZSkgeyAvLyBhbGwgY2h1bmtzIGhhdmUgSlNcblx0XHRcdFx0XHQvLyBzZXR1cCBQcm9taXNlIGluIGNodW5rIGNhY2hlXG5cdFx0XHRcdFx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiAoaW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gW3Jlc29sdmUsIHJlamVjdF0pKTtcblx0XHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSA9IHByb21pc2UpO1xuXG5cdFx0XHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuXHRcdFx0XHRcdHZhciB1cmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBfX3dlYnBhY2tfcmVxdWlyZV9fLnUoY2h1bmtJZCk7XG5cdFx0XHRcdFx0Ly8gY3JlYXRlIGVycm9yIGJlZm9yZSBzdGFjayB1bndvdW5kIHRvIGdldCB1c2VmdWwgc3RhY2t0cmFjZSBsYXRlclxuXHRcdFx0XHRcdHZhciBlcnJvciA9IG5ldyBFcnJvcigpO1xuXHRcdFx0XHRcdHZhciBsb2FkaW5nRW5kZWQgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpKSB7XG5cdFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcblx0XHRcdFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhICE9PSAwKSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBlcnJvclR5cGUgPSBldmVudCAmJiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnID8gJ21pc3NpbmcnIDogZXZlbnQudHlwZSk7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJlYWxTcmMgPSBldmVudCAmJiBldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LnNyYztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5tZXNzYWdlID0gJ0xvYWRpbmcgY2h1bmsgJyArIGNodW5rSWQgKyAnIGZhaWxlZC5cXG4oJyArIGVycm9yVHlwZSArICc6ICcgKyByZWFsU3JjICsgJyknO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLm5hbWUgPSAnQ2h1bmtMb2FkRXJyb3InO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLnR5cGUgPSBlcnJvclR5cGU7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IucmVxdWVzdCA9IHJlYWxTcmM7XG5cdFx0XHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhWzFdKGVycm9yKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5sKHVybCwgbG9hZGluZ0VuZGVkLCBcImNodW5rLVwiICsgY2h1bmtJZCwgY2h1bmtJZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG59O1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8uaiA9IChjaHVua0lkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKTtcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSAocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24sIGRhdGEpID0+IHtcblx0dmFyIFtjaHVua0lkcywgbW9yZU1vZHVsZXMsIHJ1bnRpbWVdID0gZGF0YTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKChpZCkgPT4gKGluc3RhbGxlZENodW5rc1tpZF0gIT09IDApKSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt1cmJhbmRvY3Nfd2ViYXBwXCJdID0gc2VsZltcIndlYnBhY2tDaHVua3VyYmFuZG9jc193ZWJhcHBcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFs3Nl0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKDkwODApKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJsZWFmUHJvdG90eXBlcyIsImdldFByb3RvIiwiaW5Qcm9ncmVzcyIsImRhdGFXZWJwYWNrUHJlZml4IiwiRE9OQVRJT05fTElOS1MiLCJ1cGRhdGVEb25hdGVCdXR0b24iLCJhbW91bnQiLCJkb25hdGVCdG4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZGlzYWJsZWQiLCJpbm5lckhUTUwiLCJzaG93Tm90aWZpY2F0aW9uIiwibWVzc2FnZSIsInR5cGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsIm5vdGlmIiwicmVtb3ZlIiwibm90aWZpY2F0aW9uIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInRleHRDb250ZW50IiwiT2JqZWN0IiwiYXNzaWduIiwic3R5bGUiLCJwb3NpdGlvbiIsInRvcCIsInJpZ2h0IiwicGFkZGluZyIsImJvcmRlclJhZGl1cyIsImNvbG9yIiwiZm9udFdlaWdodCIsInpJbmRleCIsIm1heFdpZHRoIiwiYm94U2hhZG93IiwiYmFja2dyb3VuZENvbG9yIiwiYm9keSIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsInBhcmVudE5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiYW1vdW50QnRucyIsImN1c3RvbUFtb3VudElucHV0IiwibGVuZ3RoIiwiY29uc29sZSIsImVycm9yIiwic2VsZWN0ZWRBbW91bnQiLCJidG4iLCJiIiwiY2xhc3NMaXN0IiwiYWRkIiwicGFyc2VJbnQiLCJkYXRhc2V0IiwidmFsdWUiLCJlIiwiY3VzdG9tQW1vdW50IiwidGFyZ2V0IiwiZGVmYXVsdEJ0biIsInF1ZXJ5U2VsZWN0b3IiLCJvcmlnaW5hbEhUTUwiLCJzdHJpcGVXaW5kb3ciLCJ3aW5kb3ciLCJvcGVuIiwiZm9jdXMiLCJwcm9jZXNzRG9uYXRpb24iLCJsb2ciLCJzZXR1cERvbmF0aW9uU3lzdGVtIiwiRXJyb3IiLCJpbml0RG9uYXRpb25TeXN0ZW0iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJtIiwiTyIsInJlc3VsdCIsImNodW5rSWRzIiwiZm4iLCJwcmlvcml0eSIsIm5vdEZ1bGZpbGxlZCIsIkluZmluaXR5IiwiaSIsImZ1bGZpbGxlZCIsImoiLCJrZXlzIiwiZXZlcnkiLCJrZXkiLCJzcGxpY2UiLCJyIiwiZ2V0UHJvdG90eXBlT2YiLCJvYmoiLCJ0IiwibW9kZSIsInRoaXMiLCJfX2VzTW9kdWxlIiwidGhlbiIsIm5zIiwiY3JlYXRlIiwiZGVmIiwiY3VycmVudCIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZCIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZiIsImNodW5rSWQiLCJQcm9taXNlIiwiYWxsIiwicmVkdWNlIiwicHJvbWlzZXMiLCJ1IiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImwiLCJ1cmwiLCJkb25lIiwicHVzaCIsInNjcmlwdCIsIm5lZWRBdHRhY2giLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzIiwiZ2V0QXR0cmlidXRlIiwiY2hhcnNldCIsInRpbWVvdXQiLCJuYyIsInNldEF0dHJpYnV0ZSIsInNyYyIsIm9uU2NyaXB0Q29tcGxldGUiLCJwcmV2IiwiZXZlbnQiLCJvbmVycm9yIiwib25sb2FkIiwiY2xlYXJUaW1lb3V0IiwiZG9uZUZucyIsInJlbW92ZUNoaWxkIiwiYmluZCIsImhlYWQiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInAiLCJpbnN0YWxsZWRDaHVua3MiLCJpbnN0YWxsZWRDaHVua0RhdGEiLCJwcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImVycm9yVHlwZSIsInJlYWxTcmMiLCJuYW1lIiwicmVxdWVzdCIsIndlYnBhY2tKc29ucENhbGxiYWNrIiwicGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24iLCJkYXRhIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwic29tZSIsImlkIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwic2VsZiIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9