(()=>{"use strict";var e,t,n,o,r,s={7647:(e,t,n)=>{var o=n(3715),r=n(9660),s=n(2387);function a(e,t,n){const o=document.getElementById(n);o&&(o.textContent=e,o.className="status-message margin-top-sm",o.classList.add(t),o.classList.remove("hidden"))}async function i(e){const{data:t,error:n}=await r.N.from("profiles").select("first_name, last_name, phone, updated_at, deletion_requested_at, deletion_scheduled_for").eq("id",e).single();if(n&&"PGRST116"!==n.code)throw console.error("Error fetching profile:",n),n;return t}async function c(){if(!await(0,s.Kv)(!1))return;if(!await(0,o.z6)())return;const e=document.getElementById("userEmail"),t=document.getElementById("logoutBtn"),n=document.getElementById("profileForm"),c=document.getElementById("deleteAccountBtn"),d=document.getElementById("memberSince");try{const{data:{session:s}}=await r.N.auth.getSession();if(!s||!s.user)return console.log("No active session or user. Redirecting to login."),void(window.location.href="/");const u=s.user;e&&(e.textContent=u.email),d&&u.created_at&&(d.textContent=new Date(u.created_at).toLocaleDateString("fr-FR")),(0,o.Cs)("saveProfileBtn");const m=await i(u.id);m?(function(e){const t=document.getElementById("firstName"),n=document.getElementById("lastName"),o=document.getElementById("phone");t&&e.first_name&&(t.value=e.first_name),n&&e.last_name&&(n.value=e.last_name),o&&e.phone&&(o.value=e.phone)}(m),m.deletion_scheduled_for&&l(m)):console.log("No profile data found for user, form will be empty."),(0,o.RZ)("saveProfileBtn"),t&&t.addEventListener("click",(async()=>{(0,o.Cs)("logoutBtn");try{const{error:e}=await r.N.auth.signOut();if(e)throw e;a("Déconnexion réussie. Redirection...","success","profileFormStatus"),setTimeout((()=>{window.location.href="/"}),200)}catch(e){console.error("Error signing out:",e),a(`Erreur de déconnexion: ${e.message}`,"error","profileFormStatus")}finally{(0,o.RZ)("logoutBtn")}})),n&&n.addEventListener("submit",(async e=>{e.preventDefault();const t="profileFormStatus";document.getElementById(t).classList.add("hidden"),(0,o.Cs)("saveProfileBtn");try{const e=new FormData(n),o={first_name:e.get("firstName")||null,last_name:e.get("lastName")||null,phone:e.get("phone")||null,updated_at:(new Date).toISOString()};await async function(e,t){const{data:n,error:o}=await r.N.from("profiles").update(t).eq("id",e).select().single();if(o)throw console.error("Error updating profile:",o),o;return n}(u.id,o),a("Profil mis à jour avec succès !","success",t)}catch(e){console.error("Error updating profile:",e),a(`Erreur lors de la mise à jour: ${e.message}`,"error",t)}finally{(0,o.RZ)("saveProfileBtn")}})),c&&c.addEventListener("click",(async()=>{const e="deleteStatusMessage";if(document.getElementById(e).classList.add("hidden"),confirm("Êtes-vous sûr de vouloir programmer la suppression de votre compte ? Votre compte sera supprimé dans 30 secondes pour le test, mais vous pourrez annuler cette action à tout moment avant la suppression définitive.")){(0,o.Cs)("deleteAccountBtn");try{const{data:t}=await r.N.auth.getSession();if(!t?.session?.access_token)throw new Error("No valid session");const n=await fetch(`${r.N.supabaseUrl}/functions/v1/account-management`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.session.access_token}`},body:JSON.stringify({action:"schedule",reason:"User requested account deletion from profile page"})}),o=await n.json();if(!o.success)throw new Error(o.error||"Failed to schedule deletion");a("Suppression de compte programmée pour dans 30 secondes. Vous pouvez annuler cette action à tout moment.","info",e),setTimeout((async()=>{const e=await i(u.id);e&&l(e)}),1e3)}catch(t){console.error("Error scheduling account deletion:",t),a(`Erreur lors de la programmation de suppression: ${t.message}`,"error",e)}finally{(0,o.RZ)("deleteAccountBtn")}}else console.log("User cancelled account deletion.")}))}catch(e){console.error("Profile page initialization error:",e);const t=document.getElementById("profileDetails");t&&(t.innerHTML='<p class="error-message">Impossible de charger les informations du profil. Veuillez réessayer plus tard.</p>')}}function l(e){const t=document.getElementById("deleteAccountSection"),n=document.getElementById("deleteAccountBtn");if(t&&n&&e.deletion_scheduled_for){const n=new Date(e.deletion_scheduled_for),o=new Date,r=Math.ceil((n.getTime()-o.getTime())/1e3);t.innerHTML=`\n      <h3 class="margin-bottom-sm">Suppression de compte programmée</h3>\n      <div class="deletion-warning">\n        <p class="margin-bottom-sm">\n          ⚠️ Votre compte sera supprimé dans <strong>${r} seconde(s)</strong> \n          (le ${n.toLocaleDateString("fr-FR")} à ${n.toLocaleTimeString("fr-FR")}).\n        </p>\n        <p class="margin-bottom-sm">\n          Vous pouvez annuler cette suppression à tout moment avant la date prévue.\n        </p>\n      </div>\n      <div class="deletion-actions">\n        <button id="cancelDeletionBtn" class="btn btn-primary">\n          Annuler la suppression\n        </button>\n        <button id="viewDeletionStatusBtn" class="btn btn-secondary">\n          Voir le statut détaillé\n        </button>\n      </div>\n      <div id="deleteStatusMessage" class="status-message hidden margin-top-sm"></div>\n    `;const s=document.getElementById("cancelDeletionBtn"),a=document.getElementById("viewDeletionStatusBtn");s&&s.addEventListener("click",d),a&&a.addEventListener("click",(()=>{window.location.href="/user/account-deletion-status"}))}}async function d(){if(confirm("Êtes-vous sûr de vouloir annuler la suppression de votre compte ?"))try{const e=document.getElementById("cancelDeletionBtn");e.textContent,e.textContent="Annulation...",e.disabled=!0;const{data:t}=await r.N.auth.getSession();if(!t?.session?.access_token)throw new Error("No valid session");const n=await fetch(`${r.N.supabaseUrl}/functions/v1/account-management`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.session.access_token}`},body:JSON.stringify({action:"cancel"})}),o=await n.json();if(!o.success)throw new Error(o.error||"Failed to cancel deletion");a("Suppression de compte annulée avec succès !","success","deleteStatusMessage"),setTimeout((()=>{const e=document.getElementById("deleteAccountSection");if(e){e.innerHTML='\n          <h3 class="margin-bottom-sm">Supprimer le compte</h3>\n          <p class="margin-bottom-sm">\n            Attention : Cette action programmera la suppression de votre compte dans 30 secondes pour le test. \n            Vous pourrez annuler cette action à tout moment avant la suppression définitive.\n          </p>\n          <button id="deleteAccountBtn" class="btn btn-danger">\n            Programmer la suppression de mon compte\n          </button>\n          <div id="deleteStatusMessage" class="status-message hidden margin-top-sm"></div>\n        ';const t=document.getElementById("deleteAccountBtn");t&&t.addEventListener("click",(async()=>{location.reload()}))}}),2e3)}catch(e){console.error("Error canceling deletion:",e),a("Erreur lors de l'annulation de la suppression","error","deleteStatusMessage");const t=document.getElementById("cancelDeletionBtn");t&&(t.textContent="Annuler la suppression",t.disabled=!1)}}document.addEventListener("DOMContentLoaded",c);var u=n(9251);document.addEventListener("DOMContentLoaded",(()=>{(0,u.Mt)(),c(),console.log("Profile page and header authentication initialized")}))}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return s[e].call(n.exports,n,n.exports,i),n.exports}i.m=s,e=[],i.O=(t,n,o,r)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){for(var[n,o,r]=e[d],a=!0,c=0;c<n.length;c++)(!1&r||s>=r)&&Object.keys(i.O).every((e=>i.O[e](n[c])))?n.splice(c--,1):(a=!1,r<s&&(s=r));if(a){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,o,r]},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var r=Object.create(null);i.r(r);var s={};t=t||[null,n({}),n([]),n(n)];for(var a=2&o&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,i.d(r,s),r},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>"js/"+e+".chunk.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},r="urbandocs_webapp:",i.l=(e,t,n,s)=>{if(o[e])o[e].push(t);else{var a,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==r+n){a=u;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",r+n),a.src=e),o[e]=[t];var m=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var r=o[e];if(delete o[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(n))),t)return t(n)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=m.bind(null,a.onerror),a.onload=m.bind(null,a.onload),c&&document.head.appendChild(a)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.j=138,i.p="/",(()=>{var e={138:0};i.f.j=(t,n)=>{var o=i.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise(((n,r)=>o=e[t]=[n,r]));n.push(o[2]=r);var s=i.p+i.u(t),a=new Error;i.l(s,(n=>{if(i.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",a.name="ChunkLoadError",a.type=r,a.request=s,o[1](a)}}),"chunk-"+t,t)}},i.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[s,a,c]=n,l=0;if(s.some((t=>0!==e[t]))){for(o in a)i.o(a,o)&&(i.m[o]=a[o]);if(c)var d=c(i)}for(t&&t(n);l<s.length;l++)r=s[l],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(d)},n=self.webpackChunkurbandocs_webapp=self.webpackChunkurbandocs_webapp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var c=i.O(void 0,[76],(()=>i(7647)));c=i.O(c)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBcUJoQixLQUFLLEtBQU0sSUFDM0RxQixFQUFtQjNDLEtBQU9zQyxFQUFxQmhCLEtBQUssS0FBTXFCLEVBQW1CM0MsS0FBS3NCLEtBQUtxQixHLEtDbEZ2RixJQUFJRSxFQUFzQnpHLEVBQW9CUyxPQUFFTixFQUFXLENBQUMsS0FBSyxJQUFPSCxFQUFvQixRQUM1RnlHLEVBQXNCekcsRUFBb0JTLEVBQUVnRyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2NyZWF0ZSBmYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvbG9hZCBzY3JpcHQiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC8uL3NyYy9qcy9hdXRoL3Byb2ZpbGUuanMiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC8uL3NyYy9qcy9wcm9maWxlLXBhZ2UuanMiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9lbnN1cmUgY2h1bmsiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvZ2V0IGphdmFzY3JpcHQgY2h1bmsgZmlsZW5hbWUiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvcnVudGltZUlkIiwid2VicGFjazovL3VyYmFuZG9jc193ZWJhcHAvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vdXJiYW5kb2NzX3dlYmFwcC93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly91cmJhbmRvY3Nfd2ViYXBwL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IChyZXN1bHQsIGNodW5rSWRzLCBmbiwgcHJpb3JpdHkpID0+IHtcblx0aWYoY2h1bmtJZHMpIHtcblx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0Zm9yKHZhciBpID0gZGVmZXJyZWQubGVuZ3RoOyBpID4gMCAmJiBkZWZlcnJlZFtpIC0gMV1bMl0gPiBwcmlvcml0eTsgaS0tKSBkZWZlcnJlZFtpXSA9IGRlZmVycmVkW2kgLSAxXTtcblx0XHRkZWZlcnJlZFtpXSA9IFtjaHVua0lkcywgZm4sIHByaW9yaXR5XTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIG5vdEZ1bGZpbGxlZCA9IEluZmluaXR5O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIFtjaHVua0lkcywgZm4sIHByaW9yaXR5XSA9IGRlZmVycmVkW2ldO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeSgoa2V5KSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXy5PW2tleV0oY2h1bmtJZHNbal0pKSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJ2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgPyAob2JqKSA9PiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikpIDogKG9iaikgPT4gKG9iai5fX3Byb3RvX18pO1xudmFyIGxlYWZQcm90b3R5cGVzO1xuLy8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4vLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbi8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuLy8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4vLyBtb2RlICYgMTY6IHJldHVybiB2YWx1ZSB3aGVuIGl0J3MgUHJvbWlzZS1saWtlXG4vLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuXHRpZihtb2RlICYgMSkgdmFsdWUgPSB0aGlzKHZhbHVlKTtcblx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcblx0aWYodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSkge1xuXHRcdGlmKChtb2RlICYgNCkgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuXHRcdGlmKChtb2RlICYgMTYpICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdmFsdWU7XG5cdH1cblx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcblx0dmFyIGRlZiA9IHt9O1xuXHRsZWFmUHJvdG90eXBlcyA9IGxlYWZQcm90b3R5cGVzIHx8IFtudWxsLCBnZXRQcm90byh7fSksIGdldFByb3RvKFtdKSwgZ2V0UHJvdG8oZ2V0UHJvdG8pXTtcblx0Zm9yKHZhciBjdXJyZW50ID0gbW9kZSAmIDIgJiYgdmFsdWU7IHR5cGVvZiBjdXJyZW50ID09ICdvYmplY3QnICYmICF+bGVhZlByb3RvdHlwZXMuaW5kZXhPZihjdXJyZW50KTsgY3VycmVudCA9IGdldFByb3RvKGN1cnJlbnQpKSB7XG5cdFx0T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY3VycmVudCkuZm9yRWFjaCgoa2V5KSA9PiAoZGVmW2tleV0gPSAoKSA9PiAodmFsdWVba2V5XSkpKTtcblx0fVxuXHRkZWZbJ2RlZmF1bHQnXSA9ICgpID0+ICh2YWx1ZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChucywgZGVmKTtcblx0cmV0dXJuIG5zO1xufTsiLCJ2YXIgaW5Qcm9ncmVzcyA9IHt9O1xudmFyIGRhdGFXZWJwYWNrUHJlZml4ID0gXCJ1cmJhbmRvY3Nfd2ViYXBwOlwiO1xuLy8gbG9hZFNjcmlwdCBmdW5jdGlvbiB0byBsb2FkIGEgc2NyaXB0IHZpYSBzY3JpcHQgdGFnXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmwgPSAodXJsLCBkb25lLCBrZXksIGNodW5rSWQpID0+IHtcblx0aWYoaW5Qcm9ncmVzc1t1cmxdKSB7IGluUHJvZ3Jlc3NbdXJsXS5wdXNoKGRvbmUpOyByZXR1cm47IH1cblx0dmFyIHNjcmlwdCwgbmVlZEF0dGFjaDtcblx0aWYoa2V5ICE9PSB1bmRlZmluZWQpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzY3JpcHRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgcyA9IHNjcmlwdHNbaV07XG5cdFx0XHRpZihzLmdldEF0dHJpYnV0ZShcInNyY1wiKSA9PSB1cmwgfHwgcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXdlYnBhY2tcIikgPT0gZGF0YVdlYnBhY2tQcmVmaXggKyBrZXkpIHsgc2NyaXB0ID0gczsgYnJlYWs7IH1cblx0XHR9XG5cdH1cblx0aWYoIXNjcmlwdCkge1xuXHRcdG5lZWRBdHRhY2ggPSB0cnVlO1xuXHRcdHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG5cdFx0c2NyaXB0LmNoYXJzZXQgPSAndXRmLTgnO1xuXHRcdHNjcmlwdC50aW1lb3V0ID0gMTIwO1xuXHRcdGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKSB7XG5cdFx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgX193ZWJwYWNrX3JlcXVpcmVfXy5uYyk7XG5cdFx0fVxuXHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXdlYnBhY2tcIiwgZGF0YVdlYnBhY2tQcmVmaXggKyBrZXkpO1xuXG5cdFx0c2NyaXB0LnNyYyA9IHVybDtcblx0fVxuXHRpblByb2dyZXNzW3VybF0gPSBbZG9uZV07XG5cdHZhciBvblNjcmlwdENvbXBsZXRlID0gKHByZXYsIGV2ZW50KSA9PiB7XG5cdFx0Ly8gYXZvaWQgbWVtIGxlYWtzIGluIElFLlxuXHRcdHNjcmlwdC5vbmVycm9yID0gc2NyaXB0Lm9ubG9hZCA9IG51bGw7XG5cdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHRcdHZhciBkb25lRm5zID0gaW5Qcm9ncmVzc1t1cmxdO1xuXHRcdGRlbGV0ZSBpblByb2dyZXNzW3VybF07XG5cdFx0c2NyaXB0LnBhcmVudE5vZGUgJiYgc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcblx0XHRkb25lRm5zICYmIGRvbmVGbnMuZm9yRWFjaCgoZm4pID0+IChmbihldmVudCkpKTtcblx0XHRpZihwcmV2KSByZXR1cm4gcHJldihldmVudCk7XG5cdH1cblx0dmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCB1bmRlZmluZWQsIHsgdHlwZTogJ3RpbWVvdXQnLCB0YXJnZXQ6IHNjcmlwdCB9KSwgMTIwMDAwKTtcblx0c2NyaXB0Lm9uZXJyb3IgPSBvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgc2NyaXB0Lm9uZXJyb3IpO1xuXHRzY3JpcHQub25sb2FkID0gb25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHNjcmlwdC5vbmxvYWQpO1xuXHRuZWVkQXR0YWNoICYmIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbn07IiwiLy8gc3JjL2F1dGgvcHJvZmlsZS5qc1xyXG4vKipcclxuICogUHJvZmlsZSBNb2R1bGVcclxuICogQG1vZHVsZSBwcm9maWxlXHJcbiAqIEBkZXNjcmlwdGlvbiBIYW5kbGVzIHVzZXIgcHJvZmlsZSBtYW5hZ2VtZW50LCBpbmNsdWRpbmcgZGF0YSBmZXRjaGluZywgdXBkYXRlcywgYW5kIGFjY291bnQgZGVsZXRpb24uXHJcbiAqIEB2ZXJzaW9uIDAuMy4wXHJcbiAqXHJcbiAqIEBjaGFuZ2Vsb2dcclxuICogLSAwLjMuMCAoMjAyNS0wMS0yNyk6IFVwZGF0ZWQgYWNjb3VudCBkZWxldGlvbiB0byB1c2UgMzAtZGF5IGdyYWNlIHBlcmlvZCBzeXN0ZW1cclxuICogLSAwLjIuMSAoMjAyNS0wMS0yNyk6IFVwZGF0ZWQgdG8gdXNlIEVuZ2xpc2ggY29sdW1uIG5hbWVzIGFuZCBhZGRlZCBkYXRlX29mX2JpcnRoIHN1cHBvcnRcclxuICogLSAwLjIuMCAoMjAyNS0wMS0yNyk6IEZpeGVkIGRhdGFiYXNlIHRhYmxlIHJlZmVyZW5jZXMgYW5kIGZpZWxkIG1hcHBpbmdzIHRvIG1hdGNoIGFjdHVhbCBTdXBhYmFzZSBzdHJ1Y3R1cmVcclxuICogLSAwLjEuMCAoMjAyNS0wNS0xNik6IEFkZGVkIHByb2ZpbGUgZGF0YSBmZXRjaGluZywgdXBkYXRpbmcsIGFuZCBhY2NvdW50IGRlbGV0aW9uIGZ1bmN0aW9uYWxpdHkuXHJcbiAqIC0gMC4wLjIgKDIwMjUtMDUtMTUpOiBJbXByb3ZlZCBlcnJvciBoYW5kbGluZyBhbmQgYWRkZWQgbG9hZGluZyBzdGF0ZXMgKHByZXZpb3VzIHZlcnNpb25pbmcgd2FzIGZ1dHVyZS1kYXRlZClcclxuICogLSAwLjAuMSAoMjAyNS0wNS0xNCk6IEluaXRpYWwgdmVyc2lvbiB3aXRoIGJhc2ljIHByb2ZpbGUgZGlzcGxheSBhbmQgbG9nb3V0LlxyXG4gKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgcHJvdGVjdFBhZ2UsXHJcbiAgc2hvd1N0YXR1cywgLy8gQXNzdW1pbmcgdGhpcyBjYW4gdGFyZ2V0IHNwZWNpZmljIGVsZW1lbnRzXHJcbiAgLy8gc2hvd0Vycm9yLCAvLyBXZSBjYW4gdXNlIHNob3dTdGF0dXMgd2l0aCB0eXBlICdlcnJvcidcclxuICBzaG93TG9hZGluZyxcclxuICBoaWRlTG9hZGluZyxcclxufSBmcm9tIFwiLi9hdXRoLmpzXCI7IC8vIEFzc3VtaW5nIGF1dGguanMgZXhwb3J0cyBzaG93U3RhdHVzIHRoYXQgY2FuIHRha2UgYW4gZWxlbWVudCBJRFxyXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gXCIuLi9zdXBhYmFzZS1jbGllbnQuanNcIjtcclxuaW1wb3J0IHsgaW5pdERlbGV0aW9uR3VhcmQgfSBmcm9tIFwiLi9kZWxldGlvbi1ndWFyZC5qc1wiO1xyXG5cclxuLy8gSGVscGVyIHRvIHNob3cgc3RhdHVzIG1lc3NhZ2VzIGZvciBwcm9maWxlIGZvcm0gYW5kIGRlbGV0ZSBzZWN0aW9uXHJcbmZ1bmN0aW9uIHNob3dQcm9maWxlU3RhdHVzKG1lc3NhZ2UsIHR5cGUsIGVsZW1lbnRJZCkge1xyXG4gIGNvbnN0IHN0YXR1c0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xyXG4gIGlmIChzdGF0dXNFbGVtZW50KSB7XHJcbiAgICBzdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gbWVzc2FnZTtcclxuICAgIHN0YXR1c0VsZW1lbnQuY2xhc3NOYW1lID0gXCJzdGF0dXMtbWVzc2FnZSBtYXJnaW4tdG9wLXNtXCI7IC8vIFJlc2V0IGNsYXNzZXNcclxuICAgIHN0YXR1c0VsZW1lbnQuY2xhc3NMaXN0LmFkZCh0eXBlKTsgLy8gJ3N1Y2Nlc3MnLCAnZXJyb3InLCAnaW5mbydcclxuICAgIHN0YXR1c0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoVXNlclByb2ZpbGUodXNlcklkKSB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKFwicHJvZmlsZXNcIilcclxuICAgIC5zZWxlY3QoXHJcbiAgICAgIFwiZmlyc3RfbmFtZSwgbGFzdF9uYW1lLCBwaG9uZSwgdXBkYXRlZF9hdCwgZGVsZXRpb25fcmVxdWVzdGVkX2F0LCBkZWxldGlvbl9zY2hlZHVsZWRfZm9yXCJcclxuICAgIClcclxuICAgIC5lcShcImlkXCIsIHVzZXJJZClcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgIT09IFwiUEdSU1QxMTZcIikge1xyXG4gICAgLy8gUEdSU1QxMTY6IFwicm93IG5vdCBmb3VuZFwiXHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcHJvZmlsZTpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwb3B1bGF0ZVByb2ZpbGVGb3JtKHByb2ZpbGUpIHtcclxuICBjb25zdCBmaXJzdE5hbWVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlyc3ROYW1lXCIpO1xyXG4gIGNvbnN0IGxhc3ROYW1lRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxhc3ROYW1lXCIpO1xyXG4gIGNvbnN0IHBob25lRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBob25lXCIpO1xyXG5cclxuICBpZiAoZmlyc3ROYW1lRWwgJiYgcHJvZmlsZS5maXJzdF9uYW1lKSB7XHJcbiAgICBmaXJzdE5hbWVFbC52YWx1ZSA9IHByb2ZpbGUuZmlyc3RfbmFtZTtcclxuICB9XHJcbiAgaWYgKGxhc3ROYW1lRWwgJiYgcHJvZmlsZS5sYXN0X25hbWUpIHtcclxuICAgIGxhc3ROYW1lRWwudmFsdWUgPSBwcm9maWxlLmxhc3RfbmFtZTtcclxuICB9XHJcbiAgaWYgKHBob25lRWwgJiYgcHJvZmlsZS5waG9uZSkge1xyXG4gICAgcGhvbmVFbC52YWx1ZSA9IHByb2ZpbGUucGhvbmU7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyUHJvZmlsZSh1c2VySWQsIHByb2ZpbGVEYXRhKSB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKFwicHJvZmlsZXNcIilcclxuICAgIC51cGRhdGUocHJvZmlsZURhdGEpXHJcbiAgICAuZXEoXCJpZFwiLCB1c2VySWQpXHJcbiAgICAuc2VsZWN0KClcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgcHJvZmlsZTpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdFByb2ZpbGVQYWdlKCkge1xyXG4gIC8vIEluaXRpYWxpemUgZGVsZXRpb24gZ3VhcmQgZmlyc3RcclxuICBjb25zdCBjYW5BY2Nlc3MgPSBhd2FpdCBpbml0RGVsZXRpb25HdWFyZChmYWxzZSk7XHJcbiAgaWYgKCFjYW5BY2Nlc3MpIHtcclxuICAgIHJldHVybjsgLy8gQWNjZXNzIHdhcyBibG9ja2VkXHJcbiAgfVxyXG5cclxuICBpZiAoIShhd2FpdCBwcm90ZWN0UGFnZSgpKSkgcmV0dXJuO1xyXG5cclxuICBjb25zdCB1c2VyRW1haWxFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlckVtYWlsXCIpO1xyXG4gIGNvbnN0IGxvZ291dEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9nb3V0QnRuXCIpO1xyXG4gIGNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlRm9ybVwiKTtcclxuICBjb25zdCBkZWxldGVBY2NvdW50QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZWxldGVBY2NvdW50QnRuXCIpO1xyXG4gIGNvbnN0IG1lbWJlclNpbmNlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lbWJlclNpbmNlXCIpO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBkYXRhOiB7IHNlc3Npb24gfSxcclxuICAgIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcclxuICAgIGlmICghc2Vzc2lvbiB8fCAhc2Vzc2lvbi51c2VyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiTm8gYWN0aXZlIHNlc3Npb24gb3IgdXNlci4gUmVkaXJlY3RpbmcgdG8gbG9naW4uXCIpO1xyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL1wiO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB1c2VyID0gc2Vzc2lvbi51c2VyO1xyXG5cclxuICAgIGlmICh1c2VyRW1haWxFbCkge1xyXG4gICAgICB1c2VyRW1haWxFbC50ZXh0Q29udGVudCA9IHVzZXIuZW1haWw7XHJcbiAgICB9XHJcbiAgICBpZiAobWVtYmVyU2luY2VFbCAmJiB1c2VyLmNyZWF0ZWRfYXQpIHtcclxuICAgICAgbWVtYmVyU2luY2VFbC50ZXh0Q29udGVudCA9IG5ldyBEYXRlKHVzZXIuY3JlYXRlZF9hdCkudG9Mb2NhbGVEYXRlU3RyaW5nKFxyXG4gICAgICAgIFwiZnItRlJcIlxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZldGNoIGFuZCBwb3B1bGF0ZSBwcm9maWxlXHJcbiAgICBzaG93TG9hZGluZyhcInNhdmVQcm9maWxlQnRuXCIpO1xyXG4gICAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IGZldGNoVXNlclByb2ZpbGUodXNlci5pZCk7XHJcbiAgICBpZiAocHJvZmlsZSkge1xyXG4gICAgICBwb3B1bGF0ZVByb2ZpbGVGb3JtKHByb2ZpbGUpO1xyXG5cclxuICAgICAgLy8gQ2hlY2sgaWYgYWNjb3VudCBkZWxldGlvbiBpcyBzY2hlZHVsZWRcclxuICAgICAgaWYgKHByb2ZpbGUuZGVsZXRpb25fc2NoZWR1bGVkX2Zvcikge1xyXG4gICAgICAgIHVwZGF0ZURlbGV0ZUFjY291bnRTZWN0aW9uKHByb2ZpbGUpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIk5vIHByb2ZpbGUgZGF0YSBmb3VuZCBmb3IgdXNlciwgZm9ybSB3aWxsIGJlIGVtcHR5LlwiKTtcclxuICAgIH1cclxuICAgIGhpZGVMb2FkaW5nKFwic2F2ZVByb2ZpbGVCdG5cIik7XHJcblxyXG4gICAgaWYgKGxvZ291dEJ0bikge1xyXG4gICAgICBsb2dvdXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBzaG93TG9hZGluZyhcImxvZ291dEJ0blwiKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduT3V0KCk7XHJcbiAgICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgc2hvd1Byb2ZpbGVTdGF0dXMoXHJcbiAgICAgICAgICAgIFwiRMOpY29ubmV4aW9uIHLDqXVzc2llLiBSZWRpcmVjdGlvbi4uLlwiLFxyXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIixcclxuICAgICAgICAgICAgXCJwcm9maWxlRm9ybVN0YXR1c1wiXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvXCI7XHJcbiAgICAgICAgICB9LCAyMDApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2lnbmluZyBvdXQ6XCIsIGVycm9yKTtcclxuICAgICAgICAgIHNob3dQcm9maWxlU3RhdHVzKFxyXG4gICAgICAgICAgICBgRXJyZXVyIGRlIGTDqWNvbm5leGlvbjogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgIFwiZXJyb3JcIixcclxuICAgICAgICAgICAgXCJwcm9maWxlRm9ybVN0YXR1c1wiXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICBoaWRlTG9hZGluZyhcImxvZ291dEJ0blwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChwcm9maWxlRm9ybSkge1xyXG4gICAgICBwcm9maWxlRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGFzeW5jIChlKSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IGRlbGV0ZVN0YXR1c0VsID0gXCJwcm9maWxlRm9ybVN0YXR1c1wiO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlbGV0ZVN0YXR1c0VsKS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG5cclxuICAgICAgICBzaG93TG9hZGluZyhcInNhdmVQcm9maWxlQnRuXCIpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShwcm9maWxlRm9ybSk7XHJcbiAgICAgICAgICBjb25zdCBwcm9maWxlRGF0YSA9IHtcclxuICAgICAgICAgICAgZmlyc3RfbmFtZTogZm9ybURhdGEuZ2V0KFwiZmlyc3ROYW1lXCIpIHx8IG51bGwsXHJcbiAgICAgICAgICAgIGxhc3RfbmFtZTogZm9ybURhdGEuZ2V0KFwibGFzdE5hbWVcIikgfHwgbnVsbCxcclxuICAgICAgICAgICAgcGhvbmU6IGZvcm1EYXRhLmdldChcInBob25lXCIpIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgYXdhaXQgdXBkYXRlVXNlclByb2ZpbGUodXNlci5pZCwgcHJvZmlsZURhdGEpO1xyXG4gICAgICAgICAgc2hvd1Byb2ZpbGVTdGF0dXMoXHJcbiAgICAgICAgICAgIFwiUHJvZmlsIG1pcyDDoCBqb3VyIGF2ZWMgc3VjY8OocyAhXCIsXHJcbiAgICAgICAgICAgIFwic3VjY2Vzc1wiLFxyXG4gICAgICAgICAgICBkZWxldGVTdGF0dXNFbFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIHByb2ZpbGU6XCIsIGVycm9yKTtcclxuICAgICAgICAgIHNob3dQcm9maWxlU3RhdHVzKFxyXG4gICAgICAgICAgICBgRXJyZXVyIGxvcnMgZGUgbGEgbWlzZSDDoCBqb3VyOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgXCJlcnJvclwiLFxyXG4gICAgICAgICAgICBkZWxldGVTdGF0dXNFbFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgaGlkZUxvYWRpbmcoXCJzYXZlUHJvZmlsZUJ0blwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkZWxldGVBY2NvdW50QnRuKSB7XHJcbiAgICAgIGRlbGV0ZUFjY291bnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBkZWxldGVTdGF0dXNFbCA9IFwiZGVsZXRlU3RhdHVzTWVzc2FnZVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlbGV0ZVN0YXR1c0VsKS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBjb25maXJtKFxyXG4gICAgICAgICAgICBcIsOKdGVzLXZvdXMgc8O7ciBkZSB2b3Vsb2lyIHByb2dyYW1tZXIgbGEgc3VwcHJlc3Npb24gZGUgdm90cmUgY29tcHRlID8gVm90cmUgY29tcHRlIHNlcmEgc3VwcHJpbcOpIGRhbnMgMzAgc2Vjb25kZXMgcG91ciBsZSB0ZXN0LCBtYWlzIHZvdXMgcG91cnJleiBhbm51bGVyIGNldHRlIGFjdGlvbiDDoCB0b3V0IG1vbWVudCBhdmFudCBsYSBzdXBwcmVzc2lvbiBkw6lmaW5pdGl2ZS5cIlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgc2hvd0xvYWRpbmcoXCJkZWxldGVBY2NvdW50QnRuXCIpO1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gQ2FsbCB0aGUgYWNjb3VudCBtYW5hZ2VtZW50IGVkZ2UgZnVuY3Rpb24gdG8gc2NoZWR1bGUgZGVsZXRpb25cclxuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBzZXNzaW9uIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcclxuICAgICAgICAgICAgaWYgKCFzZXNzaW9uPy5zZXNzaW9uPy5hY2Nlc3NfdG9rZW4pIHtcclxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB2YWxpZCBzZXNzaW9uXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgICAgICAgICAgIGAke3N1cGFiYXNlLnN1cGFiYXNlVXJsfS9mdW5jdGlvbnMvdjEvYWNjb3VudC1tYW5hZ2VtZW50YCxcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Nlc3Npb24uc2Vzc2lvbi5hY2Nlc3NfdG9rZW59YCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJzY2hlZHVsZVwiLFxyXG4gICAgICAgICAgICAgICAgICByZWFzb246IFwiVXNlciByZXF1ZXN0ZWQgYWNjb3VudCBkZWxldGlvbiBmcm9tIHByb2ZpbGUgcGFnZVwiLFxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IgfHwgXCJGYWlsZWQgdG8gc2NoZWR1bGUgZGVsZXRpb25cIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNob3dQcm9maWxlU3RhdHVzKFxyXG4gICAgICAgICAgICAgIFwiU3VwcHJlc3Npb24gZGUgY29tcHRlIHByb2dyYW1tw6llIHBvdXIgZGFucyAzMCBzZWNvbmRlcy4gVm91cyBwb3V2ZXogYW5udWxlciBjZXR0ZSBhY3Rpb24gw6AgdG91dCBtb21lbnQuXCIsXHJcbiAgICAgICAgICAgICAgXCJpbmZvXCIsXHJcbiAgICAgICAgICAgICAgZGVsZXRlU3RhdHVzRWxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgZGVsZXRlIGFjY291bnQgc2VjdGlvblxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkUHJvZmlsZSA9IGF3YWl0IGZldGNoVXNlclByb2ZpbGUodXNlci5pZCk7XHJcbiAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRQcm9maWxlKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVEZWxldGVBY2NvdW50U2VjdGlvbih1cGRhdGVkUHJvZmlsZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzY2hlZHVsaW5nIGFjY291bnQgZGVsZXRpb246XCIsIGVycm9yKTtcclxuICAgICAgICAgICAgc2hvd1Byb2ZpbGVTdGF0dXMoXHJcbiAgICAgICAgICAgICAgYEVycmV1ciBsb3JzIGRlIGxhIHByb2dyYW1tYXRpb24gZGUgc3VwcHJlc3Npb246ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgIFwiZXJyb3JcIixcclxuICAgICAgICAgICAgICBkZWxldGVTdGF0dXNFbFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgaGlkZUxvYWRpbmcoXCJkZWxldGVBY2NvdW50QnRuXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIgY2FuY2VsbGVkIGFjY291bnQgZGVsZXRpb24uXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJQcm9maWxlIHBhZ2UgaW5pdGlhbGl6YXRpb24gZXJyb3I6XCIsIGVycm9yKTtcclxuICAgIGNvbnN0IG1haW5FcnJvckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZURldGFpbHNcIik7XHJcbiAgICBpZiAobWFpbkVycm9yQ29udGFpbmVyKSB7XHJcbiAgICAgIG1haW5FcnJvckNvbnRhaW5lci5pbm5lckhUTUwgPVxyXG4gICAgICAgICc8cCBjbGFzcz1cImVycm9yLW1lc3NhZ2VcIj5JbXBvc3NpYmxlIGRlIGNoYXJnZXIgbGVzIGluZm9ybWF0aW9ucyBkdSBwcm9maWwuIFZldWlsbGV6IHLDqWVzc2F5ZXIgcGx1cyB0YXJkLjwvcD4nO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgZGVsZXRlIGFjY291bnQgc2VjdGlvbiBiYXNlZCBvbiBkZWxldGlvbiBzdGF0dXNcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZURlbGV0ZUFjY291bnRTZWN0aW9uKHByb2ZpbGUpIHtcclxuICBjb25zdCBkZWxldGVTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZWxldGVBY2NvdW50U2VjdGlvblwiKTtcclxuICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlbGV0ZUFjY291bnRCdG5cIik7XHJcblxyXG4gIGlmICghZGVsZXRlU2VjdGlvbiB8fCAhZGVsZXRlQnRuKSByZXR1cm47XHJcblxyXG4gIGlmIChwcm9maWxlLmRlbGV0aW9uX3NjaGVkdWxlZF9mb3IpIHtcclxuICAgIGNvbnN0IGRlbGV0aW9uRGF0ZSA9IG5ldyBEYXRlKHByb2ZpbGUuZGVsZXRpb25fc2NoZWR1bGVkX2Zvcik7XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3Qgc2Vjb25kc1JlbWFpbmluZyA9IE1hdGguY2VpbChcclxuICAgICAgKGRlbGV0aW9uRGF0ZS5nZXRUaW1lKCkgLSBub3cuZ2V0VGltZSgpKSAvIDEwMDBcclxuICAgICk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHNlY3Rpb24gY29udGVudFxyXG4gICAgZGVsZXRlU2VjdGlvbi5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxoMyBjbGFzcz1cIm1hcmdpbi1ib3R0b20tc21cIj5TdXBwcmVzc2lvbiBkZSBjb21wdGUgcHJvZ3JhbW3DqWU8L2gzPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZGVsZXRpb24td2FybmluZ1wiPlxyXG4gICAgICAgIDxwIGNsYXNzPVwibWFyZ2luLWJvdHRvbS1zbVwiPlxyXG4gICAgICAgICAg4pqg77iPIFZvdHJlIGNvbXB0ZSBzZXJhIHN1cHByaW3DqSBkYW5zIDxzdHJvbmc+JHtzZWNvbmRzUmVtYWluaW5nfSBzZWNvbmRlKHMpPC9zdHJvbmc+IFxyXG4gICAgICAgICAgKGxlICR7ZGVsZXRpb25EYXRlLnRvTG9jYWxlRGF0ZVN0cmluZyhcclxuICAgICAgICAgICAgXCJmci1GUlwiXHJcbiAgICAgICAgICApfSDDoCAke2RlbGV0aW9uRGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoXCJmci1GUlwiKX0pLlxyXG4gICAgICAgIDwvcD5cclxuICAgICAgICA8cCBjbGFzcz1cIm1hcmdpbi1ib3R0b20tc21cIj5cclxuICAgICAgICAgIFZvdXMgcG91dmV6IGFubnVsZXIgY2V0dGUgc3VwcHJlc3Npb24gw6AgdG91dCBtb21lbnQgYXZhbnQgbGEgZGF0ZSBwcsOpdnVlLlxyXG4gICAgICAgIDwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJkZWxldGlvbi1hY3Rpb25zXCI+XHJcbiAgICAgICAgPGJ1dHRvbiBpZD1cImNhbmNlbERlbGV0aW9uQnRuXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIj5cclxuICAgICAgICAgIEFubnVsZXIgbGEgc3VwcHJlc3Npb25cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8YnV0dG9uIGlkPVwidmlld0RlbGV0aW9uU3RhdHVzQnRuXCIgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeVwiPlxyXG4gICAgICAgICAgVm9pciBsZSBzdGF0dXQgZMOpdGFpbGzDqVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBpZD1cImRlbGV0ZVN0YXR1c01lc3NhZ2VcIiBjbGFzcz1cInN0YXR1cy1tZXNzYWdlIGhpZGRlbiBtYXJnaW4tdG9wLXNtXCI+PC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lcnMgZm9yIG5ldyBidXR0b25zXHJcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbmNlbERlbGV0aW9uQnRuXCIpO1xyXG4gICAgY29uc3Qgdmlld1N0YXR1c0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlld0RlbGV0aW9uU3RhdHVzQnRuXCIpO1xyXG5cclxuICAgIGlmIChjYW5jZWxCdG4pIHtcclxuICAgICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVDYW5jZWxEZWxldGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHZpZXdTdGF0dXNCdG4pIHtcclxuICAgICAgdmlld1N0YXR1c0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvdXNlci9hY2NvdW50LWRlbGV0aW9uLXN0YXR1c1wiO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGUgY2FuY2VsaW5nIGFjY291bnQgZGVsZXRpb25cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNhbmNlbERlbGV0aW9uKCkge1xyXG4gIGlmIChcclxuICAgICFjb25maXJtKFxyXG4gICAgICBcIsOKdGVzLXZvdXMgc8O7ciBkZSB2b3Vsb2lyIGFubnVsZXIgbGEgc3VwcHJlc3Npb24gZGUgdm90cmUgY29tcHRlID9cIlxyXG4gICAgKVxyXG4gICkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FuY2VsRGVsZXRpb25CdG5cIik7XHJcbiAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBjYW5jZWxCdG4udGV4dENvbnRlbnQ7XHJcbiAgICBjYW5jZWxCdG4udGV4dENvbnRlbnQgPSBcIkFubnVsYXRpb24uLi5cIjtcclxuICAgIGNhbmNlbEJ0bi5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgLy8gQ2FsbCB0aGUgYWNjb3VudCBtYW5hZ2VtZW50IGVkZ2UgZnVuY3Rpb24gdG8gY2FuY2VsIGRlbGV0aW9uXHJcbiAgICBjb25zdCB7IGRhdGE6IHNlc3Npb24gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbigpO1xyXG4gICAgaWYgKCFzZXNzaW9uPy5zZXNzaW9uPy5hY2Nlc3NfdG9rZW4pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdmFsaWQgc2Vzc2lvblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgICBgJHtzdXBhYmFzZS5zdXBhYmFzZVVybH0vZnVuY3Rpb25zL3YxL2FjY291bnQtbWFuYWdlbWVudGAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Nlc3Npb24uc2Vzc2lvbi5hY2Nlc3NfdG9rZW59YCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGFjdGlvbjogXCJjYW5jZWxcIixcclxuICAgICAgICB9KSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0LmVycm9yIHx8IFwiRmFpbGVkIHRvIGNhbmNlbCBkZWxldGlvblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93UHJvZmlsZVN0YXR1cyhcclxuICAgICAgXCJTdXBwcmVzc2lvbiBkZSBjb21wdGUgYW5udWzDqWUgYXZlYyBzdWNjw6hzICFcIixcclxuICAgICAgXCJzdWNjZXNzXCIsXHJcbiAgICAgIFwiZGVsZXRlU3RhdHVzTWVzc2FnZVwiXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFJlc3RvcmUgb3JpZ2luYWwgZGVsZXRlIGFjY291bnQgc2VjdGlvblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRlbGV0ZVNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlbGV0ZUFjY291bnRTZWN0aW9uXCIpO1xyXG4gICAgICBpZiAoZGVsZXRlU2VjdGlvbikge1xyXG4gICAgICAgIGRlbGV0ZVNlY3Rpb24uaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgPGgzIGNsYXNzPVwibWFyZ2luLWJvdHRvbS1zbVwiPlN1cHByaW1lciBsZSBjb21wdGU8L2gzPlxyXG4gICAgICAgICAgPHAgY2xhc3M9XCJtYXJnaW4tYm90dG9tLXNtXCI+XHJcbiAgICAgICAgICAgIEF0dGVudGlvbiA6IENldHRlIGFjdGlvbiBwcm9ncmFtbWVyYSBsYSBzdXBwcmVzc2lvbiBkZSB2b3RyZSBjb21wdGUgZGFucyAzMCBzZWNvbmRlcyBwb3VyIGxlIHRlc3QuIFxyXG4gICAgICAgICAgICBWb3VzIHBvdXJyZXogYW5udWxlciBjZXR0ZSBhY3Rpb24gw6AgdG91dCBtb21lbnQgYXZhbnQgbGEgc3VwcHJlc3Npb24gZMOpZmluaXRpdmUuXHJcbiAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICA8YnV0dG9uIGlkPVwiZGVsZXRlQWNjb3VudEJ0blwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIj5cclxuICAgICAgICAgICAgUHJvZ3JhbW1lciBsYSBzdXBwcmVzc2lvbiBkZSBtb24gY29tcHRlXHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDxkaXYgaWQ9XCJkZWxldGVTdGF0dXNNZXNzYWdlXCIgY2xhc3M9XCJzdGF0dXMtbWVzc2FnZSBoaWRkZW4gbWFyZ2luLXRvcC1zbVwiPjwvZGl2PlxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIC8vIFJlLWFkZCBldmVudCBsaXN0ZW5lclxyXG4gICAgICAgIGNvbnN0IG5ld0RlbGV0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVsZXRlQWNjb3VudEJ0blwiKTtcclxuICAgICAgICBpZiAobmV3RGVsZXRlQnRuKSB7XHJcbiAgICAgICAgICBuZXdEZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgLy8gUmUtcnVuIHRoZSBkZWxldGUgYWNjb3VudCBsb2dpY1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsgLy8gU2ltcGxlIHNvbHV0aW9uOiByZWxvYWQgdGhlIHBhZ2VcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwgMjAwMCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjYW5jZWxpbmcgZGVsZXRpb246XCIsIGVycm9yKTtcclxuICAgIHNob3dQcm9maWxlU3RhdHVzKFxyXG4gICAgICBcIkVycmV1ciBsb3JzIGRlIGwnYW5udWxhdGlvbiBkZSBsYSBzdXBwcmVzc2lvblwiLFxyXG4gICAgICBcImVycm9yXCIsXHJcbiAgICAgIFwiZGVsZXRlU3RhdHVzTWVzc2FnZVwiXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFJlLWVuYWJsZSBidXR0b25cclxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FuY2VsRGVsZXRpb25CdG5cIik7XHJcbiAgICBpZiAoY2FuY2VsQnRuKSB7XHJcbiAgICAgIGNhbmNlbEJ0bi50ZXh0Q29udGVudCA9IFwiQW5udWxlciBsYSBzdXBwcmVzc2lvblwiO1xyXG4gICAgICBjYW5jZWxCdG4uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIEluaXRpYWxpemUgdGhlIHBhZ2Ugd2hlbiBET00gaXMgcmVhZHlcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgaW5pdFByb2ZpbGVQYWdlKTtcclxuIiwiLy8gc3JjL2pzL3Byb2ZpbGUtcGFnZS5qcyAtIFByb2ZpbGUgcGFnZSBmdW5jdGlvbmFsaXR5XHJcbmltcG9ydCB7IGluaXRQcm9maWxlUGFnZSB9IGZyb20gXCIuL2F1dGgvcHJvZmlsZS5qc1wiO1xyXG5pbXBvcnQgeyBpbml0SGVhZGVyQXV0aCB9IGZyb20gXCIuL2F1dGgvaGVhZGVyLWF1dGguanNcIjtcclxuXHJcbi8vIEluaXRpYWxpemUgYm90aCBwcm9maWxlIGZ1bmN0aW9uYWxpdHkgYW5kIGhlYWRlciBhdXRoZW50aWNhdGlvblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgaW5pdEhlYWRlckF1dGgoKTtcclxuICBpbml0UHJvZmlsZVBhZ2UoKTtcclxuICBjb25zb2xlLmxvZyhcIlByb2ZpbGUgcGFnZSBhbmQgaGVhZGVyIGF1dGhlbnRpY2F0aW9uIGluaXRpYWxpemVkXCIpO1xyXG59KTtcclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmYgPSB7fTtcbi8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbi8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5lID0gKGNodW5rSWQpID0+IHtcblx0cmV0dXJuIFByb21pc2UuYWxsKE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uZikucmVkdWNlKChwcm9taXNlcywga2V5KSA9PiB7XG5cdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5mW2tleV0oY2h1bmtJZCwgcHJvbWlzZXMpO1xuXHRcdHJldHVybiBwcm9taXNlcztcblx0fSwgW10pKTtcbn07IiwiLy8gVGhpcyBmdW5jdGlvbiBhbGxvdyB0byByZWZlcmVuY2UgYXN5bmMgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnUgPSAoY2h1bmtJZCkgPT4ge1xuXHQvLyByZXR1cm4gdXJsIGZvciBmaWxlbmFtZXMgYmFzZWQgb24gdGVtcGxhdGVcblx0cmV0dXJuIFwianMvXCIgKyBjaHVua0lkICsgXCIuY2h1bmsuanNcIjtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5qID0gMTM4OyIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiOyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQxMzg6IDBcbn07XG5cbl9fd2VicGFja19yZXF1aXJlX18uZi5qID0gKGNodW5rSWQsIHByb21pc2VzKSA9PiB7XG5cdFx0Ly8gSlNPTlAgY2h1bmsgbG9hZGluZyBmb3IgamF2YXNjcmlwdFxuXHRcdHZhciBpbnN0YWxsZWRDaHVua0RhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSA/IGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA6IHVuZGVmaW5lZDtcblx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIHsgLy8gMCBtZWFucyBcImFscmVhZHkgaW5zdGFsbGVkXCIuXG5cblx0XHRcdC8vIGEgUHJvbWlzZSBtZWFucyBcImN1cnJlbnRseSBsb2FkaW5nXCIuXG5cdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEpIHtcblx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYodHJ1ZSkgeyAvLyBhbGwgY2h1bmtzIGhhdmUgSlNcblx0XHRcdFx0XHQvLyBzZXR1cCBQcm9taXNlIGluIGNodW5rIGNhY2hlXG5cdFx0XHRcdFx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiAoaW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gW3Jlc29sdmUsIHJlamVjdF0pKTtcblx0XHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSA9IHByb21pc2UpO1xuXG5cdFx0XHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuXHRcdFx0XHRcdHZhciB1cmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBfX3dlYnBhY2tfcmVxdWlyZV9fLnUoY2h1bmtJZCk7XG5cdFx0XHRcdFx0Ly8gY3JlYXRlIGVycm9yIGJlZm9yZSBzdGFjayB1bndvdW5kIHRvIGdldCB1c2VmdWwgc3RhY2t0cmFjZSBsYXRlclxuXHRcdFx0XHRcdHZhciBlcnJvciA9IG5ldyBFcnJvcigpO1xuXHRcdFx0XHRcdHZhciBsb2FkaW5nRW5kZWQgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpKSB7XG5cdFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcblx0XHRcdFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhICE9PSAwKSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBlcnJvclR5cGUgPSBldmVudCAmJiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnID8gJ21pc3NpbmcnIDogZXZlbnQudHlwZSk7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJlYWxTcmMgPSBldmVudCAmJiBldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LnNyYztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5tZXNzYWdlID0gJ0xvYWRpbmcgY2h1bmsgJyArIGNodW5rSWQgKyAnIGZhaWxlZC5cXG4oJyArIGVycm9yVHlwZSArICc6ICcgKyByZWFsU3JjICsgJyknO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLm5hbWUgPSAnQ2h1bmtMb2FkRXJyb3InO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLnR5cGUgPSBlcnJvclR5cGU7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IucmVxdWVzdCA9IHJlYWxTcmM7XG5cdFx0XHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhWzFdKGVycm9yKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5sKHVybCwgbG9hZGluZ0VuZGVkLCBcImNodW5rLVwiICsgY2h1bmtJZCwgY2h1bmtJZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG59O1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8uaiA9IChjaHVua0lkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKTtcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSAocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24sIGRhdGEpID0+IHtcblx0dmFyIFtjaHVua0lkcywgbW9yZU1vZHVsZXMsIHJ1bnRpbWVdID0gZGF0YTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKChpZCkgPT4gKGluc3RhbGxlZENodW5rc1tpZF0gIT09IDApKSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt1cmJhbmRvY3Nfd2ViYXBwXCJdID0gc2VsZltcIndlYnBhY2tDaHVua3VyYmFuZG9jc193ZWJhcHBcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFs3Nl0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKDc2NDcpKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJsZWFmUHJvdG90eXBlcyIsImdldFByb3RvIiwiaW5Qcm9ncmVzcyIsImRhdGFXZWJwYWNrUHJlZml4Iiwic2hvd1Byb2ZpbGVTdGF0dXMiLCJtZXNzYWdlIiwidHlwZSIsImVsZW1lbnRJZCIsInN0YXR1c0VsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidGV4dENvbnRlbnQiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJhc3luYyIsImZldGNoVXNlclByb2ZpbGUiLCJ1c2VySWQiLCJkYXRhIiwiZXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJjb2RlIiwiY29uc29sZSIsImluaXRQcm9maWxlUGFnZSIsInVzZXJFbWFpbEVsIiwibG9nb3V0QnRuIiwicHJvZmlsZUZvcm0iLCJkZWxldGVBY2NvdW50QnRuIiwibWVtYmVyU2luY2VFbCIsInNlc3Npb24iLCJhdXRoIiwiZ2V0U2Vzc2lvbiIsInVzZXIiLCJsb2ciLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJlbWFpbCIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwicHJvZmlsZSIsImlkIiwiZmlyc3ROYW1lRWwiLCJsYXN0TmFtZUVsIiwicGhvbmVFbCIsImZpcnN0X25hbWUiLCJ2YWx1ZSIsImxhc3RfbmFtZSIsInBob25lIiwicG9wdWxhdGVQcm9maWxlRm9ybSIsImRlbGV0aW9uX3NjaGVkdWxlZF9mb3IiLCJ1cGRhdGVEZWxldGVBY2NvdW50U2VjdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJzaWduT3V0Iiwic2V0VGltZW91dCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImRlbGV0ZVN0YXR1c0VsIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInByb2ZpbGVEYXRhIiwiZ2V0IiwidXBkYXRlZF9hdCIsInRvSVNPU3RyaW5nIiwidXBkYXRlIiwidXBkYXRlVXNlclByb2ZpbGUiLCJjb25maXJtIiwiYWNjZXNzX3Rva2VuIiwiRXJyb3IiLCJyZXNwb25zZSIsImZldGNoIiwic3VwYWJhc2VVcmwiLCJtZXRob2QiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWN0aW9uIiwicmVhc29uIiwicmVzdWx0IiwianNvbiIsInN1Y2Nlc3MiLCJ1cGRhdGVkUHJvZmlsZSIsIm1haW5FcnJvckNvbnRhaW5lciIsImlubmVySFRNTCIsImRlbGV0ZVNlY3Rpb24iLCJkZWxldGVCdG4iLCJkZWxldGlvbkRhdGUiLCJub3ciLCJzZWNvbmRzUmVtYWluaW5nIiwiTWF0aCIsImNlaWwiLCJnZXRUaW1lIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiY2FuY2VsQnRuIiwidmlld1N0YXR1c0J0biIsImhhbmRsZUNhbmNlbERlbGV0aW9uIiwiZGlzYWJsZWQiLCJuZXdEZWxldGVCdG4iLCJyZWxvYWQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJtIiwiTyIsImNodW5rSWRzIiwiZm4iLCJwcmlvcml0eSIsIm5vdEZ1bGZpbGxlZCIsIkluZmluaXR5IiwiaSIsImxlbmd0aCIsImZ1bGZpbGxlZCIsImoiLCJPYmplY3QiLCJrZXlzIiwiZXZlcnkiLCJrZXkiLCJzcGxpY2UiLCJyIiwiZ2V0UHJvdG90eXBlT2YiLCJvYmoiLCJ0IiwibW9kZSIsInRoaXMiLCJfX2VzTW9kdWxlIiwidGhlbiIsIm5zIiwiY3JlYXRlIiwiZGVmIiwiY3VycmVudCIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZm9yRWFjaCIsImQiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImYiLCJjaHVua0lkIiwiUHJvbWlzZSIsImFsbCIsInJlZHVjZSIsInByb21pc2VzIiwidSIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJsIiwidXJsIiwiZG9uZSIsInB1c2giLCJzY3JpcHQiLCJuZWVkQXR0YWNoIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicyIsImdldEF0dHJpYnV0ZSIsImNyZWF0ZUVsZW1lbnQiLCJjaGFyc2V0IiwidGltZW91dCIsIm5jIiwic2V0QXR0cmlidXRlIiwic3JjIiwib25TY3JpcHRDb21wbGV0ZSIsInByZXYiLCJldmVudCIsIm9uZXJyb3IiLCJvbmxvYWQiLCJjbGVhclRpbWVvdXQiLCJkb25lRm5zIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiYmluZCIsInRhcmdldCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwicCIsImluc3RhbGxlZENodW5rcyIsImluc3RhbGxlZENodW5rRGF0YSIsInByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZXJyb3JUeXBlIiwicmVhbFNyYyIsIm5hbWUiLCJyZXF1ZXN0Iiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsIm1vcmVNb2R1bGVzIiwicnVudGltZSIsInNvbWUiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiX193ZWJwYWNrX2V4cG9ydHNfXyJdLCJzb3VyY2VSb290IjoiIn0=